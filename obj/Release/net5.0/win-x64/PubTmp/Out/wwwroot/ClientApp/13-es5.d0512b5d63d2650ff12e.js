!function(){function e(e){return function(e){if(Array.isArray(e))return n(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=i(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){o=!0,c=e},f:function(){try{l||null==n.return||n.return()}finally{if(o)throw c}}}}function i(e,t){if(e){if("string"==typeof e)return n(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&r(e,t)}function r(e,t){return(r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var i,n=o(e);if(t){var a=o(this).constructor;i=Reflect.construct(n,arguments,a)}else i=n.apply(this,arguments);return l(this,i)}}function l(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function o(e){return(o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function d(e,t,i){return t&&u(e.prototype,t),i&&u(e,i),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+rmw":function(i,n,r){"use strict";r.r(n),r.d(n,"HttpLoaderFactory",function(){return On}),r.d(n,"SettingModule",function(){return qn});var l=r("SVse"),o=r("s7LF"),u=r("7g+E"),g=r("iInd"),p=r("vpVc"),b=r("dQqK"),h=r("2Vo4"),f=r("lJxs"),m=r("IheW"),v=r("AytR"),y=r("2zK7"),k=r("8Y7J");new m.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var S,x=((S=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.authUrl=v.a.apiUrl2,this.messageSource=new h.a(0),this.currentMessage=this.messageSource.asObservable()}return d(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getAllUsers",value:function(e,t){var i=new y.a;return this.http.get("".concat(this.authUrl,"Users/GetAllUsers/").concat(e,"/").concat(t),{observe:"response"}).pipe(Object(f.a)(function(e){return i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i}))}},{key:"deleteUser",value:function(e){return this.http.delete("".concat(this.authUrl,"Users/Delete/").concat(e,"/").concat(v.a.systemCode))}},{key:"mapBuildingUser",value:function(e,t){return this.http.get("".concat(this.baseUrl,"BuildingUser/MapBuildingUser/").concat(e,"/").concat(t))}},{key:"getBuildings",value:function(){return this.http.get("".concat(this.baseUrl,"Building/GetBuildings"))}},{key:"updateUser",value:function(e){return this.http.post("".concat(this.authUrl,"Users/Update"),e)}},{key:"createUser",value:function(e){return this.http.post("".concat(this.authUrl,"Users/Create"),e)}},{key:"getBuildingUsers",value:function(){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetAllBuildingUsers"))}},{key:"getLineByUserID",value:function(e,t){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetLineByUserID/").concat(e,"/").concat(t))}},{key:"removeLineUser",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingUser/RemoveLineUser"),e)}},{key:"mapLineUser",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingUser/mapLineUser"),e)}},{key:"getBuildingByUserID",value:function(e){return this.http.get("".concat(this.baseUrl,"BuildingUser/GetBuildingByUserID/").concat(e))}},{key:"removeMultipleBuildingUser",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingUser/RemoveMultipleBuildingUser"),e)}},{key:"mapMultipleBuildingUser",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingUser/MapMultipleBuildingUser"),e)}}]),e}()).\u0275fac=function(e){return new(e||S)(k.cc(m.b))},S.\u0275prov=k.Lb({token:S,factory:S.\u0275fac,providedIn:"root"}),S),w=r("HJFG"),C=r("emFE"),T=r("vGTY"),U=r("MAxt"),D=r("e7Im"),I=r("G0yt"),P=r("WWtw"),M=r("4DqM"),V=r("PDtH"),A=r("NkNT"),E=r("sWsm"),B=r("TSSN"),L=["grid"];function j(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function O(e,t){1&e&&k.Lc(0," # ")}function N(e,t){1&e&&k.Lc(0," ************ ")}function R(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",17,18),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc().onChangeRole(e,n)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.roles)("value",n.role)("fields",a.fieldsRole)("allowFiltering",!0)}}function q(e,t){if(1&e){var i=k.Wb();k.Vb(0,"button",22),k.fc("click",function(){k.Ec(i);var e=k.jc().$implicit;return k.jc().lock(e)}),k.Qb(1,"i",23),k.Ub()}}function K(e,t){if(1&e){var i=k.Wb();k.Vb(0,"button",24),k.fc("click",function(){k.Ec(i);var e=k.jc().$implicit;return k.jc().lock(e)}),k.Qb(1,"i",25),k.Ub()}}function J(e,t){if(1&e&&(k.Vb(0,"div",19),k.Jc(1,q,2,0,"button",20),k.Ub(),k.Vb(2,"div",19),k.Jc(3,K,2,0,"button",21),k.Ub()),2&e){var i=t.$implicit;k.Cb(1),k.pc("ngIf",i.isLock),k.Cb(2),k.pc("ngIf",!i.isLock)}}function F(e,t){if(1&e){var i=k.Wb();k.Vb(0,"button",28),k.fc("click",function(){k.Ec(i);var e=k.jc().$implicit;return k.jc().lock(e)}),k.Qb(1,"i",23),k.Ub()}}function G(e,t){if(1&e){var i=k.Wb();k.Vb(0,"button",29),k.fc("click",function(){k.Ec(i);var e=k.jc().$implicit;return k.jc().lock(e)}),k.Qb(1,"i",25),k.Ub()}}function $(e,t){if(1&e&&(k.Vb(0,"div",19),k.Jc(1,F,2,0,"button",26),k.Ub(),k.Vb(2,"div",19),k.Jc(3,G,2,0,"button",27),k.Ub()),2&e){var i=t.$implicit;k.Cb(1),k.pc("ngIf",i.isLock),k.Cb(2),k.pc("ngIf",!i.isLock)}}function z(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-checkbox",42,43),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc(2).checkboxChange(e,n)}),k.Ub()}2&e&&k.pc("checked",t.$implicit.status)}function Q(e,t){if(1&e&&(k.Vb(0,"div",30),k.Vb(1,"h4",31),k.Qb(2,"i",32),k.Lc(3," Line Detail "),k.Ub(),k.Vb(4,"button",33),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(5,"span",34),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",35),k.Vb(8,"div",0),k.Vb(9,"div",1),k.Vb(10,"ejs-grid",36,37),k.Vb(12,"e-columns"),k.Vb(13,"e-column",38),k.Jc(14,z,2,1,"ng-template",null,7,k.Kc),k.Ub(),k.Qb(16,"e-column",39),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(17,"div",40),k.Vb(18,"button",41),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(19,"Close"),k.Ub(),k.Ub()),2&e){var i=k.jc();k.Cb(10),k.pc("dataSource",i.lines)("allowSorting",!0)("toolbar",i.toolbarOptions)}}function H(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-checkbox",42,43),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc(2).checkboxChangeBuilding(e,n)}),k.Ub()}2&e&&k.pc("checked",t.$implicit.status)}function Y(e,t){if(1&e&&(k.Vb(0,"div",30),k.Vb(1,"h4",31),k.Qb(2,"i",32),k.Lc(3," Building Detail "),k.Ub(),k.Vb(4,"button",33),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(5,"span",34),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",35),k.Vb(8,"div",0),k.Vb(9,"div",1),k.Vb(10,"ejs-grid",36,37),k.Vb(12,"e-columns"),k.Vb(13,"e-column",38),k.Jc(14,H,2,1,"ng-template",null,7,k.Kc),k.Ub(),k.Qb(16,"e-column",44),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(17,"div",40),k.Vb(18,"button",41),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(19,"Close"),k.Ub(),k.Ub()),2&e){var i=k.jc();k.Cb(10),k.pc("dataSource",i.buildings)("allowSorting",!0)("toolbar",i.toolbarOptions)}}var W,_=((W=function(e){a(i,e);var t=c(i);function i(e,n,a,r,c,l){var o;return s(this,i),(o=t.call(this)).accountService=e,o.roleService=n,o.modalService=a,o.userService=r,o.alertify=c,o.route=l,o.userData=[],o.fieldsBuilding={text:"name",value:"name"},o.fieldsRole={text:"name",value:"name"},o.password="",o.toolbarOptions=["Search"],o.passwordFake="aRlG8BBHDYjrood3UqjzRl3FubHFI99nEPCahGtZl9jvkexwlJ",o.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},o.locale=localStorage.getItem("lang"),o}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.roleID=0,this.buildingID=0,this.getRoles(),this.getBuildings(),this.getAllUserInfo()}},{key:"createdUsers",value:function(){}},{key:"onDoubleClick",value:function(e){this.setFocus=e.column}},{key:"actionBegin",value:function(e){if("save"===e.requestType&&"add"===e.action){if(this.userCreate={id:0,username:e.data.username,password:e.data.password,email:e.data.email,roleid:2,employeeID:e.data.employeeID,isLeader:!1,systemCode:v.a.systemCode},void 0===e.data.employeeID)return this.alertify.error("Please key in a account! <br> Vui l\xf2ng nh\u1eadp t\xe0i kho\u1ea3n \u0111\u0103ng nh\u1eadp!"),void(e.cancel=!0);if(void 0===e.data.password)return this.alertify.error("Please key in a password! <br> Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!"),void(e.cancel=!0);if(!(this.roleID>0))return e.cancel=!0,void this.alertify.error("Please select a role! <br> Vui l\xf2ng ch\u1ecdn 1 quy\u1ec1n!");this.create()}"save"===e.requestType&&"edit"===e.action&&(this.userUpdate={id:e.data.id,username:e.data.username,password:e.data.password||"",email:e.data.email||"",roleid:2,employeeID:e.data.employeeID,isLeader:!1},this.update()),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"tooltip",value:function(e){"ID"!==e.column.field&&"password"!==e.column.field&&"option"!==e.column.field&&new D.b({content:e.data[e.column.field]+""},e.cell)}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport({hierarchyExportMode:"All"})}}},{key:"actionComplete",value:function(e){"beginEdit"===e.requestType&&"role"!==this.setFocus.field&&"building"!==this.setFocus.field&&e.form.elements.namedItem(this.setFocus.field).focus(),"add"===e.requestType&&e.form.elements.namedItem("employeeID").focus()}},{key:"dataBound",value:function(){}},{key:"onChangeBuilding",value:function(e,t){this.userID=t.id,this.buildingID=e.itemData.id}},{key:"onChangeRole",value:function(e,t){this.userID=t.id,this.roleID=e.itemData.id}},{key:"getBuildings",value:function(){var e=this;this.accountService.getBuildings().subscribe(function(t){e.buildingDatas=t||[];var i=e.buildingDatas.filter(function(e){return 2===e.level});e.buildingDatas=i},function(t){e.alertify.error(t)})}},{key:"getLineByUserID",value:function(){var e=this;this.accountService.getLineByUserID(this.userID,this.buildingID).subscribe(function(t){e.lines=t.data},function(t){e.alertify.error(t)})}},{key:"getBuildingByUserID",value:function(){var e=this;this.accountService.getBuildingByUserID(this.userID).subscribe(function(t){e.buildings=t.data},function(t){e.alertify.error(t)})}},{key:"getRoles",value:function(){var e=this;this.roleService.getAll().subscribe(function(t){e.roles=t},function(t){e.alertify.error(t)})}},{key:"mappingUserRole",value:function(e){var t=this;this.roleService.mappingUserRole(e).subscribe(function(e){t.alertify.success("Successfully!"),t.roleID=0},function(e){t.alertify.error(e)})}},{key:"lock",value:function(e){this.lockAPI({userID:e.id,roleID:e.userRoleID,isLock:!e.isLock})}},{key:"mapBuildingUser",value:function(e,t){var i=this;void 0!==e&&void 0!==t&&this.accountService.mapBuildingUser(e,t).subscribe(function(e){e.status?(i.alertify.success(e.message),i.getAllUserInfo(),i.buildingID=0):i.alertify.success(e.message)})}},{key:"mapUserRole",value:function(e,t){var i=this;this.roleService.mapUserRole(e,t).subscribe(function(e){e.status?(i.alertify.success(e.message),i.getAllUserInfo(),i.roleID=0):i.alertify.success(e.message)})}},{key:"lockAPI",value:function(e){var t=this;this.roleService.lock(e).subscribe(function(e){e?(t.alertify.success("Success!"),t.getAllUserInfo()):t.alertify.error("Failed!")})}},{key:"getAllUserInfo",value:function(){var e=this;this.userService.getAllUserInfo().subscribe(function(t){e.userData=t})}},{key:"delete",value:function(e){var t=this;this.accountService.deleteUser(e).subscribe(function(e){t.alertify.success("The user has been deleted! <br> X\xf3a th\xe0nh c\xf4ng!"),t.getAllUserInfo()})}},{key:"create",value:function(){var e=this;this.accountService.createUser(this.userCreate).subscribe(function(t){e.alertify.success("The user has been created! <br> T\u1ea1o th\xe0nh c\xf4ng!"),t>0&&(t>0&&e.mapUserRole(t,e.roleID),e.getAllUserInfo(),e.password="")})}},{key:"update",value:function(){var e=this;this.accountService.updateUser(this.userUpdate).subscribe(function(t){e.alertify.success("The user has been updated! <br> Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!"),e.userID&&e.buildingID&&e.mapBuildingUser(e.userID,e.buildingID),e.userID>0&&e.roleID>0&&e.mapUserRole(e.userID,e.roleID),e.getAllUserInfo(),e.password=""})}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}},{key:"checkboxChange",value:function(e,t){}},{key:"checkboxChangeBuilding",value:function(e,t){}},{key:"showLineModal",value:function(e,t){this.userID=t.id,this.buildingID=this.buildingDatas.filter(function(e){return e.name===t.building})[0].id,this.getLineByUserID(),this.modalReference=this.modalService.open(e,{size:"md"})}},{key:"showBuildingModal",value:function(e,t){this.userID=t.id,this.getBuildingByUserID(),this.modalReference=this.modalService.open(e,{size:"md"})}}]),i}(b.a)).\u0275fac=function(e){return new(e||W)(k.Pb(x),k.Pb(T.a),k.Pb(I.b),k.Pb(U.a),k.Pb(w.a),k.Pb(g.a))},W.\u0275cmp=k.Jb({type:W,selectors:[["app-account"]],viewQuery:function(e,t){var i;1&e&&k.Rc(L,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.Bb([C.n,C.f,C.k]),k.zb],decls:35,vars:24,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["id","grid","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","toolbar","pageSettings","allowExcelExport","editSettings","created","dataBound","actionBegin","actionComplete","queryCellInfo","recordDoubleClick","toolbarClick"],["grid",""],["field","ID","textAlign","Center","width","80","isPrimaryKey","true","headerText","ID"],["template",""],["editTemplate",""],["field","username","textAlign","Center",3,"headerText"],["field","employeeID","textAlign","Center",3,"headerText"],["field","password","textAlign","Center",3,"headerText"],["field","email","textAlign","Center","headerText","Email"],["field","role","textAlign","Center",3,"headerText"],["field","option","width","100","textAlign","Center",3,"headerText"],["lineModal",""],["buildingModal",""],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"btn-group"],["type","button","class","btn btn-xs btn-danger",3,"click",4,"ngIf"],["type","button","class","btn btn-xs btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-lock"],["type","button",1,"btn","btn-xs","btn-success",3,"click"],[1,"fa","fa-unlock"],["type","button","appPermission","","appFunction","Account","appAction","EDIT","class","btn btn-xs btn-danger",3,"click",4,"ngIf"],["appPermission","","appFunction","Account","appAction","EDIT","type","button","class","btn btn-xs btn-success",3,"click",4,"ngIf"],["type","button","appPermission","","appFunction","Account","appAction","EDIT",1,"btn","btn-xs","btn-danger",3,"click"],["appPermission","","appFunction","Account","appAction","EDIT","type","button",1,"btn","btn-xs","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["rowHeight","38","height","300",3,"dataSource","allowSorting","toolbar"],["lineGrid",""],["type","#","width","60"],["field","name","textAlign","Center","headerText","Line Name","width","80"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[3,"checked","change"],["checkbox",""],["field","name","textAlign","Center","headerText","Building Name","width","80"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",3),k.Vb(4,"ejs-grid",4,5),k.fc("created",function(){return t.createdUsers()})("dataBound",function(){return t.dataBound()})("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("queryCellInfo",function(e){return t.tooltip(e)})("recordDoubleClick",function(e){return t.onDoubleClick(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(6,"e-columns"),k.Vb(7,"e-column",6),k.Jc(8,j,1,1,"ng-template",null,7,k.Kc),k.Jc(10,O,1,0,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(12,"e-column",9),k.kc(13,"translate"),k.Qb(14,"e-column",10),k.kc(15,"translate"),k.Vb(16,"e-column",11),k.kc(17,"translate"),k.Jc(18,N,1,0,"ng-template",null,7,k.Kc),k.Ub(),k.Qb(20,"e-column",12),k.Vb(21,"e-column",13),k.kc(22,"translate"),k.Jc(23,R,2,4,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(25,"e-column",14),k.kc(26,"translate"),k.Jc(27,J,4,2,"ng-template",null,7,k.Kc),k.Jc(29,$,4,2,"ng-template",null,8,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Jc(31,Q,20,3,"ng-template",null,15,k.Kc),k.Jc(33,Y,20,3,"ng-template",null,16,k.Kc)),2&e&&(k.Cb(4),k.pc("dataSource",t.userData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",t.locale)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("allowExcelExport",!0)("editSettings",t.editSettings),k.Cb(8),k.qc("headerText",k.lc(13,14,"Username")),k.Cb(2),k.qc("headerText",k.lc(15,16,"Account")),k.Cb(2),k.qc("headerText",k.lc(17,18,"Password")),k.Cb(5),k.qc("headerText",k.lc(22,20,"Role")),k.Cb(4),k.qc("headerText",k.lc(26,22,"Option")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c,l.n,A.a,E.e],pipes:[B.c],styles:[""]}),W),X=r("wsp1"),Z=r("iStF"),ee=r("CC+3");function te(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",7),k.Vb(1,"label"),k.Lc(2,"Kind: "),k.Ub(),k.Vb(3,"div",8),k.Vb(4,"ejs-dropdownlist",14,15),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeKindEdit(e)}),k.Ub(),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(4),k.pc("dataSource",n.kinds)("value",n.building.kindName)("fields",n.fieldsKindEdit)("allowFiltering",!0)}}function ie(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",7),k.Vb(1,"label"),k.Lc(2,"Type: "),k.Ub(),k.Vb(3,"div",8),k.Vb(4,"ejs-dropdownlist",16,17),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeBuildingType(e)}),k.Ub(),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(4),k.pc("dataSource",n.buildingTypeData)("value",null==n.building.buildingType?null:n.building.buildingType.name)("fields",n.fieldsBuildingType)("allowFiltering",!0)}}var ne,ae=((ne=function(){function e(t,i,n,a){s(this,e),this.activeModal=t,this.buildingService=i,this.alertify=n,this.kindService=a,this.fieldsKindEdit={text:"name",value:"name"},this.fieldsBuildingType={text:"name",value:"name"}}return d(e,[{key:"ngOnInit",value:function(){var e,t,i,n;this.isLine=!1,this.isShowBuildingType=!1,console.log(this.parent),this.isLine=null!==this.parent&&(null===(e=this.parent)||void 0===e?void 0:e.level)===Z.b.BUILDING_LEVEL&&2===(null===(i=null===(t=this.parent)||void 0===t?void 0:t.buildingType)||void 0===i?void 0:i.id),this.isShowBuildingType=null===this.parent||(null===(n=this.parent)||void 0===n?void 0:n.level)===Z.b.ROOT_LEVEL,this.getAllKind(),this.getAllBuildingType()}},{key:"validation",value:function(){return""!==this.building.name||(this.alertify.warning("Please enter building name!",!0),!1)}},{key:"onChangeKindEdit",value:function(e){this.kindID=e.itemData.id}},{key:"getAllKind",value:function(){var e=this;this.kindService.getAllKind().subscribe(function(t){e.kinds=t})}},{key:"createBuilding",value:function(){var e=this;this.validation()&&(this.building.parentID>0?(this.building.kindID=this.kindID,this.building.buildingTypeID=this.buildingTypeID,this.buildingService.createSubBuilding(this.building).subscribe(function(t){e.alertify.success("The building has been created!!"),e.activeModal.dismiss(),e.buildingService.changeMessage(200)})):this.buildingService.createMainBuilding(this.building).subscribe(function(t){e.buildingService.changeMessage(200),e.alertify.success("The building has been created!!"),e.activeModal.dismiss()}))}},{key:"onChangeBuildingType",value:function(e){this.buildingTypeID=e.itemData.id}},{key:"getAllBuildingType",value:function(){var e=this;this.buildingService.getAllBuildingType().subscribe(function(t){e.buildingTypeData=t})}}]),e}()).\u0275fac=function(e){return new(e||ne)(k.Pb(I.a),k.Pb(X.a),k.Pb(w.a),k.Pb(ee.a))},ne.\u0275cmp=k.Jb({type:ne,selectors:[["app-building-modal"]],inputs:{title:"title",building:"building",parent:"parent"},decls:21,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["name","Building","type","text","placeholder","Name",1,"form-control","Name",3,"ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select kind",3,"dataSource","value","fields","allowFiltering","change"],["kindDropdownlist",""],["placeholder","Select type",3,"dataSource","value","fields","allowFiltering","change"],["buildingDropdownlist",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"h4",1),k.Qb(2,"i",2),k.Lc(3),k.Ub(),k.Vb(4,"button",3),k.fc("click",function(){return t.activeModal.dismiss("Cross click")}),k.Vb(5,"span",4),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",5),k.Vb(8,"div",6),k.Vb(9,"div",7),k.Vb(10,"label"),k.Lc(11,"Name: "),k.Ub(),k.Vb(12,"div",8),k.Vb(13,"input",9),k.fc("ngModelChange",function(e){return t.building.name=e}),k.Ub(),k.Ub(),k.Ub(),k.Jc(14,te,6,4,"div",10),k.Jc(15,ie,6,4,"div",10),k.Ub(),k.Ub(),k.Vb(16,"div",11),k.Vb(17,"button",12),k.fc("click",function(){return t.activeModal.close("Close click")}),k.Lc(18,"Close"),k.Ub(),k.Vb(19,"button",13),k.fc("click",function(){return t.createBuilding()}),k.Lc(20,"Save"),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.Nc(" ",t.title," "),k.Cb(10),k.pc("ngModel",t.building.name),k.Cb(1),k.pc("ngIf",t.isLine),k.Cb(1),k.pc("ngIf",t.isShowBuildingType))},directives:[o.a,o.f,o.i,l.n,V.c],styles:[""]}),ne),re=["treegrid"],ce=["buildingModal"];function le(e,t){1&e&&(k.Lc(0),k.kc(1,"translate")),2&e&&k.Nc(" ",k.lc(1,1,"Building Type")," ")}function oe(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",11,12),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeBuildingType(e)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.buildingTypeData)("value",null==n.entity.buildingType?null:n.entity.buildingType.id)("fields",a.fieldsBuildingType)("allowFiltering",!0)}}function se(e,t){1&e&&(k.Lc(0),k.kc(1,"translate")),2&e&&k.Nc(" ",k.lc(1,1,"KIND")," ")}function ue(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",11,12),k.fc("change",function(e){return k.Ec(i),k.jc(2).onChangeKindEdit(e)}),k.Ub()}if(2&e){var n=k.jc().$implicit,a=k.jc();k.pc("dataSource",a.kinds)("value",n.entity.kindID)("fields",a.fieldsKindEdit)("allowFiltering",!0)}}function de(e,t){if(1&e&&k.Jc(0,ue,2,4,"ejs-dropdownlist",13),2&e){var i=t.$implicit;k.pc("ngIf",3===i.entity.level&&2===(null==i.parent.buildingType?null:i.parent.buildingType.id))}}var ge,pe=((ge=function(e){a(i,e);var t=c(i);function i(e,n,a,r,c){var l;return s(this,i),(l=t.call(this)).buildingService=e,l.modalService=n,l.kindService=a,l.alertify=r,l.route=c,l.data=[],l.building={},l.parent={},l.edit={},l.fieldsKindEdit={text:"name",value:"id"},l.fieldsBuildingType={text:"name",value:"id"},l.queryCellInfoEvent=function(e){switch(e.data.entity.level){case Z.b.ROOT_LEVEL:"entity.buildingType.name"!==e.column.field&&"entity.kindName"!==e.column.field||(e.colSpan=2);break;case Z.b.BUILDING_LEVEL:"entity.buildingType.name"!==e.column.field&&"entity.kindName"!==e.column.field||(e.colSpan=3);break;case Z.b.LINE_LEVEL:"entity.name"===e.column.field&&(e.colSpan=2)}},l}return d(i,[{key:"ngOnInit",value:function(){this.PermissionForTreeGrid(this.route),this.editing={allowDeleting:!0,allowEditing:!0,mode:"Row"},this.toolbar=["Add","Delete","Search","Update","Cancel"],this.optionTreeGrid(),this.onService(),this.getAllKind(),this.getAllBuildingType(),this.getBuildingsAsTreeView()}},{key:"optionTreeGrid",value:function(){this.pageSettings={pageSize:20},this.editparams={params:{format:"n"}}}},{key:"created",value:function(){this.getBuildingsAsTreeView()}},{key:"onService",value:function(){var e=this;this.buildingService.currentMessage.subscribe(function(t){200===t&&e.getBuildingsAsTreeView()})}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"treegrid_gridcontrol_add":e.cancel=!0,this.openMainModal();break;case"treegrid_gridcontrol_pdfexport":this.treeGridObj.pdfExport({hierarchyExportMode:"All"});break;case"treegrid_gridcontrol_excelexport":this.treeGridObj.excelExport({hierarchyExportMode:"All"})}}},{key:"contextMenuClick",value:function(e){var t=e.rowInfo.rowData.entity;switch(this.building={},e.item.id){case"DeleteOC":this.delete(e.rowInfo.rowData.entity.id);break;case"Add-Sub-Item":this.building.parentID=t.id,this.building.level=t.level,this.parent=t,this.openSubModal()}}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Project",'Are you sure you want to delete this BuildingID "'+e+'" ?',function(){t.buildingService.delete(e).subscribe(function(e){t.getBuildingsAsTreeView(),t.treeGridObj.refresh(),t.alertify.success("The building has been deleted!!!")},function(e){t.alertify.error("Failed to delete the building!!!")})})}},{key:"actionComplete",value:function(e){}},{key:"actionBegin",value:function(e){var t;if("beginEdit"===e.requestType){var i=e.rowData;this.buildingTypeID=null===(t=null==i?void 0:i.buildingType)||void 0===t?void 0:t.id}"save"===e.requestType&&"edit"===e.action&&(this.edit=Object.assign({},e.data.entity),this.edit.kindID=this.kindID,this.edit.buildingTypeID=this.buildingTypeID,this.rename())}},{key:"getBuildingsAsTreeView",value:function(){var e=this;this.buildingService.getBuildingsAsTreeView().subscribe(function(t){e.data=t})}},{key:"clearFrom",value:function(){this.building={}}},{key:"rename",value:function(){var e=this;this.buildingService.rename(this.edit).subscribe(function(t){e.getBuildingsAsTreeView(),e.edit={},e.kindID=0,e.buildingTypeID=0,e.alertify.success("The building has been changed!!!")})}},{key:"openMainModal",value:function(){this.clearFrom();var e=this.modalService.open(ae,{size:"lg"});e.componentInstance.title="Add Root",e.componentInstance.building=this.building,e.result.then(function(e){},function(e){})}},{key:"openSubModal",value:function(){var e=this.modalService.open(ae,{size:"lg"});e.componentInstance.title=1===this.building.level?"Add building":"Add Line",e.componentInstance.building=this.building,e.componentInstance.parent=this.parent,e.result.then(function(e){},function(e){})}},{key:"onChangeKindEdit",value:function(e){this.kindID=e.itemData.id}},{key:"getAllKind",value:function(){var e=this;this.kindService.getAllKind().subscribe(function(t){e.kinds=t})}},{key:"onChangeBuildingType",value:function(e){this.buildingTypeID=e.itemData.id}},{key:"getAllBuildingType",value:function(){var e=this;this.buildingService.getAllBuildingType().subscribe(function(t){e.buildingTypeData=t})}}]),i}(b.a)).\u0275fac=function(e){return new(e||ge)(k.Pb(X.a),k.Pb(I.b),k.Pb(ee.a),k.Pb(w.a),k.Pb(g.a))},ge.\u0275cmp=k.Jb({type:ge,selectors:[["app-building"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(re,1),k.Rc(ce,1)),2&e&&(k.Ac(i=k.gc())&&(t.treeGridObj=i.first),k.Ac(i=k.gc())&&(t.buildingModal=i.first))},features:[k.Bb([M.e,M.g,M.f]),k.zb],decls:20,vars:12,consts:[[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["id","treegrid","allowSorting","true","gridLines","Both","childMapping","childNodes","allowExcelExport","true","allowPdfExport","true",3,"dataSource","treeColumnIndex","editSettings","contextMenuItems","toolbar","contextMenuClick","toolbarClick","created","actionComplete","actionBegin","queryCellInfo"],["treegrid",""],["field","entity.level","width","80","isPrimaryKey","true",3,"allowEditing","headerText"],["field","entity.name",3,"headerText"],["field","entity.buildingType.name","headerText","Building Type","textAlign","Center","width","150"],["headerTemplate",""],["editTemplate",""],["field","entity.kindName","headerText","Kind","textAlign","Center","width","150"],[3,"dataSource","value","fields","allowFiltering","change"],["kindDropdownlist",""],[3,"dataSource","value","fields","allowFiltering","change",4,"ngIf"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-treegrid",3,4),k.fc("contextMenuClick",function(e){return t.contextMenuClick(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("created",function(){return t.created()})("actionComplete",function(e){return t.actionComplete(e)})("actionBegin",function(e){return t.actionBegin(e)})("queryCellInfo",function(e){return t.queryCellInfoEvent(e)}),k.Vb(5,"e-columns"),k.Qb(6,"e-column",5),k.kc(7,"translate"),k.Qb(8,"e-column",6),k.kc(9,"translate"),k.Vb(10,"e-column",7),k.Jc(11,le,2,3,"ng-template",null,8,k.Kc),k.Jc(13,oe,2,4,"ng-template",null,9,k.Kc),k.Ub(),k.Vb(15,"e-column",10),k.Jc(16,se,2,3,"ng-template",null,8,k.Kc),k.Jc(18,de,1,1,"ng-template",null,9,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("dataSource",t.data)("treeColumnIndex",1)("editSettings",t.editSettingsTree)("contextMenuItems",t.contextMenuItems)("toolbar",t.toolbarOptionsTree),k.Cb(3),k.qc("headerText",k.lc(7,8,"Level")),k.pc("allowEditing",!1),k.Cb(2),k.qc("headerText",k.lc(9,10,"Name")))},directives:[M.i,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c,l.n],pipes:[B.c],styles:[".bgcolor td{background-color:#ff6}.e-grid .e-altrow{background-color:#d6d8db}"],encapsulation:2}),ge),be=r("mrSG"),he=r("KLU1"),fe=r("wpBH"),me=["gridBuilding"],ve=["gridSetting"];function ye(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function ke(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function Se(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",20,21),k.fc("ngModelChange",function(e){return t.$implicit.glueTypeID=e})("select",function(e){return k.Ec(i),k.jc().onSelectGlueType(e)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.glueTypes)("ngModel",n.glueTypeID)("allowFiltering",!0)("fields",a.fields)}}function xe(e,t){1&e&&k.Lc(0),2&e&&k.Nc(" ",t.$implicit.glueType.title," ")}function we(e,t){if(1&e){var i=k.Wb();k.Vb(0,"button",22),k.fc("click",function(){k.Ec(i);var e=t.$implicit,n=k.jc(),a=k.Bc(35);return n.openPrintModal(a,e)}),k.Lc(1,"Print QR Code"),k.Ub()}}function Ce(e,t){1&e&&k.Lc(0," N/A ")}function Te(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",23),k.Vb(1,"h4",24),k.Qb(2,"i",25),k.Lc(3," Print QR Code "),k.Ub(),k.Vb(4,"button",26),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(5,"span",27),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",28),k.Vb(8,"div",3),k.Qb(9,"div",4),k.Vb(10,"div",29),k.Vb(11,"div",30),k.Qb(12,"ejs-qrcodegenerator",31,32),k.Ub(),k.Vb(14,"div"),k.Vb(15,"label"),k.Lc(16,"QrCode:"),k.Ub(),k.Lc(17),k.Ub(),k.Ub(),k.Qb(18,"div",4),k.Ub(),k.Ub(),k.Vb(19,"div",33),k.Vb(20,"button",34),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(21,"Close"),k.Ub(),k.Vb(22,"button",35),k.fc("click",function(){return k.Ec(i),k.jc().printData()}),k.Lc(23,"Print"),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(12),k.pc("displayText",n.displayTextMethod)("value",n.qrcode),k.Cb(5),k.Nc(" ",n.qrcode,"")}}var Ue,De=((Ue=function(){function e(t,i,n,a){s(this,e),this.buildingService=t,this.alertify=i,this.modalService=n,this.settingService=a,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"title",value:"id"},this.buildings=[],this.settings=[],this.displayTextMethod={visibility:!1}}return d(e,[{key:"ngOnInit",value:function(){this.filterSettings={type:"Excel"},this.toolbar=["Excel Export","Search"],this.loadData(),this.getAllGlueType()}},{key:"openPrintModal",value:function(e,t){this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.qrcode=t.machineCode}},{key:"printData",value:function(){var e="";e+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(document.getElementById("qrcode").innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n              <li style=\"color: transparent;\" class='subInfo'>a</li>\n              <li style=\"color: transparent;\" class='subInfo'>a</li>\n              <li class='subInfo'>QR Code: ").concat(this.qrcode,"</li>\n              <li style=\"color: transparent;\" class='subInfo'>a</li>\n              <li style=\"color: transparent;\" class='subInfo'>a</li>\n          </ul>\n         </div>\n      </div>\n      "),this.configurePrint(e)}},{key:"configurePrint",value:function(e){var t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(e,"\n      </body>\n    </html>\n    ")),t.document.close()}},{key:"getAllGlueType",value:function(){return this.settingService.getAllGlueType().toPromise()}},{key:"getBuildingForSetting",value:function(){return this.buildingService.getBuildingsForSetting().toPromise()}},{key:"getSettingByBuilding",value:function(e){return this.settingService.getSettingByBuilding(e).toPromise()}},{key:"editSetting",value:function(e){return this.settingService.updateSetting(e).toPromise()}},{key:"createSetting",value:function(e){return this.settingService.addSetting(e).toPromise()}},{key:"deleteSetting",value:function(e){return this.settingService.deleteSetting(e).toPromise()}},{key:"onSelectGlueType",value:function(e){this.glueTypeId=+e.itemData.id}},{key:"loadData",value:function(){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getBuildingForSetting();case 3:return this.buildings=e.sent,e.next=6,this.getAllGlueType();case 6:this.glueTypes=e.sent.filter(function(e){return 1===e.level}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),this.alertify.error(e.t0+"");case 12:case"end":return e.stop()}},e,this,[[0,9]])}))}},{key:"edit",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={id:e.id,minRPM:e.minRPM,maxRPM:e.maxRPM,glueTypeID:this.glueTypeId,machineType:e.machineType,machineCode:e.machineCode,buildingID:this.buildingID},t.prev=1,t.next=4,this.editSetting(i);case 4:return this.alertify.success("Success"),t.next=7,this.getSettingByBuilding(this.buildingID);case 7:this.settings=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),this.alertify.error(t.t0+"");case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"add",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={id:0,minRPM:e.minRPM,maxRPM:e.maxRPM,glueTypeID:this.glueTypeId,machineType:e.machineType,machineCode:e.machineCode,buildingID:this.buildingID},t.prev=1,t.next=4,this.createSetting(i);case 4:return this.alertify.success("Success"),t.next=7,this.getSettingByBuilding(this.buildingID);case 7:this.settings=t.sent,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),this.alertify.error(t.t0+"");case 13:case"end":return t.stop()}},t,this,[[1,10]])}))}},{key:"delete",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.deleteSetting(e);case 3:return this.alertify.success("Success"),t.next=6,this.getSettingByBuilding(this.buildingID);case 6:this.settings=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),this.alertify.error(t.t0+"");case 12:case"end":return t.stop()}},t,this,[[0,9]])}))}},{key:"actionCompleteSetting",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("#").disabled=!0)}},{key:"actionBeginSetting",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0="save"===e.requestType,!t.t0){t.next=10;break}if(t.t1="add"===e.action,!t.t1){t.next=6;break}return t.next=6,this.add(e.data);case 6:if(t.t2="edit"===e.action,!t.t2){t.next=10;break}return t.next=10,this.edit(e.data);case 10:if(t.t3="delete"===e.requestType,!t.t3){t.next=14;break}return t.next=14,this.delete(e.data[0].id);case 14:case"end":return t.stop()}},t,this)}))}},{key:"rowSelectedBuilding",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.isInteracted,!t.t0){t.next=7;break}return this.toolbarOptions=["Add","Edit","Delete","Cancel","Excel Export","Search"],this.buildingID=e.data.id,t.next=6,this.getSettingByBuilding(this.buildingID);case 6:this.settings=t.sent;case 7:this.index=[e.rowIndex];case 8:case"end":return t.stop()}},t,this)}))}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.gridSetting.excelExport()}}},{key:"toolbarClickBuilding",value:function(e){switch(e.item.text){case"Excel Export":this.gridBuilding.excelExport()}}},{key:"NO",value:function(e){return+e+1}}]),e}()).\u0275fac=function(e){return new(e||Ue)(k.Pb(X.a),k.Pb(w.a),k.Pb(I.b),k.Pb(he.a))},Ue.\u0275cmp=k.Jb({type:Ue,selectors:[["app-building-setting"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(me,1),k.Rc(ve,1)),2&e&&(k.Ac(i=k.gc())&&(t.gridBuilding=i.first),k.Ac(i=k.gc())&&(t.gridSetting=i.first))},decls:36,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["gridLines","Both","allowFiltering","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","toolbar","rowSelected","toolbarClick"],["gridBuilding",""],["field","#","textAlign","Center","headerText","#","width","40"],["template",""],["field","name","textAlign","Center","headerText","Building","width","100"],[1,"col-md-8"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["gridSetting",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["field","machineCode","textAlign","Center","headerText","Machine","width","100"],["field","glueType.code","textAlign","Center","headerText","Glue Type","width","130"],["editTemplate",""],["field","","textAlign","Center","headerText","Print","width","100"],[1,"card-footer"],["printQRCodeModal",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","allowFiltering","fields","ngModelChange","select"],["lineDropdownlist",""],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode","width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary","float-left",3,"click"],["type","button",1,"btn","btn-primary","float-right",3,"click"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"h2"),k.Lc(3),k.kc(4,"translate"),k.Ub(),k.Ub(),k.Vb(5,"div",2),k.Vb(6,"div",3),k.Vb(7,"div",4),k.Vb(8,"ejs-grid",5,6),k.fc("rowSelected",function(e){return t.rowSelectedBuilding(e)})("toolbarClick",function(e){return t.toolbarClickBuilding(e)}),k.Vb(10,"e-columns"),k.Vb(11,"e-column",7),k.Jc(12,ye,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(14,"e-column",9),k.Ub(),k.Ub(),k.Ub(),k.Vb(15,"div",10),k.Vb(16,"ejs-grid",11,12),k.fc("actionBegin",function(e){return t.actionBeginSetting(e)})("actionComplete",function(e){return t.actionCompleteSetting(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(18,"e-columns"),k.Vb(19,"e-column",13),k.Jc(20,ke,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(22,"e-column",14),k.Vb(23,"e-column",15),k.Jc(24,Se,2,4,"ng-template",null,16,k.Kc),k.Jc(26,xe,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(28,"e-column",17),k.Jc(29,we,2,0,"ng-template",null,8,k.Kc),k.Jc(31,Ce,1,0,"ng-template",null,16,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Qb(33,"div",18),k.Ub(),k.Jc(34,Te,24,3,"ng-template",null,19,k.Kc)),2&e&&(k.Cb(3),k.Mc(k.lc(4,13,"Building Setting")),k.Cb(5),k.pc("dataSource",t.buildings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbar),k.Cb(8),k.pc("dataSource",t.settings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("toolbar",t.toolbarOptions)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c,o.f,o.i,fe.d],pipes:[B.c],styles:[""]}),Ue),Ie=r("h9f+");new m.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var Pe,Me,Ve=((Me=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.messageSource=new h.a(0),this.currentMessage=this.messageSource.asObservable()}return d(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"getBuildings",value:function(){return this.http.get("".concat(this.baseUrl,"BuildingLunchTime/GetAllBuildings"))}},{key:"getPeriodMixingByBuildingID",value:function(e){return this.http.get("".concat(this.baseUrl,"BuildingLunchTime/getPeriodMixingByBuildingID/").concat(e))}},{key:"addOrUpdateLunchTime",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingLunchTime/AddOrUpdateLunchTime"),e)}},{key:"updatePeriodMixing",value:function(e){return this.http.put("".concat(this.baseUrl,"BuildingLunchTime/updatePeriodMixing"),e)}},{key:"addPeriodMixing",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingLunchTime/addPeriodMixing"),e)}},{key:"deletePeriodMixing",value:function(e){return this.http.delete("".concat(this.baseUrl,"BuildingLunchTime/deletePeriodMixing/").concat(e))}},{key:"addLunchTimeBuilding",value:function(e){return this.http.put("".concat(this.baseUrl,"BuildingLunchTime/AddLunchTimeBuilding"),e)}},{key:"updatePeriodDispatch",value:function(e){return this.http.put("".concat(this.baseUrl,"BuildingLunchTime/updatePeriodDispatch"),e)}},{key:"addPeriodDispatch",value:function(e){return this.http.post("".concat(this.baseUrl,"BuildingLunchTime/addPeriodDispatch"),e)}},{key:"deletePeriodDispatch",value:function(e){return this.http.delete("".concat(this.baseUrl,"BuildingLunchTime/deletePeriodDispatch/").concat(e))}},{key:"getPeriodDispatchByPeriodMixingID",value:function(e){return this.http.get("".concat(this.baseUrl,"BuildingLunchTime/GetPeriodDispatchByPeriodMixingID/").concat(e))}}]),e}()).\u0275fac=function(e){return new(e||Me)(k.cc(m.b))},Me.\u0275prov=k.Lb({token:Me,factory:Me.\u0275fac,providedIn:"root"}),Me),Ae=((Pe=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.ModalNameSource=new h.a(0),this.currentModalName=this.ModalNameSource.asObservable()}return d(e,[{key:"getAllLunchTime",value:function(){return this.http.get(this.baseUrl+"LunchTime/GetAll",{})}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"LunchTime/Create",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"LunchTime/Update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"LunchTime/Delete/"+e)}}]),e}()).\u0275fac=function(e){return new(e||Pe)(k.cc(m.b))},Pe.\u0275prov=k.Lb({token:Pe,factory:Pe.\u0275fac,providedIn:"root"}),Pe),Ee=r("OoJn"),Be=["grid"];function Le(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",16,17),k.fc("ngModelChange",function(e){return t.$implicit.lunchTime=e})("select",function(e){k.Ec(i);var n=t.$implicit;return k.jc().onSelectLunchTime(e,n)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.lunchTimeData)("ngModel",n.lunchTime)("allowFiltering",!0)("fields",a.fields)}}function je(e,t){1&e&&k.Lc(0),2&e&&k.Nc(" ",t.$implicit.lunchTime," ")}function Oe(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",19),k.Vb(1,"button",20),k.fc("click",function(){k.Ec(i);var e=k.jc().$implicit,t=k.jc(),n=k.Bc(26);return t.showModal(n,e)}),k.Qb(2,"i",21),k.Lc(3),k.kc(4,"translate"),k.Ub(),k.Ub()}2&e&&(k.Cb(3),k.Nc(" ",k.lc(4,1,"Time Period Mixing")," "))}function Ne(e,t){1&e&&k.Jc(0,Oe,5,3,"div",18),2&e&&k.pc("ngIf",t.$implicit.lunchTimeID>0)}function Re(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc(2);k.Nc(" ",n.NO(i.index)," ")}}function qe(e,t){}function Ke(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.startTime,"HH:mm")," ")}function Je(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",39),k.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(e){return k.Ec(i),k.jc(2).onChangeStartTime(e)}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function Fe(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.endTime,"HH:mm")," ")}function Ge(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",40),k.fc("valueChange",function(e){return k.Ec(i),k.jc(2).onChangeEndTime(e)})("ngModelChange",function(e){return t.$implicit.endTime=e}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}function $e(e,t){1&e&&(k.Lc(0),k.kc(1,"translate")),2&e&&k.Nc(" ",k.lc(1,1,"Overtime/No Overtime")," ")}function ze(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-switch",41,42),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc(2).changeOvertime(e,n)}),k.kc(2,"translate"),k.kc(3,"translate"),k.Ub()}if(2&e){var n=t.$implicit;k.qc("onLabel",k.lc(2,3,"Overtime")),k.qc("offLabel",k.lc(3,5,"")),k.pc("checked",n.isOvertime)}}function Qe(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-switch",41,42),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc(2).changeOvertime(e,n)}),k.kc(2,"translate"),k.kc(3,"translate"),k.Ub()}if(2&e){var n=t.$implicit;k.qc("onLabel",k.lc(2,3,"Overtime")),k.qc("offLabel",k.lc(3,5,"")),k.pc("checked",n.isOvertime)}}function He(e,t){1&e&&(k.Lc(0),k.kc(1,"translate")),2&e&&k.Nc(" ",k.lc(1,1,"Option")," ")}function Ye(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",19),k.Vb(1,"button",20),k.fc("click",function(){k.Ec(i);var e=t.$implicit,n=k.jc(2),a=k.Bc(28);return n.showPeriodDispatchModal(a,e)}),k.Qb(2,"i",21),k.Lc(3),k.kc(4,"translate"),k.Ub(),k.Ub()}2&e&&(k.Cb(3),k.Nc(" ",k.lc(4,1,"Time Period Dispatch")," "))}function We(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",22),k.Vb(1,"h4",23),k.Qb(2,"i",24),k.Lc(3," Time Period Mixing List "),k.Vb(4,"span",25),k.Lc(5),k.Ub(),k.Ub(),k.Vb(6,"button",26),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(7,"span",27),k.Lc(8,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(9,"div",28),k.Vb(10,"div",0),k.Vb(11,"div",1),k.Vb(12,"ejs-grid",29,30),k.fc("actionBegin",function(e){return k.Ec(i),k.jc().actionBeginPeriodsGrid(e)}),k.Vb(14,"e-columns"),k.Vb(15,"e-column",31),k.Jc(16,Re,1,1,"ng-template",null,12,k.Kc),k.Jc(18,qe,0,0,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(20,"e-column",32),k.Jc(21,Ke,2,4,"ng-template",null,12,k.Kc),k.Jc(23,Je,1,2,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(25,"e-column",33),k.Jc(26,Fe,2,4,"ng-template",null,12,k.Kc),k.Jc(28,Ge,1,2,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(30,"e-column",34),k.kc(31,"translate"),k.Jc(32,$e,2,3,"ng-template",null,35,k.Kc),k.Jc(34,ze,4,7,"ng-template",null,12,k.Kc),k.Jc(36,Qe,4,7,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(38,"e-column",36),k.kc(39,"translate"),k.Jc(40,He,2,3,"ng-template",null,35,k.Kc),k.Jc(42,Ye,5,3,"ng-template",null,12,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(44,"div",37),k.Vb(45,"button",38),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(46,"Close"),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(5),k.Oc(" ( *The lunch time of ",n.building.name," building: ",n.building.lunchTime,")"),k.Cb(7),k.pc("dataSource",n.periods)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",n.filterSettings)("editSettings",n.editSettings)("toolbar",n.toolbarOptions),k.Cb(18),k.qc("headerText",k.lc(31,10,"Overtime/No Overtime")),k.Cb(8),k.qc("headerText",k.lc(39,12,"Option"))}}function _e(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc(2);k.Nc(" ",n.NO(i.index)," ")}}function Xe(e,t){}function Ze(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.startTime,"HH:mm")," ")}function et(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",39),k.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(e){return k.Ec(i),k.jc(2).onChangeStartTimePeriodDispatch(e)}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function tt(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.endTime,"HH:mm")," ")}function it(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",40),k.fc("valueChange",function(e){return k.Ec(i),k.jc(2).onChangeEndTimePeriodDispatch(e)})("ngModelChange",function(e){return t.$implicit.endTime=e}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}function nt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",22),k.Vb(1,"h4",23),k.Qb(2,"i",24),k.Lc(3," Time Period Dispatch List "),k.Vb(4,"span",25),k.Lc(5),k.kc(6,"date"),k.kc(7,"date"),k.Ub(),k.Ub(),k.Vb(8,"button",26),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(9,"span",27),k.Lc(10,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(11,"div",28),k.Vb(12,"div",0),k.Vb(13,"div",1),k.Vb(14,"ejs-grid",29,30),k.fc("actionBegin",function(e){return k.Ec(i),k.jc().actionBeginPeriodsDispatchGrid(e)}),k.Vb(16,"e-columns"),k.Vb(17,"e-column",31),k.Jc(18,_e,1,1,"ng-template",null,12,k.Kc),k.Jc(20,Xe,0,0,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(22,"e-column",32),k.Jc(23,Ze,2,4,"ng-template",null,12,k.Kc),k.Jc(25,et,1,2,"ng-template",null,11,k.Kc),k.Ub(),k.Vb(27,"e-column",33),k.Jc(28,tt,2,4,"ng-template",null,12,k.Kc),k.Jc(30,it,1,2,"ng-template",null,11,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(32,"div",37),k.Vb(33,"button",38),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(34,"Close"),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(5),k.Oc(" ( *The time period mixing: ",k.mc(6,8,n.periodMixing.startTime,"HH:mm")," - ",k.mc(7,11,n.periodMixing.endTime,"HH:mm")," )"),k.Cb(9),k.pc("dataSource",n.periodsDispatch)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",n.filterSettings)("editSettings",n.editSettings)("toolbar",n.toolbarOptions)}}var at,rt=((at=function(e){a(i,e);var t=c(i);function i(e,n,a,r,c,l){var o;return s(this,i),(o=t.call(this)).buildingLunchTimeService=e,o.lunchTimeService=n,o.alertify=a,o.datePipe=r,o.modalService=c,o.route=l,o.data=[],o.periods=[],o.periodsDispatch=[],o.buildings=[],o.steps={hour:1,minute:30},o.fields={text:"content",value:"content"},o.lunchTimeData=[],o.filterSettings={type:"Excel"},o.periodMixing={},o.periodDispatch={},o}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.toolbar=["Search"],this.getAllLunchTime()}},{key:"created",value:function(){this.getBuildings()}},{key:"rowSelected",value:function(e){this.buildingID=Number((e.data.entity||e.data).id)}},{key:"onChangeStartTime",value:function(e){this.startTime=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}},{key:"onChangeEndTime",value:function(e){this.endTime=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}},{key:"onSelectLunchTime",value:function(e,t){var i=this;this.building={},this.building.id=t.id,this.building.lunchTimeID=e.itemData.id,this.buildingLunchTimeService.addLunchTimeBuilding(this.building).subscribe(function(){i.alertify.success("success!"),i.getBuildings()},function(e){i.alertify.error(e)})}},{key:"updatePeriod",value:function(e){var t=this;this.buildingLunchTimeService.updatePeriodMixing(e).subscribe(function(e){t.getPeriodMixingByBuildingID(),t.alertify.success("success!")},function(e){t.alertify.error(e)})}},{key:"getBuildings",value:function(){var e=this;this.buildingLunchTimeService.getBuildings().subscribe(function(t){e.buildings=t||[];var i=e.buildings.filter(function(e){return 2===e.level});e.buildings=i},function(t){e.alertify.error(t)})}},{key:"getAllLunchTime",value:function(){var e=this;this.lunchTimeService.getAllLunchTime().subscribe(function(t){e.lunchTimeData=t||[]},function(t){e.alertify.error(t)})}},{key:"getPeriodMixingByBuildingID",value:function(){var e=this;this.buildingLunchTimeService.getPeriodMixingByBuildingID(this.buildingID).subscribe(function(t){e.periods=t.map(function(e){return{isOvertime:e.isOvertime,startTime:new Date(e.startTime),endTime:new Date(e.endTime),id:e.id}})})}},{key:"showModal",value:function(e,t){this.buildingID=+t.id,this.building=t,this.getPeriodMixingByBuildingID(),this.modalReference=this.modalService.open(e,{size:"xl"})}},{key:"getPeriodDispatchByPeriodMixingID",value:function(){var e=this;this.buildingLunchTimeService.getPeriodDispatchByPeriodMixingID(this.periodMixingID).subscribe(function(t){e.periodsDispatch=t.map(function(e){return{isOvertime:e.isOvertime,startTime:new Date(e.startTime),endTime:new Date(e.endTime),id:e.id}})})}},{key:"showPeriodDispatchModal",value:function(e,t){this.periodMixing=t,this.periodMixingID=+t.id,this.getPeriodDispatchByPeriodMixingID(),this.modalReference=this.modalService.open(e,{size:"xl"})}},{key:"actionBeginPeriodsGrid",value:function(e){if("beginEdit"===e.requestType){var t=e.rowData;this.startTime=this.datePipe.transform(null==t?void 0:t.startTime,"YYYY-MM-dd HH:mm"),this.endTime=this.datePipe.transform(null==t?void 0:t.endTime,"YYYY-MM-dd HH:mm")}"save"===e.requestType&&("add"===e.action&&(this.periodMixing.startTime=this.datePipe.transform(this.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(this.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.create()),"edit"===e.action&&(this.periodMixing=e.data,this.periodMixing.startTime=this.datePipe.transform(this.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(this.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"create",value:function(){var e=this;this.buildingLunchTimeService.addPeriodMixing(this.periodMixing).subscribe(function(){e.alertify.success("Successfully"),e.getPeriodMixingByBuildingID(),e.periodMixing={}},function(t){e.alertify.error(t),e.getPeriodMixingByBuildingID()})}},{key:"update",value:function(){var e=this;this.buildingLunchTimeService.updatePeriodMixing(this.periodMixing).subscribe(function(){e.alertify.success("Successfully"),e.getPeriodMixingByBuildingID(),e.periodMixing={}},function(t){e.getPeriodMixingByBuildingID(),e.alertify.error(t)})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete",'Are you sure you want to delete this "'+e+'" ?',function(){t.buildingLunchTimeService.deletePeriodMixing(e).subscribe(function(){t.getPeriodMixingByBuildingID(),t.alertify.success("Successfully")},function(e){t.alertify.error(e),t.getPeriodMixingByBuildingID()})})}},{key:"changeOvertime",value:function(e,t){this.periodMixing=t,this.periodMixing.startTime=this.datePipe.transform(t.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(t.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.periodMixing.isOvertime=e.checked,this.update()}},{key:"changeOvertimePeriodDispatch",value:function(e,t){this.periodDispatch=t,this.periodDispatch.periodMixingID=this.periodMixingID,this.updatePeriodDispatch()}},{key:"NO",value:function(e){return Number(e)+1}},{key:"onChangeStartTimePeriodDispatch",value:function(e){this.startTimePeriodDispatch=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}},{key:"onChangeEndTimePeriodDispatch",value:function(e){this.endTimePeriodDispatch=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}},{key:"rowSelectedPeriodDispatch",value:function(e){this.periodMixingID=Number((e.data.entity||e.data).id)}},{key:"actionBeginPeriodsDispatchGrid",value:function(e){if("beginEdit"===e.requestType){var t=e.rowData;this.startTimePeriodDispatch=this.datePipe.transform(null==t?void 0:t.startTime,"YYYY-MM-dd HH:mm"),this.endTimePeriodDispatch=this.datePipe.transform(null==t?void 0:t.endTime,"YYYY-MM-dd HH:mm")}"save"===e.requestType&&("add"===e.action&&(this.periodDispatch.startTime=this.datePipe.transform(this.startTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.endTime=this.datePipe.transform(this.endTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.periodMixingID=this.periodMixingID,this.createPeriodDispatch()),"edit"===e.action&&(this.periodDispatch=e.data,this.periodDispatch.startTime=this.datePipe.transform(this.startTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.endTime=this.datePipe.transform(this.endTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.periodMixingID=this.periodMixingID,this.updatePeriodDispatch())),"delete"===e.requestType&&this.deletePeriodDispatch(e.data[0].id)}},{key:"createPeriodDispatch",value:function(){var e=this;this.buildingLunchTimeService.addPeriodDispatch(this.periodDispatch).subscribe(function(){e.alertify.success("Successfully"),e.getPeriodDispatchByPeriodMixingID(),e.periodDispatch={}},function(t){e.alertify.error(t),e.getPeriodDispatchByPeriodMixingID()})}},{key:"updatePeriodDispatch",value:function(){var e=this;this.buildingLunchTimeService.updatePeriodDispatch(this.periodDispatch).subscribe(function(){e.alertify.success("Successfully"),e.getPeriodDispatchByPeriodMixingID(),e.periodDispatch={}},function(t){e.getPeriodDispatchByPeriodMixingID(),e.alertify.error(t)})}},{key:"deletePeriodDispatch",value:function(e){var t=this;this.alertify.confirm("Delete",'Are you sure you want to delete this "'+e+'" ?',function(){t.buildingLunchTimeService.deletePeriodDispatch(e).subscribe(function(){t.getPeriodDispatchByPeriodMixingID(),t.alertify.success("Successfully")},function(e){t.alertify.error(e),t.getPeriodDispatchByPeriodMixingID()})})}}]),i}(b.a)).\u0275fac=function(e){return new(e||at)(k.Pb(Ve),k.Pb(Ae),k.Pb(w.a),k.Pb(l.e),k.Pb(I.b),k.Pb(g.a))},at.\u0275cmp=k.Jb({type:at,selectors:[["app-building-lunch-time"]],viewQuery:function(e,t){var i;1&e&&k.Rc(Be,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:29,vars:18,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-building"],[1,"card-body","table-responsive","p-0"],["allowSorting","true","gridLines","Both",3,"dataSource","editSettings","toolbar","rowSelected","created"],["field","level","width","80","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","name","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","lunchTime","textAlign","Center",3,"headerText"],["editTemplate",""],["template",""],["field","Option","isPrimaryKey","true","textAlign","Center",3,"headerText"],["periodModal",""],["periodDispatchModal",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","allowFiltering","fields","ngModelChange","select"],["lineDropdownlist",""],["class","btn-group",4,"ngIf"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-info",3,"click"],[1,"fa","fa-plus"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],[1,"font-weight-bold","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true","gridLines","Both","rowHeight","38",3,"dataSource","allowSorting","allowExcelExport","filterSettings","editSettings","toolbar","actionBegin"],["grid",""],["field","period","headerText","Period","isPrimaryKey","true","width","60"],["field","startTime","textAlign","Center","headerText","Start Time","width","120"],["field","endTime","textAlign","Center","headerText","End Time","width","120"],["field","isOvertime","width","138","textAlign","Center",3,"headerText"],["headerTemplate",""],["field","option","width","138","textAlign","Center",3,"headerText"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[2,"width","100%",3,"ngModel","format","ngModelChange","valueChange"],[2,"width","100%",3,"ngModel","format","valueChange","ngModelChange"],["cssClass","custom-overtime",2,"width","80px",3,"onLabel","offLabel","checked","change"],["switch",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",3),k.Vb(4,"h3",4),k.Qb(5,"i",5),k.Lc(6),k.kc(7,"translate"),k.Ub(),k.Ub(),k.Vb(8,"div",6),k.Vb(9,"ejs-grid",7),k.fc("rowSelected",function(e){return t.rowSelected(e)})("created",function(){return t.created()}),k.Vb(10,"e-columns"),k.Qb(11,"e-column",8),k.kc(12,"translate"),k.Qb(13,"e-column",9),k.kc(14,"translate"),k.Vb(15,"e-column",10),k.kc(16,"translate"),k.Jc(17,Le,2,4,"ng-template",null,11,k.Kc),k.Jc(19,je,1,1,"ng-template",null,12,k.Kc),k.Ub(),k.Vb(21,"e-column",13),k.kc(22,"translate"),k.Jc(23,Ne,1,1,"ng-template",null,12,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Jc(25,We,47,14,"ng-template",null,14,k.Kc),k.Jc(27,nt,35,14,"ng-template",null,15,k.Kc)),2&e&&(k.Cb(6),k.Nc(" ",k.lc(7,8,"Building List")," "),k.Cb(3),k.pc("dataSource",t.buildings)("editSettings",t.editSettings)("toolbar",t.toolbar),k.Cb(2),k.qc("headerText",k.lc(12,10,"Level")),k.Cb(2),k.qc("headerText",k.lc(14,12,"Building Name")),k.Cb(2),k.qc("headerText",k.lc(16,14,"Lunch Time")),k.Cb(6),k.qc("headerText",k.lc(22,16,"Option")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c,o.f,o.i,l.n,Ee.a,E.k],pipes:[B.c,l.e],styles:[".e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000;font-weight:500;font-size:10px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}"]}),at);r("KnEv");var ct=["grid"],lt=["multiSelectBuildings"],ot=["multiSelectLines"];function st(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function ut(e,t){1&e&&k.Lc(0," # ")}function dt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-multiselect",14,15),k.fc("close",function(){k.Ec(i);var e=t.$implicit;return k.jc().closeBuilding(e.index)})("removing",function(e){k.Ec(i);var n=t.$implicit;return k.jc().removingBuilding(e,n)})("select",function(e){k.Ec(i);var n=t.$implicit;return k.jc().onSelectBuilding(e,n)})("ngModelChange",function(e){return t.$implicit.buildings=e}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",n.buildingsData)("ngModel",n.buildings)("mode",a.mode)("fields",a.fieldsBuilding)("showDropDownIcon",!0)}}function gt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-multiselect",16,17),k.fc("close",function(){k.Ec(i);var e=t.$implicit;return k.jc().closeLine(e.index)})("removing",function(e){k.Ec(i);var n=t.$implicit;return k.jc().removing(e,n)})("select",function(e){k.Ec(i);var n=t.$implicit;return k.jc().onSelect(e,n)})("ngModelChange",function(e){return t.$implicit.lines=e}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",n.linesData)("ngModel",n.lines)("selectAllText",a.selectAllText)("mode",a.mode)("fields",a.fieldsLine)("showDropDownIcon",!0)}}var pt,bt=((pt=function(){function e(t,i,n,a){s(this,e),this.accountService=t,this.modalService=i,this.userService=n,this.alertify=a,this.userData=[],this.fieldsBuilding={text:"name",value:"id"},this.fieldsLine={text:"name",value:"id"},this.fieldsRole={text:"name",value:"name"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.password="",this.toolbarOptions=["Search"],this.toolbar=["Add","Edit","Delete","Update","Cancel","ExcelExport","Search"],this.passwordFake="aRlG8BBHDYjrood3UqjzRl3FubHFI99nEPCahGtZl9jvkexwlJ",this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.locale=localStorage.getItem("lang"),this.fields={text:"name",value:"id"},this.lineList=[],this.lineRemovingList=[],this.buildingList=[],this.buildingRemovingList=[],this.checkAll=[],this.selectAllText=""}return d(e,[{key:"ngOnInit",value:function(){this.selectAllText="Select All",this.mode="CheckBox",this.roleID=0,this.buildingID=0,this.getBuildings(),this.getAllUserInfo()}},{key:"rowSelected",value:function(e){}},{key:"onChangeBuilding",value:function(e,t){this.userID=t.id,this.buildingID=e.itemData.id}},{key:"onChangeRole",value:function(e,t){this.userID=t.id,this.roleID=e.itemData.id}},{key:"getBuildings",value:function(){var e=this;this.accountService.getBuildings().subscribe(function(t){e.buildingDatas=t||[];var i=e.buildingDatas.filter(function(e){return 2===e.level});e.buildingDatas=i},function(t){e.alertify.error(t)})}},{key:"getLineByUserID",value:function(){var e=this;this.accountService.getLineByUserID(this.userID,this.buildingID).subscribe(function(t){e.lines=t.data},function(t){e.alertify.error(t)})}},{key:"getBuildingByUserID",value:function(){var e=this;this.accountService.getBuildingByUserID(this.userID).subscribe(function(t){e.buildings=t.data},function(t){e.alertify.error(t)})}},{key:"mapBuildingUser",value:function(e,t){var i=this;void 0!==e&&void 0!==t&&this.accountService.mapBuildingUser(e,t).subscribe(function(e){e.status?(i.alertify.success(e.message),i.getAllUserInfo(),i.buildingID=0):i.alertify.success(e.message)})}},{key:"getAllUserInfo",value:function(){var e=this;this.userService.getAllUserInfoRoles().subscribe(function(t){e.userData=t})}},{key:"removing",value:function(e,t){var i=this;this.lineList=this.lineList.filter(function(t){return t!==e.itemData.id}),this.lineRemovingList.push(e.itemData.id),this.userID=t.id,this.accountService.removeLineUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(function(e){i.alertify.success("Successfully! Th\xe0nh c\xf4ng!")},function(e){return i.alertify.error(e)})}},{key:"onSelect",value:function(e,t){var i=this;this.lineList.push(e.itemData.id),this.userID=t.id,this.accountService.mapLineUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(function(e){i.alertify.success(e.message)})}},{key:"removingBuilding",value:function(e,t){var i=this;this.buildingList=this.buildingList.filter(function(t){return t!==e.itemData.id}),this.userID=t.id,this.buildingRemovingList.push(e.itemData.id),this.accountService.removeMultipleBuildingUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(function(e){i.alertify.success("Successfully! Th\xe0nh c\xf4ng!")},function(e){return i.alertify.error(e)})}},{key:"onSelectBuilding",value:function(e,t){var i=this;this.buildingList.push(e.itemData.id),this.userID=t.id,this.accountService.mapMultipleBuildingUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(function(e){i.alertify.success(e.message)})}},{key:"closeLine",value:function(e){this.getAllUserInfo()}},{key:"closeBuilding",value:function(e){this.getAllUserInfo()}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}},{key:"selectedAll",value:function(e){console.log(e)}}]),e}()).\u0275fac=function(e){return new(e||pt)(k.Pb(x),k.Pb(I.b),k.Pb(U.a),k.Pb(w.a))},pt.\u0275cmp=k.Jb({type:pt,selectors:[["app-decentralization"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(ct,1),k.Rc(lt,1),k.Rc(ot,1)),2&e&&(k.Ac(i=k.gc())&&(t.grid=i.first),k.Ac(i=k.gc())&&(t.multiSelectBuildings=i),k.Ac(i=k.gc())&&(t.multiSelectLines=i))},features:[k.Bb([C.n,C.f,C.k,V.a])],decls:26,vars:22,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","pageSettings","allowExcelExport","rowSelected"],["grid",""],["field","ID","textAlign","Center","width","80","isPrimaryKey","true","headerText","ID"],["template",""],["editTemplate",""],["field","username","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","employeeID","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","role","textAlign","Center","isPrimaryKey","true",3,"headerText"],["field","building","textAlign","Center",3,"headerText"],["field","line","textAlign","Center",3,"headerText"],["placeholder","Select building",3,"dataSource","ngModel","mode","fields","showDropDownIcon","close","removing","select","ngModelChange"],["multiSelectBuildings",""],["selectedAll","selectedAll($event)","placeholder","Select line",3,"dataSource","ngModel","selectAllText","mode","fields","showDropDownIcon","close","removing","select","ngModelChange"],["multiSelectLines",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",3),k.Vb(4,"ejs-grid",4,5),k.fc("rowSelected",function(e){return t.rowSelected(e)}),k.Vb(6,"e-columns"),k.Vb(7,"e-column",6),k.Jc(8,st,1,1,"ng-template",null,7,k.Kc),k.Jc(10,ut,1,0,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(12,"e-column",9),k.kc(13,"translate"),k.Qb(14,"e-column",10),k.kc(15,"translate"),k.Qb(16,"e-column",11),k.kc(17,"translate"),k.Vb(18,"e-column",12),k.kc(19,"translate"),k.Jc(20,dt,2,5,"ng-template",null,7,k.Kc),k.Ub(),k.Vb(22,"e-column",13),k.kc(23,"translate"),k.Jc(24,gt,2,6,"ng-template",null,7,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(4),k.pc("dataSource",t.userData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",t.locale)("pageSettings",t.pageSettings)("allowExcelExport",!0),k.Cb(8),k.qc("headerText",k.lc(13,12,"Username")),k.Cb(2),k.qc("headerText",k.lc(15,14,"Account")),k.Cb(2),k.qc("headerText",k.lc(17,16,"Role")),k.Cb(2),k.qc("headerText",k.lc(19,18,"Building")),k.Cb(4),k.qc("headerText",k.lc(23,20,"Line")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.f,o.f,o.i],pipes:[B.c],styles:[""]}),pt);new m.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});var ht,ft=((ht=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.messageSource=new h.a(0),this.currentMessage=this.messageSource.asObservable()}return d(e,[{key:"changeMessage",value:function(e){this.messageSource.next(e)}},{key:"delete",value:function(e){return this.http.delete("".concat(this.baseUrl,"GlueType/Delete/").concat(e))}},{key:"update",value:function(e){return this.http.put("".concat(this.baseUrl,"GlueType/Update"),e)}},{key:"getGlueTypesAsTreeView",value:function(){return this.http.get("".concat(this.baseUrl,"GlueType/GetAllAsTreeView"))}},{key:"getAll",value:function(){return this.http.get("".concat(this.baseUrl,"GlueType/GetAll"))}},{key:"getAllByParentID",value:function(){return this.http.get("".concat(this.baseUrl,"GlueType/GetAllByParentID"))}},{key:"getAllByLevel",value:function(){return this.http.get("".concat(this.baseUrl,"GlueType/GetAllByLevel"))}},{key:"createParent",value:function(e){return this.http.post("".concat(this.baseUrl,"GlueType/createParent"),e)}},{key:"createChild",value:function(e){return this.http.post("".concat(this.baseUrl,"GlueType/createChild"),e)}}]),e}()).\u0275fac=function(e){return new(e||ht)(k.cc(m.b))},ht.\u0275prov=k.Lb({token:ht,factory:ht.\u0275fac,providedIn:"root"}),ht);function mt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",7),k.Vb(1,"label"),k.Lc(2,"Method: "),k.Ub(),k.Vb(3,"div",8),k.Vb(4,"ejs-dropdownlist",16),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeMethod(e)}),k.Ub(),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(4),k.pc("dataSource",n.methods)("fields",n.fields)("value",n.glueType.method)("allowFiltering",!0)}}var vt,yt=((vt=function(){function e(t,i,n){s(this,e),this.activeModal=t,this.glueTypeService=i,this.alertify=n,this.fields={text:"text",value:"value"},this.methods=[{text:"Stir",value:"Stir"},{text:"Shaking",value:"Shaking"}]}return d(e,[{key:"ngOnInit",value:function(){}},{key:"validation",value:function(){return""!==this.glueType.title||(this.alertify.warning("Please enter glue type name!",!0),!1)}},{key:"onChangeMethod",value:function(e){this.method=e.itemData.value}},{key:"createGlueType",value:function(){var e=this;this.validation()&&(this.glueType.parentID>0?(this.glueType.method=this.method,this.glueTypeService.createChild(this.glueType).subscribe(function(t){e.alertify.success("The glue type has been created!!"),e.activeModal.dismiss(),e.glueTypeService.changeMessage(200)})):this.glueTypeService.createParent(this.glueType).subscribe(function(t){e.glueTypeService.changeMessage(200),e.alertify.success("The glue type has been created!!"),e.activeModal.dismiss()}))}}]),e}()).\u0275fac=function(e){return new(e||vt)(k.Pb(I.a),k.Pb(ft),k.Pb(w.a))},vt.\u0275cmp=k.Jb({type:vt,selectors:[["app-glue-type-modal"]],inputs:{title:"title",glueType:"glueType"},decls:30,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["name","glueType","type","text","placeholder","Title",1,"form-control","Name",3,"ngModel","ngModelChange"],["name","glueType","type","text","placeholder","Minutes",1,"form-control","Name",3,"ngModel","ngModelChange"],["name","glueType","type","text","placeholder","RPM",1,"form-control","Name",3,"ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select method",3,"dataSource","fields","value","allowFiltering","change"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"h4",1),k.Qb(2,"i",2),k.Lc(3),k.Ub(),k.Vb(4,"button",3),k.fc("click",function(){return t.activeModal.dismiss("Cross click")}),k.Vb(5,"span",4),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",5),k.Vb(8,"div",6),k.Vb(9,"div",7),k.Vb(10,"div",8),k.Vb(11,"label"),k.Lc(12,"Glue Type Name: "),k.Ub(),k.Vb(13,"input",9),k.fc("ngModelChange",function(e){return t.glueType.title=e}),k.Ub(),k.Ub(),k.Ub(),k.Vb(14,"div",7),k.Vb(15,"div",8),k.Vb(16,"label"),k.Lc(17,"Minutes: "),k.Ub(),k.Vb(18,"input",10),k.fc("ngModelChange",function(e){return t.glueType.minutes=e}),k.Ub(),k.Ub(),k.Ub(),k.Vb(19,"div",7),k.Vb(20,"div",8),k.Vb(21,"label"),k.Lc(22,"RPM/Cycle: "),k.Ub(),k.Vb(23,"input",11),k.fc("ngModelChange",function(e){return t.glueType.rpm=e}),k.Ub(),k.Ub(),k.Ub(),k.Jc(24,mt,5,4,"div",12),k.Ub(),k.Ub(),k.Vb(25,"div",13),k.Vb(26,"button",14),k.fc("click",function(){return t.activeModal.close("Close click")}),k.Lc(27,"Close"),k.Ub(),k.Vb(28,"button",15),k.fc("click",function(){return t.createGlueType()}),k.Lc(29,"Save"),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.Nc(" ",t.title," "),k.Cb(10),k.pc("ngModel",t.glueType.title),k.Cb(5),k.pc("ngModel",t.glueType.minutes),k.Cb(5),k.pc("ngModel",t.glueType.rpm),k.Cb(1),k.pc("ngIf",0!==t.glueType.parentID))},directives:[o.a,o.f,o.i,l.n,V.c],styles:[""]}),vt),kt=["grid"];function St(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function xt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",10,11),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeKindType(e)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.kindTypeData)("value",null==n.kindType?null:n.kindType.name)("fields",a.fieldsKindType)("allowFiltering",!0)}}var wt,Ct=((wt=function(e){a(i,e);var t=c(i);function i(e,n,a){var r;return s(this,i),(r=t.call(this)).kindService=e,r.alertify=n,r.route=a,r.data=[],r.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},r.fieldsKindType={text:"name",value:"name"},r.filterSettings={type:"Excel"},r}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.kind={id:0,name:"",kindTypeID:null},this.getAllKind(),this.getAllKindType()}},{key:"getAllKind",value:function(){var e=this;this.kindService.getAllKind().subscribe(function(t){e.data=t})}},{key:"getAllKindType",value:function(){var e=this;this.kindService.getAllKindType().subscribe(function(t){e.kindTypeData=t})}},{key:"create",value:function(){var e=this;this.kindService.create(this.kind).subscribe(function(){e.alertify.success("Add Kind Successfully"),e.getAllKind(),e.kind={id:0,name:"",kindTypeID:null},e.kindTypeID=0})}},{key:"update",value:function(){var e=this;this.kindService.update(this.kind).subscribe(function(){e.alertify.success("Add Kind Successfully"),e.getAllKind(),e.kind={id:0,name:"",kindTypeID:null},e.kindTypeID=0})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Kind",'Are you sure you want to delete this Kind "'+e+'" ?',function(){t.kindService.delete(e).subscribe(function(){t.getAllKind(),t.alertify.success("The kind has been deleted")},function(e){t.alertify.error("Failed to delete the kind")})})}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){this.grid.toolbarModule.getToolbar(),"beginEdit"===e.requestType&&(this.kindTypeID=e.rowData.kindTypeID),"save"===e.requestType&&("add"===e.action&&(this.kind.id=0,this.kind.name=e.data.name,this.kind.kindTypeID=this.kindTypeID,this.create()),"edit"===e.action&&(this.kind.id=e.data.id,this.kind.name=e.data.name,this.kind.kindTypeID=this.kindTypeID,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}},{key:"onChangeKindType",value:function(e){this.kindTypeID=e.itemData.id}}]),i}(b.a)).\u0275fac=function(e){return new(e||wt)(k.Pb(ee.a),k.Pb(w.a),k.Pb(g.a))},wt.\u0275cmp=k.Jb({type:wt,selectors:[["app-kind"]],viewQuery:function(e,t){var i;1&e&&k.Rc(kt,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:15,vars:13,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"],["field","kindType.name","width","200","textAlign","Center",3,"headerText"],["editTemplate",""],[3,"dataSource","value","fields","allowFiltering","change"],["kindTypeDropdownlist",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,St,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Qb(9,"e-column",7),k.kc(10,"translate"),k.Vb(11,"e-column",8),k.kc(12,"translate"),k.Jc(13,xt,2,4,"ng-template",null,9,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),k.Cb(6),k.qc("headerText",k.lc(10,9,"Name")),k.Cb(2),k.qc("headerText",k.lc(12,11,"Type")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c],pipes:[B.c],styles:[""]}),wt),Tt=["grid"];function Ut(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function Dt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",10),k.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(e){return k.Ec(i),k.jc().onChangeStartTime(e)}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function It(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",10),k.fc("ngModelChange",function(e){return t.$implicit.endTime=e})("valueChange",function(e){return k.Ec(i),k.jc().onChangeEndTime(e)}),k.Ub()}2&e&&k.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}var Pt,Mt,Vt=((Mt=function(e){a(i,e);var t=c(i);function i(e,n,a){var r;return s(this,i),(r=t.call(this)).lunchTimeService=e,r.alertify=n,r.route=a,r.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},r.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],r.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},r.filterSettings={type:"Excel"},r}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.lunchTime={},this.getAllLunchTime()}},{key:"getAllLunchTime",value:function(){var e=this;this.lunchTimeService.getAllLunchTime().subscribe(function(t){e.data=t})}},{key:"create",value:function(){var e=this;this.lunchTimeService.create(this.lunchTime).subscribe(function(){e.alertify.success("Add LunchTime Successfully"),e.getAllLunchTime(),e.lunchTime={}})}},{key:"update",value:function(){var e=this;this.lunchTimeService.update(this.lunchTime).subscribe(function(){e.alertify.success("Add LunchTime Successfully"),e.getAllLunchTime(),e.lunchTime={}})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete LunchTime",'Are you sure you want to delete this LunchTime "'+e+'" ?',function(){t.lunchTimeService.delete(e).subscribe(function(){t.getAllLunchTime(),t.alertify.success("The lunchTime has been deleted")},function(e){t.alertify.error("Failed to delete the lunchTime")})})}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"onChangeStartTime",value:function(e){this.startTime=e}},{key:"onChangeEndTime",value:function(e){this.endTime=e}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("add"===e.action&&(this.lunchTime.startTime=this.startTime,this.lunchTime.endTime=this.endTime,this.create()),"edit"===e.action&&(this.lunchTime=e.data,this.lunchTime.startTime=this.startTime,this.lunchTime.endTime=this.endTime,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"edit"===e.requestType&&(e.form.elements.namedItem("startTime").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}}]),i}(b.a)).\u0275fac=function(e){return new(e||Mt)(k.Pb(Ae),k.Pb(w.a),k.Pb(g.a))},Mt.\u0275cmp=k.Jb({type:Mt,selectors:[["app-lunch-time"]],viewQuery:function(e,t){var i;1&e&&k.Rc(Tt,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:15,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","startTime","type","date","format","HH:mm","headerText","Start Time","width","200","textAlign","Center"],["editTemplate",""],["field","endTime","type","date","format","HH:mm","headerText","End Time","width","200","textAlign","Center"],[2,"width","100%",3,"ngModel","format","ngModelChange","valueChange"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,Ut,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Vb(9,"e-column",7),k.Jc(10,Dt,1,2,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(12,"e-column",9),k.Jc(13,It,1,2,"ng-template",null,8,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,Ee.a,o.f,o.i],styles:[""]}),Mt),At=((Pt=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.mailingSource=new h.a(0),this.currentModalName=this.mailingSource.asObservable()}return d(e,[{key:"getAllMailing",value:function(){return this.http.get(this.baseUrl+"Mailing/GetAll",{})}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"Mailing/Create",e)}},{key:"createRange",value:function(e){return this.http.post(this.baseUrl+"Mailing/createRange",e)}},{key:"updateRange",value:function(e){return this.http.put(this.baseUrl+"Mailing/updateRange",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"Mailing/Update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"Mailing/Delete/"+e)}},{key:"deleteRange",value:function(e){return this.http.post(this.baseUrl+"Mailing/DeleteRange/",e)}}]),e}()).\u0275fac=function(e){return new(e||Pt)(k.cc(m.b))},Pt.\u0275prov=k.Lb({token:Pt,factory:Pt.\u0275fac,providedIn:"root"}),Pt),Et=r("10VE"),Bt=["grid"];function Lt(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function jt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",12),k.fc("change",function(e){return k.Ec(i),k.jc().onReport(e)}),k.Ub()}if(2&e){var n=k.jc();k.pc("dataSource",n.reportOption)("value",n.reportItem)}}function Ot(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",13),k.fc("change",function(e){return k.Ec(i),k.jc().onFrequency(e)}),k.Ub()}if(2&e){var n=k.jc();k.pc("dataSource",n.frequencyOption)("value",n.frequencyItem)}}function Nt(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.timeSend,"HH:mm")," ")}function Rt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"kendo-timepicker",16),k.fc("valueChange",function(e){return k.Ec(i),k.jc(2).onChangeTimeSend(e)}),k.Ub()}if(2&e){var n=k.jc().$implicit;k.pc("value",n.timeSend)("format","hh:mm a")}}function qt(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-datetimepicker",17),k.fc("change",function(e){return k.Ec(i),k.jc(2).onChangeDatetimeSend(e)}),k.Ub()}if(2&e){var n=k.jc().$implicit;k.pc("value",n.timeSend)}}function Kt(e,t){if(1&e&&(k.Jc(0,Rt,1,2,"kendo-timepicker",14),k.Jc(1,qt,1,1,"ejs-datetimepicker",15)),2&e){var i=k.jc();k.pc("ngIf","Daily"===i.frequencyItem),k.Cb(1),k.pc("ngIf","Daily"!==i.frequencyItem)}}function Jt(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit;k.Nc(" ",null==i||null==i.userNames?null:i.userNames.join(", ")," ")}}function Ft(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-multiselect",18),k.fc("removing",function(e){return k.Ec(i),k.jc().removing(e)})("select",function(e){return k.Ec(i),k.jc().onSelectUsername(e)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.userData)("mode",a.box)("value",n.userIDList)("fields",a.fields)}}var Gt,$t=((Gt=function(){function e(t,i,n,a){s(this,e),this.mailingService=t,this.alertify=i,this.datePipe=n,this.buildingUserService=a,this.data=[],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"},this.frequencyOption=["Daily","Weekly","Monthly"],this.frequencyItem="",this.reportOption=["Done List","Cost","Achievement Rate"],this.reportItem="",this.fields={text:"username",value:"id"},this.box="Box",this.timeSend=new Date,this.datetimeSend=new Date,this.userIDList=[],this.userList=[]}return d(e,[{key:"ngOnInit",value:function(){this.mailing={id:0,name:""},this.getAllMailing()}},{key:"getAllUsers",value:function(){var e=this;this.buildingUserService.getAllUsers(1,1e3).subscribe(function(t){var i=t.result.map(function(e){return{id:e.id,username:e.username,email:e.email}});e.userData=i})}},{key:"getAllMailing",value:function(){var e=this;this.mailingService.getAllMailing().subscribe(function(t){e.data=t.map(function(e){return{id:e.id,email:e.email,userID:e.userID,userName:e.userName,frequency:e.frequency,userNames:e.userNames,report:e.report,userIDList:e.userIDList,userList:e.userList,pathName:e.pathName,timeSend:new Date(e.timeSend)}}),e.getAllUsers()})}},{key:"create",value:function(){var e=this;this.mailingService.create(this.mailing).subscribe(function(){e.alertify.success("Add mailing Successfully"),e.getAllMailing(),e.mailing.name=""})}},{key:"onReport",value:function(e){this.reportItem=e.value}},{key:"onFrequency",value:function(e){this.frequencyItem=e.value}},{key:"onChangeTimeSend",value:function(e){this.timeSend=e}},{key:"onChangeDatetimeSend",value:function(e){this.datetimeSend=e.value}},{key:"removing",value:function(e){var t=this.userIDList.filter(function(t){return t!==e.itemData.id});this.userIDList=t,this.userList=this.userList.filter(function(t){return t.id!==e.itemData.id})}},{key:"onSelectUsername",value:function(e){var t=e.itemData;this.userIDList.push(t.id),this.userList.push({mailingID:0,id:t.id,email:t.email})}},{key:"update",value:function(){var e=this;this.mailingService.update(this.mailing).subscribe(function(){e.alertify.success("Add mailing Successfully"),e.getAllMailing(),e.mailing.name=""})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete mailing","Are you sure you want to delete this mailings ?",function(){t.mailingService.deleteRange(e).subscribe(function(){t.getAllMailing(),t.alertify.success("The mailing has been deleted")},function(e){t.alertify.error("Failed to delete the mailing")})})}},{key:"createRange",value:function(e){var t=this;this.mailingService.createRange(e).subscribe(function(){t.alertify.success("Add mailing Successfully"),t.getAllMailing(),t.clearForm()},function(e){t.alertify.error(e),t.getAllMailing()})}},{key:"clearForm",value:function(){this.reportItem="",this.frequencyItem="",this.timeSend=new Date,this.datetimeSend=new Date,this.mailing={}}},{key:"updateRange",value:function(e){var t=this;this.mailingService.updateRange(e).subscribe(function(){t.alertify.success("Add mailing Successfully"),t.getAllMailing(),t.clearForm()},function(e){t.alertify.error(e),t.getAllMailing()})}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){if("beginEdit"===e.requestType){var i=e.rowData;this.userIDList=i.userIDList,this.reportItem=i.report,this.frequencyItem=i.frequency,this.timeSend=i.timeSend,this.datetimeSend=i.timeSend,this.userIDList=i.userIDList,this.userList=i.userList||[],"Daily"===i.frequency?this.timeSend=i.timeSend:this.datetimeSend=i.timeSend}if("save"===e.requestType){if("add"===e.action){0===this.userList.length&&(this.alertify.warning("Please select recipients",!0),e.cancel=!0);var n,a=[],r=t(this.userList);try{for(r.s();!(n=r.n()).done;){var c=n.value,l={report:this.reportItem,frequency:this.frequencyItem,timeSend:this.datePipe.transform("Daily"===this.frequencyItem||"Monthly"===this.frequencyItem?this.timeSend:this.datetimeSend,"MM-dd-yyyy HH:mm"),userID:c.id,id:c.mailingID,email:c.email};a.push(l)}}catch(y){r.e(y)}finally{r.f()}this.createRange(a)}if("edit"===e.action){var o,s=e.data,u=[],d=t(this.userList);try{for(d.s();!(o=d.n()).done;){var g=o.value,p={report:this.reportItem,frequency:this.frequencyItem,timeSend:this.datePipe.transform("Daily"===this.frequencyItem?this.timeSend:this.datetimeSend,"MM-dd-yyyy HH:mm"),userID:g.id,id:g.mailingID,email:g.email,pathName:s.pathName};u.push(p)}}catch(y){d.e(y)}finally{d.f()}this.updateRange(u)}}if("delete"===e.requestType){var b,h=e.data[0],f=[],m=t(h.userList);try{for(m.s();!(b=m.n()).done;){var v=b.value;f.push({report:h.reportItem,frequency:h.frequencyItem,timeSend:h.timeSend,userID:v.id,id:v.mailingID,email:v.email,pathName:h.pathName})}}catch(y){m.e(y)}finally{m.f()}this.delete(f)}}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),e}()).\u0275fac=function(e){return new(e||Gt)(k.Pb(At),k.Pb(w.a),k.Pb(l.e),k.Pb(Ie.a))},Gt.\u0275cmp=k.Jb({type:Gt,selectors:[["app-mailing"]],viewQuery:function(e,t){var i;1&e&&k.Rc(Bt,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.Bb([l.e])],decls:25,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["id","grid","gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","50","textAlign","Center","isPrimaryKey","true"],["template",""],["field","report","headerText","Report","isPrimaryKey","true","width","100","textAlign","Center"],["editTemplate",""],["field","frequency","headerText","Frequency","isPrimaryKey","true","width","100","textAlign","Center"],["field","timeSend","headerText","Time Send","width","100","textAlign","Center"],["field","userNames","headerText","Recipient","textAlign","Left"],["id","reportOption",3,"dataSource","value","change"],["id","frequencyOption",3,"dataSource","value","change"],["style","width: 150px;",3,"value","format","valueChange",4,"ngIf"],["placeholder","Enter date time",3,"value","change",4,"ngIf"],[2,"width","150px",3,"value","format","valueChange"],["placeholder","Enter date time",3,"value","change"],["placeholder","Select Username",3,"dataSource","mode","value","fields","removing","select"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,Lt,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Vb(9,"e-column",7),k.Jc(10,jt,1,2,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(12,"e-column",9),k.Jc(13,Ot,1,2,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(15,"e-column",10),k.Jc(16,Nt,2,4,"ng-template",null,6,k.Kc),k.Jc(18,Kt,2,2,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(20,"e-column",11),k.Jc(21,Jt,1,1,"ng-template",null,6,k.Kc),k.Jc(23,Ft,1,4,"ng-template",null,8,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c,l.n,Ee.a,Et.c,V.f],pipes:[l.e],styles:[""]}),Gt),zt=r("6U7I"),Qt=["grid"];function Ht(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}var Yt,Wt=((Yt=function(e){a(i,e);var t=c(i);function i(e,n,a){var r;return s(this,i),(r=t.call(this)).materialService=e,r.alertify=n,r.route=a,r.data=[],r.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},r.filterSettings={type:"Excel"},r}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.material={id:0,name:""},this.getAllMaterial()}},{key:"getAllMaterial",value:function(){var e=this;this.materialService.getAllMaterial().subscribe(function(t){e.data=t})}},{key:"create",value:function(){var e=this;this.materialService.create(this.material).subscribe(function(){e.alertify.success("Add Material Successfully"),e.getAllMaterial(),e.material.name=""})}},{key:"update",value:function(){var e=this;this.materialService.update(this.material).subscribe(function(){e.alertify.success("Add Material Successfully"),e.getAllMaterial(),e.material.name=""})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Material",'Are you sure you want to delete this Material "'+e+'" ?',function(){t.materialService.delete(e).subscribe(function(){t.getAllMaterial(),t.alertify.success("The material has been deleted")},function(e){t.alertify.error("Failed to delete the material")})})}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("add"===e.action&&(this.material.id=0,this.material.name=e.data.name,this.create()),"edit"===e.action&&(this.material.id=e.data.id,this.material.name=e.data.name,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),i}(b.a)).\u0275fac=function(e){return new(e||Yt)(k.Pb(zt.a),k.Pb(w.a),k.Pb(g.a))},Yt.\u0275cmp=k.Jb({type:Yt,selectors:[["app-material"]],viewQuery:function(e,t){var i;1&e&&k.Rc(Qt,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","id","grid","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,Ht,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Qb(9,"e-column",7),k.kc(10,"translate"),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),k.Cb(6),k.qc("headerText",k.lc(10,8,"Name")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a],pipes:[B.c],styles:[""]}),Yt),_t=r("MBJp"),Xt=["grid"];function Zt(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}var ei,ti=((ei=function(e){a(i,e);var t=c(i);function i(e,n,a){var r;return s(this,i),(r=t.call(this)).partService=e,r.alertify=n,r.route=a,r.data=[],r.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},r.filterSettings={type:"Excel"},r}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.part={id:0,name:""},this.getAllPart()}},{key:"getAllPart",value:function(){var e=this;this.partService.getAllPart().subscribe(function(t){e.data=t})}},{key:"create",value:function(){var e=this;this.partService.create(this.part).subscribe(function(){e.alertify.success("Add Part Successfully"),e.getAllPart(),e.part.name=""})}},{key:"update",value:function(){var e=this;this.partService.update(this.part).subscribe(function(){e.alertify.success("Add Part Successfully"),e.getAllPart(),e.part.name=""})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Part",'Are you sure you want to delete this Part "'+e+'" ?',function(){t.partService.delete(e).subscribe(function(){t.getAllPart(),t.alertify.success("The part has been deleted")},function(e){t.alertify.error("Failed to delete the part")})})}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("add"===e.action&&(this.part.id=0,this.part.name=e.data.name,this.create()),"edit"===e.action&&(this.part.id=e.data.id,this.part.name=e.data.name,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),i}(b.a)).\u0275fac=function(e){return new(e||ei)(k.Pb(_t.a),k.Pb(w.a),k.Pb(g.a))},ei.\u0275cmp=k.Jb({type:ei,selectors:[["app-part"]],viewQuery:function(e,t){var i;1&e&&k.Rc(Xt,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","id","grid","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,Zt,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Qb(9,"e-column",7),k.kc(10,"translate"),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),k.Cb(6),k.qc("headerText",k.lc(10,8,"Name")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a],pipes:[B.c],styles:[""]}),ei),ii=["gridBuilding"],ni=["gridSetting"];function ai(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function ri(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function ci(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",18),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc().onChangeMachine(e,n)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.machines)("value",n.machineType)("allowFiltering",!0)}}function li(e,t){1&e&&k.Lc(0),2&e&&k.Nc(" ",t.$implicit.machineType," ")}function oi(e,t){if(1&e&&k.Lc(0),2&e){var i=k.jc();k.Nc(" ",i.getUnitItem(i.unit)," ")}}function si(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.getUnitItem(i.unit)," ")}}var ui,di=((ui=function(){function e(t,i,n){s(this,e),this.buildingService=t,this.alertify=i,this.settingService=n,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"text",value:"value"},this.WeighingScale30KG=0,this.WeighingScale3KG=1,this.machines=["Weighing Scale 30KG","Weighing Scale 3KG"]}return d(e,[{key:"ngOnInit",value:function(){this.units=[{value:"k",text:"Kilogram"},{value:"g",text:"Gram"}],this.filterSettings={type:"Excel"},this.toolbar=["Excel Export","Search"],this.loadData()}},{key:"getBuildingForSetting",value:function(){return this.buildingService.getBuildingsForSetting().toPromise()}},{key:"getSettingByBuilding",value:function(e){return this.settingService.getMachineByBuilding(e).toPromise()}},{key:"onChange",value:function(e){}},{key:"onChangeMachine",value:function(e,t){this.machineType=e.value,this.unit=this.machineType===this.machines[this.WeighingScale30KG]?"k":this.machineType===this.machines[this.WeighingScale3KG]?"g":""}},{key:"editSetting",value:function(e){return this.settingService.updateMachine(e).toPromise()}},{key:"createSetting",value:function(e){return this.settingService.addMachine(e).toPromise()}},{key:"deleteSetting",value:function(e){return this.settingService.deleteMachine(e).toPromise()}},{key:"loadData",value:function(){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.getBuildingForSetting();case 3:this.buildings=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),this.alertify.error(e.t0+"");case 9:case"end":return e.stop()}},e,this,[[0,6]])}))}},{key:"edit",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var i;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={id:e.id,machineType:this.machineType,unit:this.unit,buildingID:this.buildingID,machineID:"k"===this.unit?2:1},t.prev=1,t.next=4,this.editSetting(i);case 4:return this.alertify.success("Success"),t.next=7,this.getSettingByBuilding(this.buildingID);case 7:this.settings=t.sent,this.unit="",this.machineType="",t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),this.alertify.error(t.t0+"");case 15:case"end":return t.stop()}},t,this,[[1,12]])}))}},{key:"add",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={id:0,unit:this.unit,machineType:this.machineType,buildingID:this.buildingID,machineID:"k"===this.unit?2:1},e.prev=1,e.next=4,this.createSetting(t);case 4:return this.alertify.success("Success"),e.next=7,this.getSettingByBuilding(this.buildingID);case 7:this.settings=e.sent,this.unit="",this.machineType="",e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),this.alertify.error(e.t0+"");case 15:case"end":return e.stop()}},e,this,[[1,12]])}))}},{key:"delete",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.deleteSetting(e);case 3:return this.alertify.success("Success"),t.next=6,this.getSettingByBuilding(this.buildingID);case 6:this.settings=t.sent,t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),this.alertify.error(t.t0+"");case 12:case"end":return t.stop()}},t,this,[[0,9]])}))}},{key:"actionCompleteSetting",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("#").disabled=!0)}},{key:"actionBeginSetting",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("beginEdit"===e.requestType&&(this.machineType=e.rowData.machineType),t.t0="save"===e.requestType,!t.t0){t.next=11;break}if(t.t1="add"===e.action,!t.t1){t.next=7;break}return t.next=7,this.add(e.data);case 7:if(t.t2="edit"===e.action,!t.t2){t.next=11;break}return t.next=11,this.edit(e.data);case 11:if(t.t3="delete"===e.requestType,!t.t3){t.next=15;break}return t.next=15,this.delete(e.data[0].id);case 15:case"end":return t.stop()}},t,this)}))}},{key:"rowSelectedBuilding",value:function(e){return Object(be.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=e.isInteracted,!t.t0){t.next=7;break}return this.toolbarOptions=["Add","Edit","Delete","Cancel","Excel Export","Search"],this.buildingID=e.data.id,t.next=6,this.getSettingByBuilding(this.buildingID);case 6:this.settings=t.sent;case 7:case"end":return t.stop()}},t,this)}))}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.gridSetting.excelExport()}}},{key:"toolbarClickBuilding",value:function(e){switch(e.item.text){case"Excel Export":this.gridBuilding.excelExport()}}},{key:"NO",value:function(e){return+e+1}},{key:"getUnitItem",value:function(e){var t;return(null===(t=this.units.filter(function(t){return t.value===e})[0])||void 0===t?void 0:t.text)||"N/A"}}]),e}()).\u0275fac=function(e){return new(e||ui)(k.Pb(X.a),k.Pb(w.a),k.Pb(he.a))},ui.\u0275cmp=k.Jb({type:ui,selectors:[["app-scaling-setting"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(ii,1),k.Rc(ni,1)),2&e&&(k.Ac(i=k.gc())&&(t.gridBuilding=i.first),k.Ac(i=k.gc())&&(t.gridSetting=i.first))},decls:33,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["gridLines","Both","allowFiltering","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","toolbar","rowSelected","toolbarClick"],["gridBuilding",""],["field","#","textAlign","Center","headerText","#","width","40"],["template",""],["field","name","textAlign","Center","headerText","Building","width","100"],[1,"col-md-8"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["gridSetting",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["field","machineType","textAlign","Center","headerText","Machine Type","width","130"],["editTemplate",""],["field","unit","textAlign","Center","headerText","Unit","width","100"],[1,"card-footer"],[3,"dataSource","value","allowFiltering","change"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"h2"),k.Lc(3),k.kc(4,"translate"),k.Ub(),k.Ub(),k.Vb(5,"div",2),k.Vb(6,"div",3),k.Vb(7,"div",4),k.Vb(8,"ejs-grid",5,6),k.fc("rowSelected",function(e){return t.rowSelectedBuilding(e)})("toolbarClick",function(e){return t.toolbarClickBuilding(e)}),k.Vb(10,"e-columns"),k.Vb(11,"e-column",7),k.Jc(12,ai,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(14,"e-column",9),k.Ub(),k.Ub(),k.Ub(),k.Vb(15,"div",10),k.Vb(16,"ejs-grid",11,12),k.fc("actionBegin",function(e){return t.actionBeginSetting(e)})("actionComplete",function(e){return t.actionCompleteSetting(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(18,"e-columns"),k.Vb(19,"e-column",13),k.Jc(20,ri,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(22,"e-column",14),k.Jc(23,ci,1,3,"ng-template",null,15,k.Kc),k.Jc(25,li,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(27,"e-column",16),k.Jc(28,oi,1,1,"ng-template",null,15,k.Kc),k.Jc(30,si,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Qb(32,"div",17),k.Ub()),2&e&&(k.Cb(3),k.Mc(k.lc(4,13,"Scaling")),k.Cb(5),k.pc("dataSource",t.buildings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbar),k.Cb(8),k.pc("dataSource",t.settings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("toolbar",t.toolbarOptions)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c],pipes:[B.c],styles:[""]}),ui);r("YW37"),new m.e({"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))});var gi,pi=((gi=function(){function e(t){s(this,e),this.http=t,this.baseUrl=v.a.apiUrlEC,this.ModalNameSource=new h.a(0),this.currentModalName=this.ModalNameSource.asObservable()}return d(e,[{key:"getAllSubpackageCapacity",value:function(){return this.http.get(this.baseUrl+"SubpackageCapacity/GetAll",{})}},{key:"create",value:function(e){return this.http.post(this.baseUrl+"SubpackageCapacity/Create",e)}},{key:"update",value:function(e){return this.http.put(this.baseUrl+"SubpackageCapacity/Update",e)}},{key:"delete",value:function(e){return this.http.delete(this.baseUrl+"SubpackageCapacity/Delete/"+e)}}]),e}()).\u0275fac=function(e){return new(e||gi)(k.cc(m.b))},gi.\u0275prov=k.Lb({token:gi,factory:gi.\u0275fac,providedIn:"root"}),gi),bi=["grid"];function hi(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}var fi,mi=((fi=function(){function e(t,i){s(this,e),this.subpackageCapacityService=t,this.alertify=i,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.toolbarOptions=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"}}return d(e,[{key:"ngOnInit",value:function(){this.subpackageCapacity={id:0,capacity:""},this.getAllSubpackageCapacity()}},{key:"getAllSubpackageCapacity",value:function(){var e=this;this.subpackageCapacityService.getAllSubpackageCapacity().subscribe(function(t){e.data=t})}},{key:"create",value:function(){var e=this;this.subpackageCapacityService.create(this.subpackageCapacity).subscribe(function(){e.alertify.success("Add SubpackageCapacity Successfully"),e.getAllSubpackageCapacity(),e.subpackageCapacity.name=""})}},{key:"update",value:function(){var e=this;this.subpackageCapacityService.update(this.subpackageCapacity).subscribe(function(){e.alertify.success("Add SubpackageCapacity Successfully"),e.getAllSubpackageCapacity(),e.subpackageCapacity.name=""})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete SubpackageCapacity",'Are you sure you want to delete this SubpackageCapacity "'+e+'" ?',function(){t.subpackageCapacityService.delete(e).subscribe(function(){t.getAllSubpackageCapacity(),t.alertify.success("The subpackageCapacity has been deleted")},function(e){t.alertify.error("Failed to delete the subpackageCapacity")})})}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("add"===e.action&&(this.subpackageCapacity.id=0,this.subpackageCapacity.capacity=e.data.capacity,this.create()),"edit"===e.action&&(this.subpackageCapacity.id=e.data.id,this.subpackageCapacity.capacity=e.data.capacity,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("capacity").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),e}()).\u0275fac=function(e){return new(e||fi)(k.Pb(pi),k.Pb(w.a))},fi.\u0275cmp=k.Jb({type:fi,selectors:[["app-subpackage-capacity"]],viewQuery:function(e,t){var i;1&e&&k.Rc(bi,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},decls:10,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","capacity","headerText","Capacity","width","200","textAlign","Center"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,hi,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Qb(9,"e-column",7),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a],styles:[""]}),fi),vi=r("vrRs"),yi=["grid"];function ki(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}var Si,xi=((Si=function(e){a(i,e);var t=c(i);function i(e,n,a,r){var c;return s(this,i),(c=t.call(this)).alertify=e,c.modalService=n,c.ingredientService=a,c.route=r,c.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:10},c.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],c.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},c.filterSettings={type:"Excel"},c.modalSup={id:0,name:""},c.textGlueLineName="Select ",c.supplier=[],c}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.getAllSupplier()}},{key:"getAllSupplier",value:function(){var e=this;this.ingredientService.getAllSupplier().subscribe(function(t){e.supplier=t})}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("edit"===e.action&&(this.modalSup.id=e.data.id||0,this.modalSup.name=e.data.name,this.update(this.modalSup)),"add"===e.action&&(e.data.name?(this.modalSup.id=0,this.modalSup.name=e.data.name,this.add(this.modalSup)):e.cancel=!0)),"delete"===e.requestType&&this.delete(e.data[0].id)}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"onDoubleClick",value:function(e){this.setFocus=e.column}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Supplier",'Are you sure you want to delete this Supplier "'+e+'" ?',function(){t.ingredientService.deleteSub(e).subscribe(function(){t.getAllSupplier(),t.alertify.success("Supplier has been deleted")},function(e){t.alertify.error("Failed to delete the supplier")})})}},{key:"update",value:function(e){var t=this;this.ingredientService.updateSub(e).subscribe(function(e){t.alertify.success("Updated successfully!"),t.getAllSupplier()})}},{key:"add",value:function(e){var t=this;this.ingredientService.createSub(e).subscribe(function(){t.alertify.success("Add supplier successfully"),t.getAllSupplier(),t.modalSup.name=""})}},{key:"save",value:function(){var e=this;this.ingredientService.createSub(this.modalSup).subscribe(function(){e.alertify.success("Add supplier successfully"),e.getAllSupplier(),e.modalSup.name=""})}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}]),i}(b.a)).\u0275fac=function(e){return new(e||Si)(k.Pb(w.a),k.Pb(I.b),k.Pb(vi.a),k.Pb(g.a))},Si.\u0275cmp=k.Jb({type:Si,selectors:[["app-suppiler"]],viewQuery:function(e,t){var i;1&e&&k.Rc(yi,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","onDoubleClick","actionComplete","toolbarClick"],["grid",""],["field","id","isPrimaryKey","true","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-grid",3,4),k.fc("actionBegin",function(e){return t.actionBegin(e)})("onDoubleClick",function(e){return t.onDoubleClick(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(5,"e-columns"),k.Vb(6,"e-column",5),k.Jc(7,ki,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Qb(9,"e-column",7),k.kc(10,"translate"),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("toolbar",t.toolbarOptions)("dataSource",t.supplier)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),k.Cb(6),k.qc("headerText",k.lc(10,8,"Supplier Name")))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a],pipes:[B.c],styles:[""]}),Si),wi=["treegrid"],Ci=["buildingModal"];function Ti(e,t){if(1&e){var i=k.Wb();k.Vb(0,"ejs-dropdownlist",12),k.fc("change",function(e){return k.Ec(i),k.jc().onChangeMethod(e)}),k.Ub()}if(2&e){var n=t.$implicit,a=k.jc();k.pc("dataSource",a.methods)("fields",a.fields)("value",n.method)("allowFiltering",!0)}}function Ui(e,t){1&e&&k.Lc(0),2&e&&k.Nc(" ",t.$implicit.entity.minutes," minutes ")}var Di,Ii=((Di=function(e){a(i,e);var t=c(i);function i(e,n,a,r){var c;return s(this,i),(c=t.call(this)).buildingService=e,c.modalService=n,c.alertify=a,c.route=r,c.methods=[{text:"Stir",value:"Stir"},{text:"Shaking",value:"Shaking"}],c.fields={text:"text",value:"value"},c}return d(i,[{key:"ngOnInit",value:function(){this.PermissionForTreeGrid(this.route),this.editing={allowDeleting:!0,allowEditing:!0,mode:"Row"},this.optionTreeGrid(),this.onService(),this.getGlueTypesAsTreeView()}},{key:"onChangeMethod",value:function(e){this.method=e.itemData.value}},{key:"optionTreeGrid",value:function(){this.pageSettings={pageSize:20},this.editparams={params:{format:"n"}}}},{key:"created",value:function(){this.getGlueTypesAsTreeView()}},{key:"onService",value:function(){var e=this;this.buildingService.currentMessage.subscribe(function(t){200===t&&e.getGlueTypesAsTreeView()})}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Add":e.cancel=!0,this.openMainModal();break;case"PDF Export":this.treeGridObj.pdfExport({hierarchyExportMode:"All"});break;case"Excel Export":this.treeGridObj.excelExport({hierarchyExportMode:"All"})}}},{key:"contextMenuOpen",value:function(e){2===e.rowInfo.rowData.entity.level&&(e.cancel=!0)}},{key:"contextMenuClick",value:function(e){var t=e.rowInfo.rowData.entity;switch(e.item.id){case"DeleteOC":this.delete(t.id);break;case"Add-Sub-Item":this.openSubModal()}}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Glue Type",'Are you sure you want to delete this GlueTypeID "'+e+'" ?',function(){t.buildingService.delete(e).subscribe(function(e){t.getGlueTypesAsTreeView(),t.alertify.success("The glue-type has been deleted!!!")},function(e){t.alertify.error("Failed to delete the glue-type!!!")})})}},{key:"actionBegin",value:function(e){if("save"===e.requestType&&"edit"===e.action){var t=e.data.entity;this.edit.title=t.title,this.edit.minutes=t.minutes,this.edit.rpm=t.rpm,this.edit.level=t.level,this.edit.id=t.id,this.edit.parentID=t.parentID,this.edit.method=this.method,this.rename()}"delete"===e.requestType&&this.delete(e.data[0].entity.id)}},{key:"rowSelected",value:function(e){var t=e.data.entity;this.edit={id:t.id,title:t.title,level:t.level,parentID:t.parentID,rpm:t.rpm,minutes:t.minutes,method:this.method},this.glueType={id:0,title:"",parentID:t.id,level:null===t.parentID?t.level+1:1,rpm:t.rpm,minutes:t.minutes,method:this.method}}},{key:"getGlueTypesAsTreeView",value:function(){var e=this;this.buildingService.getGlueTypesAsTreeView().subscribe(function(t){e.data=t})}},{key:"rowDB",value:function(e){}},{key:"clearFrom",value:function(){this.method="",this.glueType={id:0,title:"",parentID:0,level:0,rpm:0,minutes:0,method:this.method}}},{key:"queryCellInfo",value:function(e){"entity.title"===e.column.field&&1===e.data.entity.level&&(e.colSpan=4)}},{key:"rename",value:function(){var e=this;this.buildingService.update(this.edit).subscribe(function(t){e.getGlueTypesAsTreeView(),e.clearFrom(),e.alertify.success("The glue-type has been changed!!!")})}},{key:"openMainModal",value:function(){this.clearFrom();var e=this.modalService.open(yt,{size:"lg"});e.componentInstance.title="Add Glue Type Parent",e.componentInstance.glueType=this.glueType,e.result.then(function(e){},function(e){})}},{key:"openSubModal",value:function(){var e=this.modalService.open(yt,{size:"lg"});e.componentInstance.title="Add Glue Type Child",e.componentInstance.glueType=this.glueType,e.result.then(function(e){},function(e){})}}]),i}(b.a)).\u0275fac=function(e){return new(e||Di)(k.Pb(ft),k.Pb(I.b),k.Pb(w.a),k.Pb(g.a))},Di.\u0275cmp=k.Jb({type:Di,selectors:[["app-glue-type"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(wi,1),k.Rc(Ci,1)),2&e&&(k.Ac(i=k.gc())&&(t.treeGridObj=i.first),k.Ac(i=k.gc())&&(t.buildingModal=i.first))},features:[k.Bb([M.e,M.g,M.f]),k.zb],decls:15,vars:6,consts:[[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["allowSorting","true","gridLines","Both","childMapping","childNodes","allowExcelExport","true","allowPdfExport","true",3,"dataSource","treeColumnIndex","editSettings","contextMenuItems","toolbar","contextMenuClick","contextMenuOpen","toolbarClick","created","actionBegin","queryCellInfo","rowDataBound","rowSelected"],["treegrid",""],["field","entity.level","textAlign","Center","width","80","isPrimaryKey","true","headerText","Level",3,"allowEditing"],["field","entity.title","textAlign","Left","headerText","Glue Type"],["field","entity.method","textAlign","Center","headerText","Method"],["editTemplate",""],["field","entity.minutes","textAlign","Center","headerText","Minutes"],["template",""],["field","entity.rpm","textAlign","Center","headerText","RPM/Cycle"],[3,"dataSource","fields","value","allowFiltering","change"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"ejs-treegrid",3,4),k.fc("contextMenuClick",function(e){return t.contextMenuClick(e)})("contextMenuOpen",function(e){return t.contextMenuOpen(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("created",function(){return t.created()})("actionBegin",function(e){return t.actionBegin(e)})("queryCellInfo",function(e){return t.queryCellInfo(e)})("rowDataBound",function(e){return t.rowDB(e)})("rowSelected",function(e){return t.rowSelected(e)}),k.Vb(5,"e-columns"),k.Qb(6,"e-column",5),k.Qb(7,"e-column",6),k.Vb(8,"e-column",7),k.Jc(9,Ti,1,4,"ng-template",null,8,k.Kc),k.Ub(),k.Vb(11,"e-column",9),k.Jc(12,Ui,1,1,"ng-template",null,10,k.Kc),k.Ub(),k.Qb(14,"e-column",11),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(3),k.pc("dataSource",t.data)("treeColumnIndex",1)("editSettings",t.editSettingsTree)("contextMenuItems",t.contextMenuItems)("toolbar",t.toolbarOptionsTree),k.Cb(3),k.pc("allowEditing",!1))},directives:[M.i,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,V.c],styles:[".bgcolor td{background-color:#d1d1d1}.e-grid .e-altrow{background-color:#d6d8db}"],encapsulation:2}),Di),Pi=r("WAEy"),Mi=r("qLS9"),Vi=r("H552"),Ai=["importModal"],Ei=["barcode"],Bi=["printGrid"],Li=["ingredientGrid"];function ji(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",7),k.Vb(1,"button",8),k.fc("click",function(){return k.Ec(i),k.jc().backList()}),k.Lc(2,"Back List"),k.Ub(),k.Ub()}}function Oi(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",7),k.Vb(1,"button",8),k.fc("click",function(){return k.Ec(i),k.jc().printData()}),k.Qb(2,"i",9),k.Lc(3," Print"),k.Ub(),k.Ub()}}function Ni(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Mc(k.mc(1,1,t.$implicit.productionDate,"yyyyMMdd"))}function Ri(e,t){if(1&e&&(k.Vb(0,"tr"),k.Vb(1,"td",25),k.Qb(2,"ejs-qrcodegenerator",26),k.kc(3,"date"),k.Ub(),k.Vb(4,"td",27),k.Vb(5,"div"),k.Vb(6,"label"),k.Lc(7,"Name:"),k.Ub(),k.Lc(8),k.Ub(),k.Vb(9,"div"),k.Vb(10,"label"),k.Lc(11,"QR Code: "),k.Ub(),k.Lc(12),k.kc(13,"date"),k.Ub(),k.Vb(14,"div"),k.Vb(15,"label"),k.Lc(16,"MFG:"),k.Ub(),k.Lc(17),k.kc(18,"date"),k.Ub(),k.Vb(19,"div"),k.Vb(20,"label"),k.Lc(21,"EXP:"),k.Ub(),k.Lc(22),k.Ub(),k.Ub(),k.Ub()),2&e){var i=k.jc().$implicit,n=k.jc(2);k.Cb(2),k.tc("value","",k.mc(3,11,i.productionDate,"yyyyMMdd"),"-",i.batch,"-",i.code,""),k.pc("id",i.code)("displayText",n.displayTextMethod),k.Cb(6),k.Nc(" ",i.name,""),k.Cb(4),k.Pc(" ",k.mc(13,14,i.productionDate,"yyyyMMdd"),"-",i.batch,"-",i.code,""),k.Cb(5),k.Nc(" ",k.mc(18,17,i.productionDate,"yyyyMMdd"),""),k.Cb(5),k.Nc(" ",i.exp,"")}}function qi(e,t){if(1&e&&(k.Tb(0),k.Jc(1,Ri,23,20,"tr",4),k.Sb()),2&e){var i=k.jc(2);k.Cb(1),k.pc("ngIf",i.dataPicked.length>0)}}var Ki=function(){return{checkboxMode:"ResetOnRowClick"}};function Ji(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",10),k.Vb(1,"div",11),k.Vb(2,"ejs-grid",12,13),k.fc("rowDeselected",function(e){return k.Ec(i),k.jc().rowDeselected(e)})("actionBegin",function(e){return k.Ec(i),k.jc().actionBegin(e)})("rowDeselected",function(e){return k.Ec(i),k.jc().rowDeselected(e)})("rowSelected",function(e){return k.Ec(i),k.jc().rowSelected(e)})("toolbarClick",function(e){return k.Ec(i),k.jc().toolbarClickPrint(e)}),k.Vb(4,"e-columns"),k.Qb(5,"e-column",14),k.Qb(6,"e-column",15),k.Qb(7,"e-column",16),k.Qb(8,"e-column",17),k.Vb(9,"e-column",18),k.Jc(10,Ni,2,4,"ng-template",null,19,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(12,"div",20),k.Vb(13,"table",21),k.Vb(14,"thead",22),k.Vb(15,"tr"),k.Vb(16,"th",23),k.Lc(17,"QR Code"),k.Ub(),k.Ub(),k.Ub(),k.Vb(18,"tbody"),k.Jc(19,qi,2,1,"ng-container",24),k.Ub(),k.Ub(),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(2),k.pc("dataSource",n.dataPrint)("allowSelection",!0)("selectionSettings",k.uc(11,Ki))("allowExcelExport",!0)("editSettings",n.editSettings)("enableHover",!1)("allowRowDragAndDrop",!0)("toolbar",n.toolbar)("rowDropSettings",n.srcDropOptions)("allowSorting",!0),k.Cb(17),k.pc("ngForOf",n.dataPicked)}}function Fi(e,t){1&e&&k.Lc(0),2&e&&k.Nc("",t.$implicit.voc," %")}function Gi(e,t){1&e&&k.Lc(0),2&e&&k.Nc("",t.$implicit.daysToExpiration," days")}function $i(e,t){1&e&&k.Lc(0),2&e&&k.Nc("",t.$implicit.expiredTime," hours")}function zi(e,t){1&e&&k.Lc(0),2&e&&k.Nc("",t.$implicit.unit," kg")}function Qi(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit;k.Mc(""===i.glueType?"N/A":i.glueType)}}function Hi(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",46),k.Vb(1,"a",47),k.Qb(2,"i",48),k.Ub(),k.Ub(),k.Vb(3,"div",49),k.Vb(4,"button",50),k.fc("click",function(){k.Ec(i);var e=t.$implicit;return k.jc(2).openIngredientEditModalComponent(e)}),k.Qb(5,"i",51),k.Ub(),k.Ub(),k.Vb(6,"div",52),k.Vb(7,"button",53),k.fc("click",function(){k.Ec(i);var e=t.$implicit;return k.jc(2).delete(e)}),k.Qb(8,"i",54),k.Ub(),k.Ub()}if(2&e){var n=t.$implicit;k.Cb(1),k.tc("routerLink","/ec/setting/chemical/print-qrcode/",n.id,"/",n.code,"/",n.name,"")}}function Yi(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div"),k.Vb(1,"div",10),k.Vb(2,"div",28),k.Vb(3,"div",29),k.Vb(4,"ul",30),k.Vb(5,"li",31),k.Lc(6),k.Ub(),k.Vb(7,"li",31),k.Lc(8),k.Ub(),k.Vb(9,"li",31),k.Lc(10),k.Ub(),k.Ub(),k.Ub(),k.Vb(11,"span",32),k.Lc(12),k.Ub(),k.Ub(),k.Ub(),k.Vb(13,"ejs-grid",33,34),k.fc("dataBound",function(){return k.Ec(i),k.jc().dataBound()})("rowDataBound",function(e){return k.Ec(i),k.jc().rowDB(e)})("headerCellInfo",function(e){return k.Ec(i),k.jc().headerCellInfo(e)})("toolbarClick",function(e){return k.Ec(i),k.jc().toolbarClick(e)}),k.Vb(15,"e-columns"),k.Qb(16,"e-column",35),k.Qb(17,"e-column",36),k.Qb(18,"e-column",37),k.Qb(19,"e-column",38),k.Vb(20,"e-column",39),k.Jc(21,Fi,1,1,"ng-template",null,19,k.Kc),k.Ub(),k.Vb(23,"e-column",40),k.Jc(24,Gi,1,1,"ng-template",null,19,k.Kc),k.Ub(),k.Vb(26,"e-column",41),k.Jc(27,$i,1,1,"ng-template",null,19,k.Kc),k.Ub(),k.Vb(29,"e-column",42),k.Jc(30,zi,1,1,"ng-template",null,19,k.Kc),k.Ub(),k.Vb(32,"e-column",43),k.Jc(33,Qi,1,1,"ng-template",null,19,k.Kc),k.Ub(),k.Qb(35,"e-column",44),k.Vb(36,"e-column",45),k.Jc(37,Hi,9,3,"ng-template",null,19,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(6),k.Nc("Complete: ",n.info.complete,""),k.Cb(2),k.Nc("Total: ",n.info.total,""),k.Cb(2),k.Nc("Complete Rate: ",n.info.completeRate,"%"),k.Cb(2),k.Mc(n.dataIsDone),k.Cb(1),k.pc("dataSource",n.data)("allowSelection",!0)("allowSorting",!0)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",n.filterSettings)("toolbar",n.toolbarOptions)("pageSettings",n.pageSettings)("editSettings",n.editSettings)}}function Wi(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",55),k.Vb(1,"ngb-pagination",56),k.fc("pageChange",function(e){return k.Ec(i),k.jc().onPageChange(e)})("pageChange",function(e){return k.Ec(i),k.jc().currentPage=e}),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(1),k.pc("collectionSize",n.totalItems)("directionLinks",!0)("page",n.currentPage)("pageSize",n.itemsPerPage)("maxSize",20)("rotate",!0)("boundaryLinks",!0)}}function _i(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",57),k.Vb(1,"h4",58),k.Qb(2,"i",59),k.Lc(3," Import Excel "),k.Ub(),k.Vb(4,"button",60),k.fc("click",function(){return t.$implicit.dismiss("Cross click")}),k.Vb(5,"span",61),k.Lc(6,"\xd7"),k.Ub(),k.Ub(),k.Ub(),k.Vb(7,"div",62),k.Vb(8,"div",10),k.Vb(9,"div",63),k.Vb(10,"div",64),k.Vb(11,"label",65),k.Lc(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),k.Vb(13,"a",66),k.Lc(14,"click here"),k.Ub(),k.Lc(15," to download. Thank you!)"),k.Ub(),k.Vb(16,"input",67),k.fc("change",function(e){return k.Ec(i),k.jc().fileProgress(e)}),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Vb(17,"div",68),k.Vb(18,"button",69),k.fc("click",function(){return k.Ec(i),k.jc().uploadFile()}),k.Lc(19,"Upload File"),k.Ub(),k.Vb(20,"button",70),k.fc("click",function(){return t.$implicit.close("Close click")}),k.Lc(21,"Close"),k.Ub(),k.Ub()}if(2&e){var n=k.jc();k.Cb(13),k.pc("href",n.excelDownloadUrl,k.Gc)}}new Date;var Xi,Zi,en=((Xi=function(i){a(r,i);var n=c(r);function r(e,t,i,a,c,l){var o;return s(this,r),(o=n.call(this)).modalNameService=e,o.modalService=t,o.ingredientService=i,o.alertify=a,o.datePipe=c,o.route=l,o.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:20},o.data=[],o.destData=[],o.defaultDate=new Date(null),o.currentDate=new Date,o.srcDropOptions={targetID:"DestGrid"},o.glueTypeData=[],o.displayTextMethod={visibility:!1},o.destDropOptions={targetID:"Grid"},o.mfg=o.datePipe.transform(new Date,"yyyyMMdd"),o.exp=o.datePipe.transform(new Date((new Date).setMonth((new Date).getMonth()+4)),"yyyyMMdd"),o.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,expiredTime:0,daysToExpiration:0,voc:0,materialNO:"",partNO:"",unit:0,real:0,cbd:0,glueTypeID:0,replacementFrequency:0,prepareTime:0,standardCycle:0},o.page=1,o.currentPage=1,o.itemsPerPage=15,o.toolbar=["Search","Excel Export"],o.dataPrint=[],o.dataPicked=[],o.SUPERVISOR=2,o.ADMIN=1,o.info={total:0,completeRate:0,complete:0},o}return d(r,[{key:"ngOnInit",value:function(){var e=this;this.Permission(this.route);var t=JSON.parse(localStorage.getItem("building")),i=JSON.parse(localStorage.getItem("level"));this.role=i,this.building=t,this.filterSettings={type:"Excel"},this.excelDownloadUrl="".concat(v.a.apiUrlEC,"Ingredient/ExcelExport"),this.ingredientService.currentIngredient.subscribe(function(t){300===t&&(e.getIngredients(),e.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,voc:0,expiredTime:0,daysToExpiration:0,materialNO:"",partNO:"",unit:0,real:0,cbd:0,glueTypeID:0,replacementFrequency:0,prepareTime:0,standardCycle:0})}),this.getIngredients(),this.getAllIngredients(),this.rate()}},{key:"Permission",value:function(i){this.functions=JSON.parse(localStorage.getItem("functions"));var n,a=t(this.functions);try{for(a.s();!(n=a.n()).done;){var r=n.value;if(i.snapshot.data.functionCode.includes(r.functionCode)){var c,l=[],o=t(r.childrens);try{for(o.s();!(c=o.n()).done;){var s=c.value,u=this.makeAction(s.code);l.push.apply(l,e(u.filter(Boolean)))}}catch(g){o.e(g)}finally{o.f()}l.push("Search");var d=l.filter(function(e,t,i){return t===i.indexOf(e)});this.toolbarOptions=d;break}}}catch(g){a.e(g)}finally{a.f()}}},{key:"makeAction",value:function(e){switch(e){case Z.a.CREATE:return this.editSettings.allowAdding=!0,["Add"];case Z.a.EXCEL_EXPORT:return["Excel Export"];case Z.a.PRINT:return["Print QR Code"];default:return[void 0]}}},{key:"rate",value:function(){var e=this;this.ingredientService.rate().subscribe(function(t){e.info=t.data})}},{key:"rowDB",value:function(e){var t=e.data;0!==t.expiredTime&&0!==t.unit&&0!==t.voc&&0!==t.daysToExpiration&&""!==t.materialNO||e.row.classList.add("bgcolor")}},{key:"toolbarClickPrint",value:function(e){switch(e.item.text){case"Excel Export":var t={dataSource:this.dataPrint.map(function(e){return{supplier:e.supplier,name:e.name,unit:e.unit,qrCode:e.qrCode}}),columns:[new C.c({field:"supplier",headerText:"Supplier",textAlign:"Center",autoFit:!0,width:120}),new C.c({field:"name",headerText:"Ingredient",textAlign:"Center",autoFit:!0,width:120}),new C.c({field:"unit",headerText:"Amount",textAlign:"Center",autoFit:!0,width:80}),new C.c({field:"qrCode",headerText:"QR Code",textAlign:"Center",autoFit:!0,width:200})],fileName:"".concat((new Date).getFullYear()).concat((new Date).getMonth()).concat((new Date).getDay(),"_Print_Chemical.xlsx")};this.printGrid.excelExport(t)}}},{key:"toolbarClick",value:function(e){var t=this;switch(e.item.id){case"grid_Excel Export":for(var i=this.ingredientGrid.renderModule.data.generateQuery(),n=0;n<i.queries.length;n++)if("onPage"===i.queries[n].fn){i.queries.splice(n,1);break}new Vi.b({json:this.data}).executeQuery(i).then(function(e){var i={dataSource:e.result.map(function(e){return{supplier:e.supplier,name:e.name,unit:e.unit,code:e.materialNO,daysToExpiration:e.daysToExpiration}}),columns:[new C.c({field:"supplier",headerText:"Supplier",textAlign:"Center",autoFit:!0,width:120}),new C.c({field:"name",headerText:"Ingredient",textAlign:"Center",autoFit:!0,width:120}),new C.c({field:"unit",headerText:"Amount",textAlign:"Center",autoFit:!0,width:80}),new C.c({field:"code",headerText:"Code",textAlign:"Center",autoFit:!0,width:200}),new C.c({field:"daysToExpiration",headerText:"Days to Expiry",textAlign:"Center",autoFit:!0,width:200})],fileName:"".concat((new Date).getFullYear()).concat((new Date).getMonth()).concat((new Date).getDay(),"_Chemical.xlsx")};t.ingredientGrid.excelExport(i)}).catch(function(e){return!0});break;case"grid_add":this.openIngredientModalComponent(),this.ingredientGrid.refresh();break;case"grid_Import Excel":this.showModal();break;case"grid_Print QR Code":this.printBarcode()}}},{key:"actionBegin",value:function(e){if("save"===e.requestType&&"edit"===e.action)for(var t in this.dataPrint)if(this.dataPrint[t].id===e.data.id){this.dataPrint[t].batch=e.data.batch,this.dataPrint[t].productionDate=e.data.productionDate,this.dataPrint[t].qrCode="".concat(this.datePipe.transform(e.data.productionDate,"yyyyMMdd"),"-").concat(e.data.batch,"-").concat(e.data.code);break}}},{key:"configurePrint",value:function(e){var t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write('\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        '.concat(e,"\n      </body>\n    </html>\n    ")),t.document.close()}},{key:"printData",value:function(){var e,i="",n=t(this.dataPicked);try{for(n.s();!(e=n.n()).done;){var a=e.value;i+="\n       <div class='content'>\n        <div class='qrcode'>\n         ".concat(document.getElementById(a.code).innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n          <li class='subInfo'>Name: ").concat(a.name,"</li>\n          <li class='subInfo'>QR Code: ").concat(this.datePipe.transform(a.productionDate,"yyyyMMdd"),"-").concat(a.batch,"-").concat(a.code,"</li>\n          <li class='subInfo'>MFG: ").concat(this.datePipe.transform(a.productionDate,"yyyyMMdd"),"</li>\n          <li class='subInfo'>EXP: ").concat(a.exp,"</li>\n          </ul>\n         </div>\n      </div>\n      ")}}catch(r){n.e(r)}finally{n.f()}this.configurePrint(i)}},{key:"printBarcode",value:function(){this.show=!0,this.getAllIngredients()}},{key:"rowSelected",value:function(e){var t=this;setTimeout(function(){t.dataPicked=t.printGrid.getSelectedRecords()},300)}},{key:"rowDeselected",value:function(e){var t=this;setTimeout(function(){t.dataPicked=t.printGrid.getSelectedRecords()},300)}},{key:"updateBatch",value:function(e,t){for(var i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].batch=t;break}for(var n in this.dataPicked)if(this.dataPicked[n].id===e){this.dataPicked[n].batch=t;break}}},{key:"headerCellInfo",value:function(e){}},{key:"updateProductionDate",value:function(e,t){for(var i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].productionDate=t;break}for(var n in this.dataPicked)if(this.dataPicked[n].id===e){this.dataPicked[n].productionDate=t;break}}},{key:"updateExp",value:function(e,t){for(var i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].exp=t;break}for(var n in this.dataPicked)if(this.dataPicked[n].id===e){this.dataPicked[n].exp=t;break}}},{key:"pad",value:function(e){return e<10?"0"+e.toString():e.toString()}},{key:"onChangeDate",value:function(e,t){}},{key:"backList",value:function(){this.show=!1,this.dataPicked=[]}},{key:"getIngredients",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.data=t.map(function(e){var t,i,n;return{id:e.id,supplier:e.supplier,supplierID:e.supplierID,name:e.name,code:e.code,voc:e.voc,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,materialNO:e.materialNO,partNO:null===(t=e.partNO)||void 0===t?void 0:t.split(":")[0],unit:e.unit,real:e.real,cbd:e.cbd,glueTypeID:null===e.glueType?0:null===(i=e.glueType)||void 0===i?void 0:i.id,glueType:null===e.glueType?"":null===(n=e.glueType)||void 0===n?void 0:n.title,replacementFrequency:e.replacementFrequency,prepareTime:e.prepareTime,createdDate:new Date(e.createdDate),standardCycle:e.standardCycle}})||[];var i=e.data.length,n=e.data.filter(function(e){return 0===e.expiredTime||0===e.unit||0===e.daysToExpiration||""===e.materialNO}).length;e.dataIsDone="".concat(n,"/").concat(i)},function(t){e.alertify.error(t)})}},{key:"getAllIngredients",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.dataPrint=t.map(function(t){return{id:t.id,code:t.materialNO,name:t.name,supplier:t.supplier,supplierID:t.supplierID,batch:"DEFAULT",unit:t.unit,expiredTime:t.expiredTime,daysToExpiration:t.daysToExpiration,replacementFrequency:t.replacementFrequency,prepareTime:t.prepareTime,productionDate:new Date,qrCode:"".concat(e.datePipe.transform(new Date,"yyyyMMdd"),"-DEFAULT-").concat(t.materialNO),exp:e.datePipe.transform(new Date((new Date).setDate((new Date).getDate()+t.daysToExpiration)),"yyyyMMdd")}})},function(t){e.alertify.error(t)})}},{key:"search",value:function(){var e=this;this.text?this.ingredientService.search(this.currentPage,this.itemsPerPage,this.text).subscribe(function(t){e.data=t.result,e.pagination=t.pagination,e.totalItems=t.pagination.totalItems,e.currentPage=t.pagination.currentPage,e.itemsPerPage=t.pagination.itemsPerPage},function(t){e.alertify.error(t)}):this.getIngredients()}},{key:"getAll",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.data=t,console.log(t)})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete Ingredient",'Are you sure you want to delete this IngredientID "'+e.id+'" ?',function(){t.ingredientService.delete(e.id).subscribe(function(){t.getIngredients(),t.alertify.success("Ingredient has been deleted")},function(e){t.alertify.error("Failed to delete the Ingredient")})})}},{key:"onPageChange",value:function(e){var t=this;this.currentPage=e,this.text?this.ingredientService.search(this.currentPage,this.itemsPerPage,this.text).subscribe(function(e){t.data=e.result,t.pagination=e.pagination,t.totalItems=e.pagination.totalItems,t.currentPage=e.pagination.currentPage,t.itemsPerPage=e.pagination.itemsPerPage},function(e){t.alertify.error(e)}):this.getIngredients()}},{key:"openIngredientModalComponent",value:function(){var e=this.modalService.open(Pi.a,{size:"xl"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Chemical",e.result.then(function(e){},function(e){})}},{key:"openIngredientEditModalComponent",value:function(e){var t=this.modalService.open(Pi.a,{size:"xl"});t.componentInstance.ingredient=e,t.componentInstance.title="Edit Chemical",t.result.then(function(e){},function(e){})}},{key:"fileProgress",value:function(e){this.file=e.target.files[0]}},{key:"uploadFile",value:function(){var e=this,t=JSON.parse(localStorage.getItem("user")).user.id;this.ingredientService.import(this.file,t).subscribe(function(t){e.getAll(),e.alertify.success("The excel has been imported into system!"),e.modalService.dismissAll()},function(t){e.alertify.error(t,!0)})}},{key:"showModal",value:function(){this.modalReference=this.modalService.open(this.importModal,{size:"xl"})}},{key:"NO",value:function(e){return(this.ingredientGrid.pageSettings.currentPage-1)*this.ingredientGrid.pageSettings.pageSize+Number(e)+1}},{key:"dataBound",value:function(){this.ingredientGrid.autoFitColumns()}}]),r}(b.a)).\u0275fac=function(e){return new(e||Xi)(k.Pb(Mi.a),k.Pb(I.b),k.Pb(vi.a),k.Pb(w.a),k.Pb(l.e),k.Pb(g.a))},Xi.\u0275cmp=k.Jb({type:Xi,selectors:[["app-ingredient"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(Ai,1),k.Rc(Ei,1),k.Rc(Bi,1),k.Rc(Li,1)),2&e&&(k.Ac(i=k.gc())&&(t.importModal=i.first),k.Ac(i=k.gc())&&(t.barcode=i.first),k.Ac(i=k.gc())&&(t.printGrid=i.first),k.Ac(i=k.gc())&&(t.ingredientGrid=i.first))},features:[k.Bb([l.e,C.l]),k.zb],decls:9,vars:5,consts:[[1,"card"],[1,"card-body"],["class","btn-group pb-3",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],["class","card-footer",4,"ngIf"],["importModal",""],[1,"btn-group","pb-3"],["type","button",1,"btn","btn-success","ml-2",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-xl-8"],["id","Grid","rowHeight","38","height","450",3,"dataSource","allowSelection","selectionSettings","allowExcelExport","editSettings","enableHover","allowRowDragAndDrop","toolbar","rowDropSettings","allowSorting","rowDeselected","actionBegin","rowSelected","toolbarClick"],["printGrid",""],["type","checkbox","isPrimaryKey","true","width","60"],["field","supplier","isPrimaryKey","true","headerText","Supplier","width","100"],["field","name","isPrimaryKey","true","headerText","Chemical","width","100"],["field","batch","headerText","Batch","width","100"],["field","productionDate","type","date","format","yyyyMMdd","editType","datepickeredit","headerText","Production date","width","100"],["template",""],[1,"col-xl-4"],["id","qrcode","height","450",1,"table","table-hover"],[1,"thead-dark"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"text-center"],["width","100px","height","130px","mode","SVG",2,"display","block",3,"id","displayText","value"],[1,"text-algin-left"],[1,"col-md-12","d-flex","justify-content-end","align-items-center"],[1,"mr-2"],[1,"list-unstyled"],[1,"text-danger"],[1,"float-right","text-green","font-weight-bold","mb-2"],["id","grid","rowHeight","38","allowFiltering","true","showColumnMenu","true","allowPaging","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","allowExcelExport","filterSettings","toolbar","pageSettings","editSettings","dataBound","rowDataBound","headerCellInfo","toolbarClick"],["ingredientGrid",""],["field","supplier","headerText","Supplier","textAlign","Center","width","100"],["field","materialNO","headerText","Material #","textAlign","Center","width","100"],["field","partNO","headerText","Part #","textAlign","Center","width","100"],["field","name","headerText","Chemical","textAlign","Left","width","120"],["field","voc","headerText","VOC","textAlign","Center","width","80"],["field","daysToExpiration","headerText","Days to Expiry","textAlign","Center","width","130"],["field","expiredTime","headerText","Expiry Period","textAlign","Center","width","130"],["field","unit","headerText","Amount","textAlign","Center","width","100"],["field","glueType","headerText","Glue Type","textAlign","Center","width","130"],["field","createdDate","type","date","format","MM-dd-yyyy","headerText","Created Date","width","160","textAlign","Center"],["field","Option","headerText","Option","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top","title","Print QRCode",1,"btn-group"],[1,"btn","btn-xs","btn-success","mr-2",3,"routerLink"],["aria-hidden","true",1,"fa","fa-qrcode"],["appPermission","","appFunction","Chemical","appAction","EDIT",1,"btn-group","mr-2"],["type","button",1,"btn","btn-xs","btn-primary",3,"click"],[1,"fa","fa-edit"],["appPermission","","appFunction","Chemical","appAction","DELETE",1,"btn-group"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"card-footer"],[3,"collectionSize","directionLinks","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Jc(2,ji,3,0,"div",2),k.Jc(3,Oi,4,0,"div",2),k.Jc(4,Ji,20,12,"div",3),k.Jc(5,Yi,39,13,"div",4),k.Ub(),k.Jc(6,Wi,2,7,"div",5),k.Ub(),k.Jc(7,_i,22,1,"ng-template",null,6,k.Kc)),2&e&&(k.Cb(2),k.pc("ngIf",t.show),k.Cb(1),k.pc("ngIf",t.show),k.Cb(1),k.pc("ngIf",t.show),k.Cb(1),k.pc("ngIf",!t.show),k.Cb(1),k.pc("ngIf",!1))},directives:[l.n,C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,l.m,fe.d,g.f,A.a,I.d],pipes:[l.e],styles:[".bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff6}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),Xi),tn=r("Uc7L"),nn=["barcode"],an=["displayText"],rn=((Zi=function(){function e(t,i,n){s(this,e),this.route=t,this.datePipe=i,this.ingredientService=n,this.qrcode="",this.batch="DEFAULT",this.mfgTemp=new Date,this.mfg=this.datePipe.transform(this.mfgTemp,"yyyyMMdd"),this.exp=this.datePipe.transform(new Date((new Date).setMonth((new Date).getMonth()+4)),"yyyyMMdd"),this.displayTextMethod={visibility:!1}}return d(e,[{key:"ngOnInit",value:function(){this.onRouteChange()}},{key:"getByID",value:function(e){var t=this;this.ingredientService.getByID(e).subscribe(function(e){t.ingredient=e,t.mfg=t.datePipe.transform(t.mfgTemp,"yyyyMMdd"),t.exp=t.datePipe.transform(t.mfgTemp.setDate(t.mfgTemp.getDate()+t.ingredient.daysToExpiration),"yyyyMMdd"),t.qrcode="".concat(t.mfg,"-").concat(t.batch,"-").concat(t.ingredient.materialNO)},function(e){})}},{key:"onChangeProductionDate",value:function(e){if(e.isInteracted){var t=e.value;this.mfg=this.datePipe.transform(t,"yyyyMMdd"),this.exp=this.datePipe.transform(t.setDate(t.getDate()+this.ingredient.daysToExpiration),"yyyyMMdd"),this.qrcode="".concat(this.mfg,"-").concat(this.batch,"-").concat(this.ingredient.materialNO)}}},{key:"printData",value:function(){var e=document.getElementById("qrcode"),t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write("\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload=\"window.print(); window.close()\">\n      <div class='content'>\n        <div class='qrcode'>\n         ".concat(e.innerHTML,"\n         </div>\n          <div class='info'>\n          <ul>\n            <li class='subInfo'>Name: ").concat(this.ingredient.name,"</li>\n            <li class='subInfo'>QR Code: ").concat(this.qrcode,"</li>\n            <li class='subInfo'>MFG: ").concat(this.mfg,"</li>\n            <li class='subInfo'>EXP: ").concat(this.exp,"</li>\n          </ul>\n         </div>\n      </div>\n      </body>\n    </html>\n    ")),t.document.close()}},{key:"onRouteChange",value:function(){var e=this;this.route.data.subscribe(function(t){e.getByID(e.route.snapshot.params.id),e.name=e.route.snapshot.params.name})}},{key:"onChangeBatch",value:function(e){this.qrcode="".concat(this.mfg,"-").concat(e,"-").concat(this.route.snapshot.paramMap.get("code"))}}]),e}()).\u0275fac=function(e){return new(e||Zi)(k.Pb(g.a),k.Pb(l.e),k.Pb(vi.a))},Zi.\u0275cmp=k.Jb({type:Zi,selectors:[["app-print-qrcode"]],viewQuery:function(e,t){var i;1&e&&(k.Rc(nn,1),k.Rc(an,1)),2&e&&(k.Ac(i=k.gc())&&(t.barcode=i.first),k.Ac(i=k.gc())&&(t.displayText=i.first))},features:[k.Bb([l.e])],decls:45,vars:10,consts:[[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"e-input-group"],["readonly","","type","text","placeholder","",1,"e-input",3,"value"],["type","text","placeholder","Enter batch...",1,"e-input",3,"ngModel","ngModelChange"],[1,"col-md-3"],["format","yyyyMMdd","placeholder","Production Date","floatLabelType","Never",3,"ngModel","change","ngModelChange"],["readonly","","type","text","placeholder","",1,"e-input",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-print"],[1,"col-md-4"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode","width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Qb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",0),k.Vb(4,"div",1),k.Vb(5,"div",3),k.Qb(6,"input",4),k.Ub(),k.Ub(),k.Vb(7,"div",1),k.Vb(8,"div",3),k.Vb(9,"input",5),k.fc("ngModelChange",function(e){return t.onChangeBatch(e)})("ngModelChange",function(e){return t.batch=e}),k.Ub(),k.Ub(),k.Ub(),k.Vb(10,"div",6),k.Vb(11,"ejs-datepicker",7),k.fc("change",function(e){return t.onChangeProductionDate(e)})("ngModelChange",function(e){return t.mfgTemp=e}),k.Ub(),k.Ub(),k.Vb(12,"div",6),k.Vb(13,"div",3),k.Vb(14,"input",8),k.fc("ngModelChange",function(e){return t.exp=e}),k.Ub(),k.Ub(),k.Ub(),k.Vb(15,"div",1),k.Vb(16,"div",9),k.Vb(17,"button",10),k.fc("click",function(){return t.printData()}),k.Qb(18,"i",11),k.Lc(19," Print"),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Qb(20,"div",1),k.Ub(),k.Qb(21,"hr"),k.Vb(22,"div",0),k.Qb(23,"div",12),k.Vb(24,"div",13),k.Vb(25,"div",14),k.Qb(26,"ejs-qrcodegenerator",15,16),k.Ub(),k.Vb(28,"div"),k.Vb(29,"label"),k.Lc(30,"Name:"),k.Ub(),k.Lc(31),k.Ub(),k.Vb(32,"div"),k.Vb(33,"label"),k.Lc(34,"QrCode:"),k.Ub(),k.Lc(35),k.Ub(),k.Vb(36,"div"),k.Vb(37,"label"),k.Lc(38,"MFG:"),k.Ub(),k.Lc(39),k.Ub(),k.Vb(40,"div"),k.Vb(41,"label"),k.Lc(42,"EXP:"),k.Ub(),k.Lc(43),k.Ub(),k.Ub(),k.Qb(44,"div",12),k.Ub()),2&e&&(k.Cb(6),k.pc("value",t.name),k.Cb(3),k.pc("ngModel",t.batch),k.Cb(2),k.pc("ngModel",t.mfgTemp),k.Cb(3),k.pc("ngModel",t.exp),k.Cb(12),k.pc("displayText",t.displayTextMethod)("value",t.qrcode),k.Cb(5),k.Nc(" ",t.name,""),k.Cb(4),k.Nc(" ",t.qrcode,""),k.Cb(4),k.Nc(" ",t.mfg,""),k.Cb(4),k.Nc(" ",t.exp,""))},directives:[o.a,o.f,o.i,Et.a,fe.d],styles:[""]}),Zi),cn=["ingredientGrid"];function ln(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}function on(e,t){1&e&&k.Lc(0," # ")}function sn(e,t){1&e&&k.Lc(0),2&e&&k.Nc("$",t.$implicit.real,"")}function un(e,t){1&e&&k.Lc(0),2&e&&k.Nc("$",t.$implicit.cbd,"")}function dn(e,t){1&e&&(k.Lc(0),k.kc(1,"date")),2&e&&k.Nc(" ",k.mc(1,1,t.$implicit.createdDate,"dd MMM, yyyy HH:mm")," ")}var gn,pn=((gn=function(){function e(t,i){s(this,e),this.ingredientService=t,this.alertify=i,this.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:20},this.data=[],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}return d(e,[{key:"ngOnInit",value:function(){this.toolbarOptions=["Search","Edit","Cancel","ExcelExport"],this.filterSettings={type:"Excel"},this.getIngredients()}},{key:"toolbarClick",value:function(e){switch(e.item.id){case"grid_excelexport":this.ingredientGrid.excelExport()}}},{key:"actionBegin",value:function(e){if("save"===e.requestType&&"edit"===e.action){var t=e.data;this.update({id:t.id,name:t.name,percentage:0,code:t.code,createdDate:t.createdDate,supplierID:t.supplierID,position:0,allow:0,voc:t.voc,expiredTime:t.expiredTime,daysToExpiration:t.daysToExpiration,materialNO:t.materialNO,unit:t.unit,real:t.real,cbd:t.cbd,glueTypeID:t.glueTypeID,replacementFrequency:t.replacementFrequency,prepareTime:t.prepareTime,standardCycle:t.standardCycle,partNO:t.partNO})}}},{key:"onDoubleClick",value:function(e){this.setFocus=e.column}},{key:"actionComplete",value:function(e){"beginEdit"===e.requestType&&e.form.elements.namedItem(this.setFocus.field).focus()}},{key:"getIngredients",value:function(){var e=this;this.ingredientService.getAllIngredient().subscribe(function(t){e.data=t.map(function(e){return{id:e.id,supplier:e.supplier,supplierID:e.supplierID,name:e.name,code:e.code,voc:e.voc,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,materialNO:e.materialNO,unit:e.unit,real:e.real,cbd:e.cbd,createdDate:new Date(e.createdDate)}})},function(t){e.alertify.error(t)})}},{key:"update",value:function(e){var t=this;this.ingredientService.update(e).subscribe(function(e){t.alertify.success("Updated successed!"),t.getIngredients()})}},{key:"NO",value:function(e){return(this.ingredientGrid.pageSettings.currentPage-1)*this.ingredientGrid.pageSettings.pageSize+Number(e)+1}}]),e}()).\u0275fac=function(e){return new(e||gn)(k.Pb(vi.a),k.Pb(w.a))},gn.\u0275cmp=k.Jb({type:gn,selectors:[["app-costing"]],viewQuery:function(e,t){var i;1&e&&k.Rc(cn,1),2&e&&k.Ac(i=k.gc())&&(t.ingredientGrid=i.first)},decls:24,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["id","grid","rowHeight","38","allowFiltering","true","showColumnMenu","true","allowPaging","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","allowExcelExport","filterSettings","toolbar","pageSettings","editSettings","recordDoubleClick","actionBegin","actionComplete","toolbarClick"],["ingredientGrid",""],["field","#","headerText","#","width","40"],["template",""],["editTemplate",""],["field","supplier","headerText","Supplier","textAlign","Center","width","100"],["field","name","headerText","Chemical","textAlign","Center","width","120"],["field","real","headerText","Real","textAlign","Center","width","100"],["field","cbd","headerText","CBD","textAlign","Center","width","100"],["field","createdDate","headerText","Created Date","textAlign","Center","type","dateTime","format","dd MMM, yyyy HH:mm","width","180"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"h3"),k.Lc(3,"Chemical List"),k.Ub(),k.Ub(),k.Vb(4,"div",2),k.Vb(5,"ejs-grid",3,4),k.fc("recordDoubleClick",function(e){return t.onDoubleClick(e)})("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(7,"e-columns"),k.Vb(8,"e-column",5),k.Jc(9,ln,1,1,"ng-template",null,6,k.Kc),k.Jc(11,on,1,0,"ng-template",null,7,k.Kc),k.Ub(),k.Qb(13,"e-column",8),k.Qb(14,"e-column",9),k.Vb(15,"e-column",10),k.Jc(16,sn,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Vb(18,"e-column",11),k.Jc(19,un,1,1,"ng-template",null,6,k.Kc),k.Ub(),k.Vb(21,"e-column",12),k.Jc(22,dn,2,4,"ng-template",null,7,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(5),k.pc("dataSource",t.data)("allowSelection",!0)("allowSorting",!0)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a],pipes:[l.e],styles:[""]}),gn),bn=["grid"];function hn(e,t){if(1&e&&k.Lc(0),2&e){var i=t.$implicit,n=k.jc();k.Nc(" ",n.NO(i.index)," ")}}var fn=function(e){return[e]};function mn(e,t){1&e&&(k.Vb(0,"button",12),k.Lc(1,"Privilege"),k.Ub()),2&e&&k.pc("routerLink",k.vc(1,fn,"/ec/setting/role/privilege/"+t.$implicit.id))}var vn,yn=((vn=function(e){a(i,e);var t=c(i);function i(e,n,a){var r;return s(this,i),(r=t.call(this)).roleService=e,r.alertify=n,r.route=a,r.data=[],r.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},r.fieldsRoleType={text:"name",value:"name"},r.filterSettings={type:"Excel"},r}return d(i,[{key:"ngOnInit",value:function(){this.Permission(this.route),this.role={},this.getAllRole()}},{key:"getAllRole",value:function(){var e=this;this.roleService.getAll().subscribe(function(t){e.data=t})}},{key:"create",value:function(){var e=this;this.roleService.create(this.role).subscribe(function(){e.alertify.success("Add Role Successfully"),e.getAllRole(),e.role={}})}},{key:"update",value:function(){var e=this;this.roleService.update(this.role).subscribe(function(){e.alertify.success("Add Role Successfully"),e.getAllRole(),e.role={}})}},{key:"delete",value:function(e){var t=this;this.alertify.confirm("Delete role",'Are you sure you want to delete this role "'+e+'" ?',function(){t.roleService.delete(e).subscribe(function(){t.getAllRole(),t.alertify.success("The role has been deleted")},function(e){t.alertify.error("Failed to delete the role")})})}},{key:"toolbarClick",value:function(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}},{key:"actionBegin",value:function(e){"save"===e.requestType&&("add"===e.action&&(this.role.id=0,this.role.name=e.data.name,this.role.code=e.data.code,this.create()),"edit"===e.action&&(this.role.id=e.data.id,this.role.name=e.data.name,this.role.code=e.data.code,this.update())),"delete"===e.requestType&&(this.alertify.error("Can not delete this role",!0),this.delete(e.data[0].id))}},{key:"actionComplete",value:function(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}},{key:"NO",value:function(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}}]),i}(b.a)).\u0275fac=function(e){return new(e||vn)(k.Pb(T.a),k.Pb(w.a),k.Pb(g.a))},vn.\u0275cmp=k.Jb({type:vn,selectors:[["app-role"]],viewQuery:function(e,t){var i;1&e&&k.Rc(bn,1),2&e&&k.Ac(i=k.gc())&&(t.grid=i.first)},features:[k.zb],decls:17,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","code","headerText","Code","width","200","textAlign","Center"],["field","name","headerText","Role Group","width","200","textAlign","Center"],["field","option","headerText","Option","width","200","textAlign","Center"],["appPermission","","appFunction","Role","appAction","PRIVILEGE","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",3),k.Vb(4,"h5",4),k.Lc(5,"Role group list"),k.Ub(),k.Ub(),k.Vb(6,"ejs-grid",5,6),k.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),k.Vb(8,"e-columns"),k.Vb(9,"e-column",7),k.Jc(10,hn,1,1,"ng-template",null,8,k.Kc),k.Ub(),k.Qb(12,"e-column",9),k.Qb(13,"e-column",10),k.Vb(14,"e-column",11),k.Jc(15,mn,2,3,"ng-template",null,8,k.Kc),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(6),k.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[C.j,P.d,M.d,M.b,C.e,C.b,P.c,M.c,M.a,C.d,C.a,A.a,g.e,g.d],styles:[""]}),vn),kn=r("icBO"),Sn=r("BrIm"),xn=["treeview"];function wn(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",23),k.Vb(1,"ejs-checkbox",24),k.fc("change",function(e){k.Ec(i);var n=t.$implicit;return k.jc().changeRole(e,n)}),k.Ub(),k.Ub()}if(2&e){var n=t.$implicit;k.Cb(1),k.pc("label",n.name)}}function Cn(e,t){if(1&e){var i=k.Wb();k.Vb(0,"div",25),k.Vb(1,"h3",26),k.Lc(2),k.Ub(),k.Qb(3,"hr"),k.Vb(4,"ejs-treeview",27,28),k.fc("created",function(e){return k.Ec(i),k.jc().created(e)})("nodeChecked",function(e){return k.Ec(i),k.jc().nodeChecked(e)})("nodeClicked",function(e){return k.Ec(i),k.jc().nodeCheck(e)})("keyPress",function(e){return k.Ec(i),k.jc().nodeCheck(e)}),k.Ub(),k.Ub()}if(2&e){var n=t.$implicit;k.Cb(2),k.Mc(n.moduleName),k.Cb(2),k.pc("checkedNodes",n.checkedNodes)("fields",n.fields)}}var Tn,Un,Dn,In=[{path:"",children:[{path:"account",component:_,data:{title:"Account",breadcrumb:"Account",functionCode:"Account"},canActivate:[p.a]},{path:"building",component:pe,data:{title:"Building",breadcrumb:"Building",functionCode:"Building"},canActivate:[p.a]},{path:"supplier",component:xi,data:{title:"Supplier",breadcrumb:"Supplier",functionCode:"Supplier Menu"},canActivate:[p.a]},{path:"chemical",data:{title:"Chemical",breadcrumb:"Chemical",functionCode:"Chemical"},canActivate:[p.a],children:[{path:"",component:en},{path:"print-qrcode/:id/:code/:name",component:rn,data:{title:"Print QRCode",breadcrumb:"Print QRCode"}}]},{path:"kind",component:Ct,data:{title:"Kind",breadcrumb:"Kind",functionCode:"Kind"},canActivate:[p.a]},{path:"part",component:ti,data:{title:"Part",breadcrumb:"Part",functionCode:"Part"},canActivate:[p.a]},{path:"material",component:Wt,data:{title:"Material",breadcrumb:"Material",functionCode:"Material"},canActivate:[p.a]},{path:"glue-type",component:Ii,data:{title:"Glue Type",breadcrumb:"Glue Type",functionCode:"Glue Type"},canActivate:[p.a]},{path:"building-setting",component:De,data:{title:"RPM IoT",breadcrumb:"RPM IoT",functionCode:"RPM IoT"},canActivate:[p.a]},{path:"building-lunch-time",component:rt,data:{title:"Period",breadcrumb:"Period",functionCode:"Period"},canActivate:[p.a]},{path:"decentralization",component:bt,data:{title:"Decentralization",breadcrumb:"Decentralization"},canActivate:[p.a]},{path:"scaling-setting",component:di,data:{title:"Scaling Setting",breadcrumb:"Scaling Setting"},canActivate:[p.a]},{path:"mailing",component:$t,data:{title:"Mailing",breadcrumb:"Mailing"},canActivate:[p.a]},{path:"lunch-time",component:Vt,data:{title:"Lunch Time",breadcrumb:"Lunch Time"},canActivate:[p.a]},{path:"subpackage-capacity",component:mi,data:{title:"Subpackage Capacity",breadcrumb:"Subpackage Capacity"},canActivate:[p.a]},{path:"costing",component:pn,data:{title:"costing",breadcrumb:"Costing"},canActivate:[p.a]},{path:"role",data:{title:"Role",functionCode:"Role"},canActivate:[p.a],children:[{path:"",component:yn},{path:"privilege/:id",component:(Tn=function(){function i(e,t,n,a,r){s(this,i),this.router=e,this.route=t,this.roleService=n,this.alertify=a,this.permissionService=r,this.checkedData=[]}return d(i,[{key:"ngOnInit",value:function(){this.id=+this.route.snapshot.params.id||0,this.roleIDs=[this.id],this.getAllRole(),this.getScreenFunctionAndAction()}},{key:"getAllRole",value:function(){var e=this;this.roleService.getAll().subscribe(function(t){e.data=t})}},{key:"changeRole",value:function(e,t){if(!0===e.checked)this.roleIDs.push(t.id);else{var i=this.roleIDs.filter(function(e){return e!==t.id});this.roleIDs=i,0===this.roleIDs.length&&this.roleIDs.push(this.id)}this.getScreenFunctionAndAction()}},{key:"nodeCheck",value:function(e){var i,n=[e.node],a=t(this.tree);try{for(a.s();!(i=a.n()).done;){var r=i.value;(e.event.target.classList.contains("e-fullrow")||"Enter"===e.event.key)&&("true"===r.getNode(e.node).isChecked?r.uncheckAll(n):r.checkAll(n))}}catch(c){a.e(c)}finally{a.f()}}},{key:"nodeChecked",value:function(e){console.log(e)}},{key:"back",value:function(){this.router.navigate(["/ec/setting/role"])}},{key:"created",value:function(e){}},{key:"getAllChecked",value:function(){var i,n=[],a=[],r=[],c=t(this.tree);try{for(c.s();!(i=c.n()).done;){var l=i.value,o=e(l.getAllCheckedNodes());n.push.apply(n,e(o));var s=e(l.getTreeData());r.push.apply(r,e(s))}}catch(h){c.e(h)}finally{c.f()}var u,d=r.map(function(e){return e.childrens}),g=[].concat.apply([],d),p=t(n.filter(function(e,t,i){return i.indexOf(e)===t}));try{var b=function(){var t=u.value,i=g.filter(function(e){return e.id===t}),n=r.filter(function(e){return e.id===t});a.push.apply(a,e(i)),a.push.apply(a,e(n))};for(p.s();!(u=p.n()).done;)b()}catch(h){p.e(h)}finally{p.f()}this.checkedList=a}},{key:"getScreenFunctionAndAction",value:function(){var e=this;this.roleService.getScreenFunctionAndAction(this.roleIDs===[]?[0]:this.roleIDs).subscribe(function(t){e.modules=t})}},{key:"checkedAll",value:function(){var e,i=t(this.tree);try{for(i.s();!(e=i.n()).done;)e.value.checkAll()}catch(n){i.e(n)}finally{i.f()}}},{key:"uncheckedAll",value:function(){var e,i=t(this.tree);try{for(i.s();!(e=i.n()).done;)e.value.uncheckAll()}catch(n){i.e(n)}finally{i.f()}}},{key:"collapseAll",value:function(){var e,i=t(this.tree);try{for(i.s();!(e=i.n()).done;)e.value.collapseAll()}catch(n){i.e(n)}finally{i.f()}}},{key:"expandAll",value:function(){var e,i=t(this.tree);try{for(i.s();!(e=i.n()).done;)e.value.expandAll()}catch(n){i.e(n)}finally{i.f()}}},{key:"save",value:function(){this.getAllChecked(),this.putPermissionByRoleId()}},{key:"putPermissionByRoleId",value:function(){var e=this;this.permissionService.putPermissionByRoleId(this.id,{permissions:this.checkedList}).subscribe(function(){e.alertify.success("Successfully"),e.roleIDs=[e.id],e.getScreenFunctionAndAction()})}}]),i}(),Tn.\u0275fac=function(e){return new(e||Tn)(k.Pb(g.c),k.Pb(g.a),k.Pb(T.a),k.Pb(w.a),k.Pb(kn.a))},Tn.\u0275cmp=k.Jb({type:Tn,selectors:[["app-privilege"]],viewQuery:function(e,t){var i;1&e&&k.Rc(xn,1),2&e&&k.Ac(i=k.gc())&&(t.tree=i)},decls:37,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"card","card-info","card-outline"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-edit"],[1,"card-body"],[1,"d-flex","justify-content-center","align-items-center"],["class","mr-5 my-2",4,"ngFor","ngForOf"],[1,"fa","fa-user-circle"],[1,"my-3","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fa","fa-check-square"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-window-close"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"fa","fa-arrows-alt"],[1,"fa","fa-expand"],["class","col-3",4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-center"],[1,"btn","btn-info","mr-2",3,"click"],[1,"fa","fa-backspace"],[1,"fa","fa-save"],[1,"mr-5","my-2"],["cssClass","e-primary",3,"label","change"],[1,"col-3"],[1,"d-flex","justify-content-center"],["showCheckBox","true",3,"checkedNodes","fields","created","nodeChecked","nodeClicked","keyPress"],["treeview",""]],template:function(e,t){1&e&&(k.Vb(0,"div",0),k.Vb(1,"div",1),k.Vb(2,"div",2),k.Vb(3,"div",3),k.Vb(4,"h3",4),k.Qb(5,"i",5),k.Lc(6," Sample privilege groups "),k.Ub(),k.Ub(),k.Vb(7,"div",6),k.Vb(8,"div",7),k.Jc(9,wn,2,1,"div",8),k.Ub(),k.Ub(),k.Ub(),k.Vb(10,"div",2),k.Vb(11,"div",3),k.Vb(12,"h3",4),k.Qb(13,"i",9),k.Lc(14," The privilege "),k.Ub(),k.Ub(),k.Vb(15,"div",10),k.Vb(16,"button",11),k.fc("click",function(){return t.checkedAll()}),k.Qb(17,"i",12),k.Lc(18," Checked All "),k.Ub(),k.Vb(19,"button",13),k.fc("click",function(){return t.uncheckedAll()}),k.Qb(20,"i",14),k.Lc(21," Unchecked All "),k.Ub(),k.Vb(22,"button",15),k.fc("click",function(){return t.collapseAll()}),k.Qb(23,"i",16),k.Lc(24," Collapse All "),k.Ub(),k.Vb(25,"button",13),k.fc("click",function(){return t.expandAll()}),k.Qb(26,"i",17),k.Lc(27," Expand All "),k.Ub(),k.Ub(),k.Vb(28,"div",0),k.Jc(29,Cn,6,3,"div",18),k.Ub(),k.Ub(),k.Vb(30,"div",19),k.Vb(31,"button",20),k.fc("click",function(){return t.back()}),k.Qb(32,"i",21),k.Lc(33," Back "),k.Ub(),k.Vb(34,"button",13),k.fc("click",function(){return t.save()}),k.Qb(35,"i",22),k.Lc(36," Save "),k.Ub(),k.Ub(),k.Ub(),k.Ub()),2&e&&(k.Cb(9),k.pc("ngForOf",t.data),k.Cb(20),k.pc("ngForOf",t.modules))},directives:[l.m,E.e,Sn.g],styles:[".e-frame.e-icons[_ngcontent-%COMP%], .e-frame.e-icons.e-check[_ngcontent-%COMP%], .e-frame.e-icons.e-stop[_ngcontent-%COMP%]{border:1px solid!important;border-radius:4px!important;box-sizing:border-box!important;cursor:pointer!important;display:inline-block!important;font-family:e-icons!important;height:20px!important;line-height:20px!important;padding:0!important;text-align:center!important;vertical-align:middle!important;width:20px!important;font-size:12px!important}"]}),Tn),data:{title:"Privilege"}}]}]}],Pn=((Un=function e(){s(this,e)}).\u0275fac=function(e){return new(e||Un)},Un.\u0275mod=k.Nb({type:Un}),Un.\u0275inj=k.Mb({imports:[[g.g.forChild(In)],g.g]}),Un),Mn=r("wTG2"),Vn=r("k5Gf"),An=r("KeVr"),En=r("4SUy"),Bn=r("pQl/"),Ln=r("bwdU"),jn=r("xxV/");function On(e){return new Vn.a(e,"./assets/i18n/",".json")}var Nn=localStorage.getItem("lang");Object(En.bb)(r("2PVe"),r("GFvd"),r("GFWS"),r("0zpJ"),r("LRxf")),Object(En.bb)(r("2PVe"),r("oP7I"),r("Joj5"),r("3JeS"),r("LRxf")),Dn="vi"===Nn?Nn:"en";var Rn,qn=((Rn=function e(){s(this,e),"vi"===Nn?(Dn="vi",setTimeout(function(){En.p.load(r("+7Wi")),Object(En.nb)("vi")})):(Dn="en",setTimeout(function(){En.p.load(r("7j5C")),Object(En.nb)("en")}))}).\u0275fac=function(e){return new(e||Rn)},Rn.\u0275mod=k.Nb({type:Rn}),Rn.\u0275inj=k.Mb({providers:[l.e],imports:[[o.b,l.c,Ln.b,E.c,o.l,u.b,Pn,Mn.a,V.d,I.c,P.b,P.a,P.e,fe.a,fe.c,fe.b,E.l,tn.a,Et.b,M.h,C.i,E.i,D.d,Ee.b,An.a,Et.d,Bn.a,Sn.e,E.f,V.g,jn.a,Sn.f,E.d,B.b.forChild({loader:{provide:B.a,useFactory:On,deps:[m.b]},defaultLanguage:Dn})]]}),Rn)}}])}();