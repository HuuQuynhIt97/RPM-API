(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{"+rmw":function(e,t,i){"use strict";i.r(t),i.d(t,"HttpLoaderFactory",function(){return tn}),i.d(t,"SettingModule",function(){return ln});var n=i("SVse"),a=i("s7LF"),l=i("7g+E"),r=i("iInd"),c=i("vpVc"),s=i("dQqK"),o=i("2Vo4"),d=i("lJxs"),u=i("IheW"),h=i("AytR"),g=i("2zK7"),p=i("8Y7J");new u.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let b=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.authUrl=h.a.apiUrl2,this.messageSource=new o.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}getAllUsers(e,t){const i=new g.a;return this.http.get(`${this.authUrl}Users/GetAllUsers/${e}/${t}`,{observe:"response"}).pipe(Object(d.a)(e=>(i.result=e.body,null!=e.headers.get("Pagination")&&(i.pagination=JSON.parse(e.headers.get("Pagination"))),i)))}deleteUser(e){return this.http.delete(`${this.authUrl}Users/Delete/${e}/${h.a.systemCode}`)}mapBuildingUser(e,t){return this.http.get(`${this.baseUrl}BuildingUser/MapBuildingUser/${e}/${t}`)}getBuildings(){return this.http.get(`${this.baseUrl}Building/GetBuildings`)}updateUser(e){return this.http.post(`${this.authUrl}Users/Update`,e)}createUser(e){return this.http.post(`${this.authUrl}Users/Create`,e)}getBuildingUsers(){return this.http.get(`${this.baseUrl}BuildingUser/GetAllBuildingUsers`)}getLineByUserID(e,t){return this.http.get(`${this.baseUrl}BuildingUser/GetLineByUserID/${e}/${t}`)}removeLineUser(e){return this.http.post(`${this.baseUrl}BuildingUser/RemoveLineUser`,e)}mapLineUser(e){return this.http.post(`${this.baseUrl}BuildingUser/mapLineUser`,e)}getBuildingByUserID(e){return this.http.get(`${this.baseUrl}BuildingUser/GetBuildingByUserID/${e}`)}removeMultipleBuildingUser(e){return this.http.post(`${this.baseUrl}BuildingUser/RemoveMultipleBuildingUser`,e)}mapMultipleBuildingUser(e){return this.http.post(`${this.baseUrl}BuildingUser/MapMultipleBuildingUser`,e)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var m=i("HJFG"),f=i("emFE"),y=i("vGTY"),S=i("MAxt"),v=i("e7Im"),x=i("G0yt"),w=i("WWtw"),C=i("4DqM"),T=i("PDtH"),D=i("NkNT"),U=i("sWsm"),k=i("TSSN");const I=["grid"];function P(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function M(e,t){1&e&&p.Lc(0," # ")}function V(e,t){1&e&&p.Lc(0," ************ ")}function A(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",17,18),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc().onChangeRole(i,n)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.roles)("value",e.role)("fields",i.fieldsRole)("allowFiltering",!0)}}function B(e,t){if(1&e){const e=p.Wb();p.Vb(0,"button",22),p.fc("click",function(){p.Ec(e);const t=p.jc().$implicit;return p.jc().lock(t)}),p.Qb(1,"i",23),p.Ub()}}function E(e,t){if(1&e){const e=p.Wb();p.Vb(0,"button",24),p.fc("click",function(){p.Ec(e);const t=p.jc().$implicit;return p.jc().lock(t)}),p.Qb(1,"i",25),p.Ub()}}function L(e,t){if(1&e&&(p.Vb(0,"div",19),p.Jc(1,B,2,0,"button",20),p.Ub(),p.Vb(2,"div",19),p.Jc(3,E,2,0,"button",21),p.Ub()),2&e){const e=t.$implicit;p.Cb(1),p.pc("ngIf",e.isLock),p.Cb(2),p.pc("ngIf",!e.isLock)}}function j(e,t){if(1&e){const e=p.Wb();p.Vb(0,"button",28),p.fc("click",function(){p.Ec(e);const t=p.jc().$implicit;return p.jc().lock(t)}),p.Qb(1,"i",23),p.Ub()}}function O(e,t){if(1&e){const e=p.Wb();p.Vb(0,"button",29),p.fc("click",function(){p.Ec(e);const t=p.jc().$implicit;return p.jc().lock(t)}),p.Qb(1,"i",25),p.Ub()}}function N(e,t){if(1&e&&(p.Vb(0,"div",19),p.Jc(1,j,2,0,"button",26),p.Ub(),p.Vb(2,"div",19),p.Jc(3,O,2,0,"button",27),p.Ub()),2&e){const e=t.$implicit;p.Cb(1),p.pc("ngIf",e.isLock),p.Cb(2),p.pc("ngIf",!e.isLock)}}function $(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-checkbox",42,43),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc(2).checkboxChange(i,n)}),p.Ub()}2&e&&p.pc("checked",t.$implicit.status)}function R(e,t){if(1&e&&(p.Vb(0,"div",30),p.Vb(1,"h4",31),p.Qb(2,"i",32),p.Lc(3," Line Detail "),p.Ub(),p.Vb(4,"button",33),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(5,"span",34),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",35),p.Vb(8,"div",0),p.Vb(9,"div",1),p.Vb(10,"ejs-grid",36,37),p.Vb(12,"e-columns"),p.Vb(13,"e-column",38),p.Jc(14,$,2,1,"ng-template",null,7,p.Kc),p.Ub(),p.Qb(16,"e-column",39),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(17,"div",40),p.Vb(18,"button",41),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(19,"Close"),p.Ub(),p.Ub()),2&e){const e=p.jc();p.Cb(10),p.pc("dataSource",e.lines)("allowSorting",!0)("toolbar",e.toolbarOptions)}}function q(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-checkbox",42,43),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc(2).checkboxChangeBuilding(i,n)}),p.Ub()}2&e&&p.pc("checked",t.$implicit.status)}function K(e,t){if(1&e&&(p.Vb(0,"div",30),p.Vb(1,"h4",31),p.Qb(2,"i",32),p.Lc(3," Building Detail "),p.Ub(),p.Vb(4,"button",33),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(5,"span",34),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",35),p.Vb(8,"div",0),p.Vb(9,"div",1),p.Vb(10,"ejs-grid",36,37),p.Vb(12,"e-columns"),p.Vb(13,"e-column",38),p.Jc(14,q,2,1,"ng-template",null,7,p.Kc),p.Ub(),p.Qb(16,"e-column",44),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(17,"div",40),p.Vb(18,"button",41),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(19,"Close"),p.Ub(),p.Ub()),2&e){const e=p.jc();p.Cb(10),p.pc("dataSource",e.buildings)("allowSorting",!0)("toolbar",e.toolbarOptions)}}let J=(()=>{class e extends s.a{constructor(e,t,i,n,a,l){super(),this.accountService=e,this.roleService=t,this.modalService=i,this.userService=n,this.alertify=a,this.route=l,this.userData=[],this.fieldsBuilding={text:"name",value:"name"},this.fieldsRole={text:"name",value:"name"},this.password="",this.toolbarOptions=["Search"],this.passwordFake="aRlG8BBHDYjrood3UqjzRl3FubHFI99nEPCahGtZl9jvkexwlJ",this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.locale=localStorage.getItem("lang")}ngOnInit(){this.Permission(this.route),this.roleID=0,this.buildingID=0,this.getRoles(),this.getBuildings(),this.getAllUserInfo()}createdUsers(){}onDoubleClick(e){this.setFocus=e.column}actionBegin(e){if("save"===e.requestType&&"add"===e.action){if(this.userCreate={id:0,username:e.data.username,password:e.data.password,email:e.data.email,roleid:2,employeeID:e.data.employeeID,isLeader:!1,systemCode:h.a.systemCode},void 0===e.data.employeeID)return this.alertify.error("Please key in a account! <br> Vui l\xf2ng nh\u1eadp t\xe0i kho\u1ea3n \u0111\u0103ng nh\u1eadp!"),void(e.cancel=!0);if(void 0===e.data.password)return this.alertify.error("Please key in a password! <br> Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u!"),void(e.cancel=!0);if(!(this.roleID>0))return e.cancel=!0,void this.alertify.error("Please select a role! <br> Vui l\xf2ng ch\u1ecdn 1 quy\u1ec1n!");this.create()}"save"===e.requestType&&"edit"===e.action&&(this.userUpdate={id:e.data.id,username:e.data.username,password:e.data.password||"",email:e.data.email||"",roleid:2,employeeID:e.data.employeeID,isLeader:!1},this.update()),"delete"===e.requestType&&this.delete(e.data[0].id)}tooltip(e){"ID"!==e.column.field&&"password"!==e.column.field&&"option"!==e.column.field&&new v.b({content:e.data[e.column.field]+""},e.cell)}toolbarClick(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport({hierarchyExportMode:"All"})}}actionComplete(e){"beginEdit"===e.requestType&&"role"!==this.setFocus.field&&"building"!==this.setFocus.field&&e.form.elements.namedItem(this.setFocus.field).focus(),"add"===e.requestType&&e.form.elements.namedItem("employeeID").focus()}dataBound(){}onChangeBuilding(e,t){this.userID=t.id,this.buildingID=e.itemData.id}onChangeRole(e,t){this.userID=t.id,this.roleID=e.itemData.id}getBuildings(){this.accountService.getBuildings().subscribe(e=>{this.buildingDatas=e||[];const t=this.buildingDatas.filter(e=>2===e.level);this.buildingDatas=t},e=>{this.alertify.error(e)})}getLineByUserID(){this.accountService.getLineByUserID(this.userID,this.buildingID).subscribe(e=>{this.lines=e.data},e=>{this.alertify.error(e)})}getBuildingByUserID(){this.accountService.getBuildingByUserID(this.userID).subscribe(e=>{this.buildings=e.data},e=>{this.alertify.error(e)})}getRoles(){this.roleService.getAll().subscribe(e=>{this.roles=e},e=>{this.alertify.error(e)})}mappingUserRole(e){this.roleService.mappingUserRole(e).subscribe(e=>{this.alertify.success("Successfully!"),this.roleID=0},e=>{this.alertify.error(e)})}lock(e){this.lockAPI({userID:e.id,roleID:e.userRoleID,isLock:!e.isLock})}mapBuildingUser(e,t){void 0!==e&&void 0!==t&&this.accountService.mapBuildingUser(e,t).subscribe(e=>{e.status?(this.alertify.success(e.message),this.getAllUserInfo(),this.buildingID=0):this.alertify.success(e.message)})}mapUserRole(e,t){this.roleService.mapUserRole(e,t).subscribe(e=>{e.status?(this.alertify.success(e.message),this.getAllUserInfo(),this.roleID=0):this.alertify.success(e.message)})}lockAPI(e){this.roleService.lock(e).subscribe(e=>{e?(this.alertify.success("Success!"),this.getAllUserInfo()):this.alertify.error("Failed!")})}getAllUserInfo(){this.userService.getAllUserInfo().subscribe(e=>{this.userData=e})}delete(e){this.accountService.deleteUser(e).subscribe(e=>{this.alertify.success("The user has been deleted! <br> X\xf3a th\xe0nh c\xf4ng!"),this.getAllUserInfo()})}create(){this.accountService.createUser(this.userCreate).subscribe(e=>{this.alertify.success("The user has been created! <br> T\u1ea1o th\xe0nh c\xf4ng!"),e>0&&(e>0&&this.mapUserRole(e,this.roleID),this.getAllUserInfo(),this.password="")})}update(){this.accountService.updateUser(this.userUpdate).subscribe(e=>{this.alertify.success("The user has been updated! <br> Ch\u1ec9nh s\u1eeda th\xe0nh c\xf4ng!"),this.userID&&this.buildingID&&this.mapBuildingUser(this.userID,this.buildingID),this.userID>0&&this.roleID>0&&this.mapUserRole(this.userID,this.roleID),this.getAllUserInfo(),this.password=""})}NO(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}checkboxChange(e,t){}checkboxChangeBuilding(e,t){}showLineModal(e,t){this.userID=t.id,this.buildingID=this.buildingDatas.filter(e=>e.name===t.building)[0].id,this.getLineByUserID(),this.modalReference=this.modalService.open(e,{size:"md"})}showBuildingModal(e,t){this.userID=t.id,this.getBuildingByUserID(),this.modalReference=this.modalService.open(e,{size:"md"})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(b),p.Pb(y.a),p.Pb(x.b),p.Pb(S.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-account"]],viewQuery:function(e,t){if(1&e&&p.Rc(I,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.Bb([f.n,f.f,f.k]),p.zb],decls:35,vars:24,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["id","grid","gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","toolbar","pageSettings","allowExcelExport","editSettings","created","dataBound","actionBegin","actionComplete","queryCellInfo","recordDoubleClick","toolbarClick"],["grid",""],["field","ID","textAlign","Center","width","80","isPrimaryKey","true","headerText","ID"],["template",""],["editTemplate",""],["field","username","textAlign","Center",3,"headerText"],["field","employeeID","textAlign","Center",3,"headerText"],["field","password","textAlign","Center",3,"headerText"],["field","email","textAlign","Center","headerText","Email"],["field","role","textAlign","Center",3,"headerText"],["field","option","width","100","textAlign","Center",3,"headerText"],["lineModal",""],["buildingModal",""],[3,"dataSource","value","fields","allowFiltering","change"],["positionDropdownlist",""],[1,"btn-group"],["type","button","class","btn btn-xs btn-danger",3,"click",4,"ngIf"],["type","button","class","btn btn-xs btn-success",3,"click",4,"ngIf"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-lock"],["type","button",1,"btn","btn-xs","btn-success",3,"click"],[1,"fa","fa-unlock"],["type","button","appPermission","","appFunction","Account","appAction","EDIT","class","btn btn-xs btn-danger",3,"click",4,"ngIf"],["appPermission","","appFunction","Account","appAction","EDIT","type","button","class","btn btn-xs btn-success",3,"click",4,"ngIf"],["type","button","appPermission","","appFunction","Account","appAction","EDIT",1,"btn","btn-xs","btn-danger",3,"click"],["appPermission","","appFunction","Account","appAction","EDIT","type","button",1,"btn","btn-xs","btn-success",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["rowHeight","38","height","300",3,"dataSource","allowSorting","toolbar"],["lineGrid",""],["type","#","width","60"],["field","name","textAlign","Center","headerText","Line Name","width","80"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[3,"checked","change"],["checkbox",""],["field","name","textAlign","Center","headerText","Building Name","width","80"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"ejs-grid",4,5),p.fc("created",function(){return t.createdUsers()})("dataBound",function(){return t.dataBound()})("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("queryCellInfo",function(e){return t.tooltip(e)})("recordDoubleClick",function(e){return t.onDoubleClick(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(6,"e-columns"),p.Vb(7,"e-column",6),p.Jc(8,P,1,1,"ng-template",null,7,p.Kc),p.Jc(10,M,1,0,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(12,"e-column",9),p.kc(13,"translate"),p.Qb(14,"e-column",10),p.kc(15,"translate"),p.Vb(16,"e-column",11),p.kc(17,"translate"),p.Jc(18,V,1,0,"ng-template",null,7,p.Kc),p.Ub(),p.Qb(20,"e-column",12),p.Vb(21,"e-column",13),p.kc(22,"translate"),p.Jc(23,A,2,4,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(25,"e-column",14),p.kc(26,"translate"),p.Jc(27,L,4,2,"ng-template",null,7,p.Kc),p.Jc(29,N,4,2,"ng-template",null,8,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Jc(31,R,20,3,"ng-template",null,15,p.Kc),p.Jc(33,K,20,3,"ng-template",null,16,p.Kc)),2&e&&(p.Cb(4),p.pc("dataSource",t.userData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",t.locale)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("allowExcelExport",!0)("editSettings",t.editSettings),p.Cb(8),p.qc("headerText",p.lc(13,14,"Username")),p.Cb(2),p.qc("headerText",p.lc(15,16,"Account")),p.Cb(2),p.qc("headerText",p.lc(17,18,"Password")),p.Cb(5),p.qc("headerText",p.lc(22,20,"Role")),p.Cb(4),p.qc("headerText",p.lc(26,22,"Option")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c,n.n,D.a,U.e],pipes:[k.c],styles:[""]}),e})();var F=i("wsp1"),G=i("iStF"),z=i("CC+3");function Q(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",7),p.Vb(1,"label"),p.Lc(2,"Kind: "),p.Ub(),p.Vb(3,"div",8),p.Vb(4,"ejs-dropdownlist",14,15),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeKindEdit(t)}),p.Ub(),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(4),p.pc("dataSource",e.kinds)("value",e.building.kindName)("fields",e.fieldsKindEdit)("allowFiltering",!0)}}function H(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",7),p.Vb(1,"label"),p.Lc(2,"Type: "),p.Ub(),p.Vb(3,"div",8),p.Vb(4,"ejs-dropdownlist",16,17),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeBuildingType(t)}),p.Ub(),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(4),p.pc("dataSource",e.buildingTypeData)("value",null==e.building.buildingType?null:e.building.buildingType.name)("fields",e.fieldsBuildingType)("allowFiltering",!0)}}let Y=(()=>{class e{constructor(e,t,i,n){this.activeModal=e,this.buildingService=t,this.alertify=i,this.kindService=n,this.fieldsKindEdit={text:"name",value:"name"},this.fieldsBuildingType={text:"name",value:"name"}}ngOnInit(){var e,t,i,n;this.isLine=!1,this.isShowBuildingType=!1,console.log(this.parent),this.isLine=null!==this.parent&&(null===(e=this.parent)||void 0===e?void 0:e.level)===G.b.BUILDING_LEVEL&&2===(null===(i=null===(t=this.parent)||void 0===t?void 0:t.buildingType)||void 0===i?void 0:i.id),this.isShowBuildingType=null===this.parent||(null===(n=this.parent)||void 0===n?void 0:n.level)===G.b.ROOT_LEVEL,this.getAllKind(),this.getAllBuildingType()}validation(){return""!==this.building.name||(this.alertify.warning("Please enter building name!",!0),!1)}onChangeKindEdit(e){this.kindID=e.itemData.id}getAllKind(){this.kindService.getAllKind().subscribe(e=>{this.kinds=e})}createBuilding(){this.validation()&&(this.building.parentID>0?(this.building.kindID=this.kindID,this.building.buildingTypeID=this.buildingTypeID,this.buildingService.createSubBuilding(this.building).subscribe(e=>{this.alertify.success("The building has been created!!"),this.activeModal.dismiss(),this.buildingService.changeMessage(200)})):this.buildingService.createMainBuilding(this.building).subscribe(e=>{this.buildingService.changeMessage(200),this.alertify.success("The building has been created!!"),this.activeModal.dismiss()}))}onChangeBuildingType(e){this.buildingTypeID=e.itemData.id}getAllBuildingType(){this.buildingService.getAllBuildingType().subscribe(e=>{this.buildingTypeData=e})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(x.a),p.Pb(F.a),p.Pb(m.a),p.Pb(z.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-building-modal"]],inputs:{title:"title",building:"building",parent:"parent"},decls:21,vars:4,consts:[[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["name","Building","type","text","placeholder","Name",1,"form-control","Name",3,"ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select kind",3,"dataSource","value","fields","allowFiltering","change"],["kindDropdownlist",""],["placeholder","Select type",3,"dataSource","value","fields","allowFiltering","change"],["buildingDropdownlist",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"h4",1),p.Qb(2,"i",2),p.Lc(3),p.Ub(),p.Vb(4,"button",3),p.fc("click",function(){return t.activeModal.dismiss("Cross click")}),p.Vb(5,"span",4),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",5),p.Vb(8,"div",6),p.Vb(9,"div",7),p.Vb(10,"label"),p.Lc(11,"Name: "),p.Ub(),p.Vb(12,"div",8),p.Vb(13,"input",9),p.fc("ngModelChange",function(e){return t.building.name=e}),p.Ub(),p.Ub(),p.Ub(),p.Jc(14,Q,6,4,"div",10),p.Jc(15,H,6,4,"div",10),p.Ub(),p.Ub(),p.Vb(16,"div",11),p.Vb(17,"button",12),p.fc("click",function(){return t.activeModal.close("Close click")}),p.Lc(18,"Close"),p.Ub(),p.Vb(19,"button",13),p.fc("click",function(){return t.createBuilding()}),p.Lc(20,"Save"),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.Nc(" ",t.title," "),p.Cb(10),p.pc("ngModel",t.building.name),p.Cb(1),p.pc("ngIf",t.isLine),p.Cb(1),p.pc("ngIf",t.isShowBuildingType))},directives:[a.a,a.f,a.i,n.n,T.c],styles:[""]}),e})();const W=["treegrid"],_=["buildingModal"];function X(e,t){1&e&&(p.Lc(0),p.kc(1,"translate")),2&e&&p.Nc(" ",p.lc(1,1,"Building Type")," ")}function Z(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",11,12),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeBuildingType(t)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.buildingTypeData)("value",null==e.entity.buildingType?null:e.entity.buildingType.id)("fields",i.fieldsBuildingType)("allowFiltering",!0)}}function ee(e,t){1&e&&(p.Lc(0),p.kc(1,"translate")),2&e&&p.Nc(" ",p.lc(1,1,"KIND")," ")}function te(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",11,12),p.fc("change",function(t){return p.Ec(e),p.jc(2).onChangeKindEdit(t)}),p.Ub()}if(2&e){const e=p.jc().$implicit,t=p.jc();p.pc("dataSource",t.kinds)("value",e.entity.kindID)("fields",t.fieldsKindEdit)("allowFiltering",!0)}}function ie(e,t){if(1&e&&p.Jc(0,te,2,4,"ejs-dropdownlist",13),2&e){const e=t.$implicit;p.pc("ngIf",3===e.entity.level&&2===(null==e.parent.buildingType?null:e.parent.buildingType.id))}}let ne=(()=>{class e extends s.a{constructor(e,t,i,n,a){super(),this.buildingService=e,this.modalService=t,this.kindService=i,this.alertify=n,this.route=a,this.data=[],this.building={},this.parent={},this.edit={},this.fieldsKindEdit={text:"name",value:"id"},this.fieldsBuildingType={text:"name",value:"id"},this.queryCellInfoEvent=e=>{switch(e.data.entity.level){case G.b.ROOT_LEVEL:"entity.buildingType.name"!==e.column.field&&"entity.kindName"!==e.column.field||(e.colSpan=2);break;case G.b.BUILDING_LEVEL:"entity.buildingType.name"!==e.column.field&&"entity.kindName"!==e.column.field||(e.colSpan=3);break;case G.b.LINE_LEVEL:"entity.name"===e.column.field&&(e.colSpan=2)}}}ngOnInit(){this.PermissionForTreeGrid(this.route),this.editing={allowDeleting:!0,allowEditing:!0,mode:"Row"},this.toolbar=["Add","Delete","Search","Update","Cancel"],this.optionTreeGrid(),this.onService(),this.getAllKind(),this.getAllBuildingType(),this.getBuildingsAsTreeView()}optionTreeGrid(){this.pageSettings={pageSize:20},this.editparams={params:{format:"n"}}}created(){this.getBuildingsAsTreeView()}onService(){this.buildingService.currentMessage.subscribe(e=>{200===e&&this.getBuildingsAsTreeView()})}toolbarClick(e){switch(e.item.id){case"treegrid_gridcontrol_add":e.cancel=!0,this.openMainModal();break;case"treegrid_gridcontrol_pdfexport":this.treeGridObj.pdfExport({hierarchyExportMode:"All"});break;case"treegrid_gridcontrol_excelexport":this.treeGridObj.excelExport({hierarchyExportMode:"All"})}}contextMenuClick(e){const t=e.rowInfo.rowData.entity;switch(this.building={},e.item.id){case"DeleteOC":this.delete(e.rowInfo.rowData.entity.id);break;case"Add-Sub-Item":this.building.parentID=t.id,this.building.level=t.level,this.parent=t,this.openSubModal()}}delete(e){this.alertify.confirm("Delete Project",'Are you sure you want to delete this BuildingID "'+e+'" ?',()=>{this.buildingService.delete(e).subscribe(e=>{this.getBuildingsAsTreeView(),this.treeGridObj.refresh(),this.alertify.success("The building has been deleted!!!")},e=>{this.alertify.error("Failed to delete the building!!!")})})}actionComplete(e){}actionBegin(e){var t;if("beginEdit"===e.requestType){const i=e.rowData;this.buildingTypeID=null===(t=null==i?void 0:i.buildingType)||void 0===t?void 0:t.id}"save"===e.requestType&&"edit"===e.action&&(this.edit=Object.assign({},e.data.entity),this.edit.kindID=this.kindID,this.edit.buildingTypeID=this.buildingTypeID,this.rename())}getBuildingsAsTreeView(){this.buildingService.getBuildingsAsTreeView().subscribe(e=>{this.data=e})}clearFrom(){this.building={}}rename(){this.buildingService.rename(this.edit).subscribe(e=>{this.getBuildingsAsTreeView(),this.edit={},this.kindID=0,this.buildingTypeID=0,this.alertify.success("The building has been changed!!!")})}openMainModal(){this.clearFrom();const e=this.modalService.open(Y,{size:"lg"});e.componentInstance.title="Add Root",e.componentInstance.building=this.building,e.result.then(e=>{},e=>{})}openSubModal(){const e=this.modalService.open(Y,{size:"lg"});e.componentInstance.title=1===this.building.level?"Add building":"Add Line",e.componentInstance.building=this.building,e.componentInstance.parent=this.parent,e.result.then(e=>{},e=>{})}onChangeKindEdit(e){this.kindID=e.itemData.id}getAllKind(){this.kindService.getAllKind().subscribe(e=>{this.kinds=e})}onChangeBuildingType(e){this.buildingTypeID=e.itemData.id}getAllBuildingType(){this.buildingService.getAllBuildingType().subscribe(e=>{this.buildingTypeData=e})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(F.a),p.Pb(x.b),p.Pb(z.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-building"]],viewQuery:function(e,t){if(1&e&&(p.Rc(W,1),p.Rc(_,1)),2&e){let e;p.Ac(e=p.gc())&&(t.treeGridObj=e.first),p.Ac(e=p.gc())&&(t.buildingModal=e.first)}},features:[p.Bb([C.e,C.g,C.f]),p.zb],decls:20,vars:12,consts:[[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["id","treegrid","allowSorting","true","gridLines","Both","childMapping","childNodes","allowExcelExport","true","allowPdfExport","true",3,"dataSource","treeColumnIndex","editSettings","contextMenuItems","toolbar","contextMenuClick","toolbarClick","created","actionComplete","actionBegin","queryCellInfo"],["treegrid",""],["field","entity.level","width","80","isPrimaryKey","true",3,"allowEditing","headerText"],["field","entity.name",3,"headerText"],["field","entity.buildingType.name","headerText","Building Type","textAlign","Center","width","150"],["headerTemplate",""],["editTemplate",""],["field","entity.kindName","headerText","Kind","textAlign","Center","width","150"],[3,"dataSource","value","fields","allowFiltering","change"],["kindDropdownlist",""],[3,"dataSource","value","fields","allowFiltering","change",4,"ngIf"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-treegrid",3,4),p.fc("contextMenuClick",function(e){return t.contextMenuClick(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("created",function(){return t.created()})("actionComplete",function(e){return t.actionComplete(e)})("actionBegin",function(e){return t.actionBegin(e)})("queryCellInfo",function(e){return t.queryCellInfoEvent(e)}),p.Vb(5,"e-columns"),p.Qb(6,"e-column",5),p.kc(7,"translate"),p.Qb(8,"e-column",6),p.kc(9,"translate"),p.Vb(10,"e-column",7),p.Jc(11,X,2,3,"ng-template",null,8,p.Kc),p.Jc(13,Z,2,4,"ng-template",null,9,p.Kc),p.Ub(),p.Vb(15,"e-column",10),p.Jc(16,ee,2,3,"ng-template",null,8,p.Kc),p.Jc(18,ie,1,1,"ng-template",null,9,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("dataSource",t.data)("treeColumnIndex",1)("editSettings",t.editSettingsTree)("contextMenuItems",t.contextMenuItems)("toolbar",t.toolbarOptionsTree),p.Cb(3),p.qc("headerText",p.lc(7,8,"Level")),p.pc("allowEditing",!1),p.Cb(2),p.qc("headerText",p.lc(9,10,"Name")))},directives:[C.i,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c,n.n],pipes:[k.c],styles:[".bgcolor td{background-color:#ff6}.e-grid .e-altrow{background-color:#d6d8db}"],encapsulation:2}),e})();var ae=i("mrSG"),le=i("KLU1"),re=i("wpBH");const ce=["gridBuilding"],se=["gridSetting"];function oe(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function de(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function ue(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",20,21),p.fc("ngModelChange",function(e){return t.$implicit.glueTypeID=e})("select",function(t){return p.Ec(e),p.jc().onSelectGlueType(t)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.glueTypes)("ngModel",e.glueTypeID)("allowFiltering",!0)("fields",i.fields)}}function he(e,t){1&e&&p.Lc(0),2&e&&p.Nc(" ",t.$implicit.glueType.title," ")}function ge(e,t){if(1&e){const e=p.Wb();p.Vb(0,"button",22),p.fc("click",function(){p.Ec(e);const i=t.$implicit,n=p.jc(),a=p.Bc(35);return n.openPrintModal(a,i)}),p.Lc(1,"Print QR Code"),p.Ub()}}function pe(e,t){1&e&&p.Lc(0," N/A ")}function be(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",23),p.Vb(1,"h4",24),p.Qb(2,"i",25),p.Lc(3," Print QR Code "),p.Ub(),p.Vb(4,"button",26),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(5,"span",27),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",28),p.Vb(8,"div",3),p.Qb(9,"div",4),p.Vb(10,"div",29),p.Vb(11,"div",30),p.Qb(12,"ejs-qrcodegenerator",31,32),p.Ub(),p.Vb(14,"div"),p.Vb(15,"label"),p.Lc(16,"QrCode:"),p.Ub(),p.Lc(17),p.Ub(),p.Ub(),p.Qb(18,"div",4),p.Ub(),p.Ub(),p.Vb(19,"div",33),p.Vb(20,"button",34),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(21,"Close"),p.Ub(),p.Vb(22,"button",35),p.fc("click",function(){return p.Ec(e),p.jc().printData()}),p.Lc(23,"Print"),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(12),p.pc("displayText",e.displayTextMethod)("value",e.qrcode),p.Cb(5),p.Nc(" ",e.qrcode,"")}}let me=(()=>{class e{constructor(e,t,i,n){this.buildingService=e,this.alertify=t,this.modalService=i,this.settingService=n,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"title",value:"id"},this.buildings=[],this.settings=[],this.displayTextMethod={visibility:!1}}ngOnInit(){this.filterSettings={type:"Excel"},this.toolbar=["Excel Export","Search"],this.loadData(),this.getAllGlueType()}openPrintModal(e,t){this.modalService.open(e,{size:"md",backdrop:"static",keyboard:!1}),this.qrcode=t.machineCode}printData(){let e="";e+=`\n       <div class='content'>\n        <div class='qrcode'>\n         ${document.getElementById("qrcode").innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n              <li style="color: transparent;" class='subInfo'>a</li>\n              <li style="color: transparent;" class='subInfo'>a</li>\n              <li class='subInfo'>QR Code: ${this.qrcode}</li>\n              <li style="color: transparent;" class='subInfo'>a</li>\n              <li style="color: transparent;" class='subInfo'>a</li>\n          </ul>\n         </div>\n      </div>\n      `,this.configurePrint(e)}configurePrint(e){const t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        ${e}\n      </body>\n    </html>\n    `),t.document.close()}getAllGlueType(){return this.settingService.getAllGlueType().toPromise()}getBuildingForSetting(){return this.buildingService.getBuildingsForSetting().toPromise()}getSettingByBuilding(e){return this.settingService.getSettingByBuilding(e).toPromise()}editSetting(e){return this.settingService.updateSetting(e).toPromise()}createSetting(e){return this.settingService.addSetting(e).toPromise()}deleteSetting(e){return this.settingService.deleteSetting(e).toPromise()}onSelectGlueType(e){this.glueTypeId=+e.itemData.id}loadData(){return Object(ae.a)(this,void 0,void 0,function*(){try{this.buildings=yield this.getBuildingForSetting(),this.glueTypes=(yield this.getAllGlueType()).filter(e=>1===e.level)}catch(e){this.alertify.error(e+"")}})}edit(e){return Object(ae.a)(this,void 0,void 0,function*(){const t={id:e.id,minRPM:e.minRPM,maxRPM:e.maxRPM,glueTypeID:this.glueTypeId,machineType:e.machineType,machineCode:e.machineCode,buildingID:this.buildingID};try{yield this.editSetting(t),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID)}catch(i){this.alertify.error(i+"")}})}add(e){return Object(ae.a)(this,void 0,void 0,function*(){const t={id:0,minRPM:e.minRPM,maxRPM:e.maxRPM,glueTypeID:this.glueTypeId,machineType:e.machineType,machineCode:e.machineCode,buildingID:this.buildingID};try{yield this.createSetting(t),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID)}catch(i){this.alertify.error(i+"")}})}delete(e){return Object(ae.a)(this,void 0,void 0,function*(){try{yield this.deleteSetting(e),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID)}catch(t){this.alertify.error(t+"")}})}actionCompleteSetting(e){"add"===e.requestType&&(e.form.elements.namedItem("#").disabled=!0)}actionBeginSetting(e){return Object(ae.a)(this,void 0,void 0,function*(){"save"===e.requestType&&("add"===e.action&&(yield this.add(e.data)),"edit"===e.action&&(yield this.edit(e.data))),"delete"===e.requestType&&(yield this.delete(e.data[0].id))})}rowSelectedBuilding(e){return Object(ae.a)(this,void 0,void 0,function*(){e.isInteracted&&(this.toolbarOptions=["Add","Edit","Delete","Cancel","Excel Export","Search"],this.buildingID=e.data.id,this.settings=yield this.getSettingByBuilding(this.buildingID)),this.index=[e.rowIndex]})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.gridSetting.excelExport()}}toolbarClickBuilding(e){switch(e.item.text){case"Excel Export":this.gridBuilding.excelExport()}}NO(e){return+e+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(F.a),p.Pb(m.a),p.Pb(x.b),p.Pb(le.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-building-setting"]],viewQuery:function(e,t){if(1&e&&(p.Rc(ce,1),p.Rc(se,1)),2&e){let e;p.Ac(e=p.gc())&&(t.gridBuilding=e.first),p.Ac(e=p.gc())&&(t.gridSetting=e.first)}},decls:36,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["gridLines","Both","allowFiltering","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","toolbar","rowSelected","toolbarClick"],["gridBuilding",""],["field","#","textAlign","Center","headerText","#","width","40"],["template",""],["field","name","textAlign","Center","headerText","Building","width","100"],[1,"col-md-8"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["gridSetting",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["field","machineCode","textAlign","Center","headerText","Machine","width","100"],["field","glueType.code","textAlign","Center","headerText","Glue Type","width","130"],["editTemplate",""],["field","","textAlign","Center","headerText","Print","width","100"],[1,"card-footer"],["printQRCodeModal",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","allowFiltering","fields","ngModelChange","select"],["lineDropdownlist",""],[1,"btn","btn-sm","btn-primary",3,"click"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode","width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""],[1,"modal-footer"],["type","button",1,"btn","btn-primary","float-left",3,"click"],["type","button",1,"btn","btn-primary","float-right",3,"click"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"h2"),p.Lc(3),p.kc(4,"translate"),p.Ub(),p.Ub(),p.Vb(5,"div",2),p.Vb(6,"div",3),p.Vb(7,"div",4),p.Vb(8,"ejs-grid",5,6),p.fc("rowSelected",function(e){return t.rowSelectedBuilding(e)})("toolbarClick",function(e){return t.toolbarClickBuilding(e)}),p.Vb(10,"e-columns"),p.Vb(11,"e-column",7),p.Jc(12,oe,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(14,"e-column",9),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"div",10),p.Vb(16,"ejs-grid",11,12),p.fc("actionBegin",function(e){return t.actionBeginSetting(e)})("actionComplete",function(e){return t.actionCompleteSetting(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(18,"e-columns"),p.Vb(19,"e-column",13),p.Jc(20,de,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(22,"e-column",14),p.Vb(23,"e-column",15),p.Jc(24,ue,2,4,"ng-template",null,16,p.Kc),p.Jc(26,he,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(28,"e-column",17),p.Jc(29,ge,2,0,"ng-template",null,8,p.Kc),p.Jc(31,pe,1,0,"ng-template",null,16,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(33,"div",18),p.Ub(),p.Jc(34,be,24,3,"ng-template",null,19,p.Kc)),2&e&&(p.Cb(3),p.Mc(p.lc(4,13,"Building Setting")),p.Cb(5),p.pc("dataSource",t.buildings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbar),p.Cb(8),p.pc("dataSource",t.settings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("toolbar",t.toolbarOptions)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c,a.f,a.i,re.d],pipes:[k.c],styles:[""]}),e})();var fe=i("h9f+");new u.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let ye=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.messageSource=new o.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}getBuildings(){return this.http.get(`${this.baseUrl}BuildingLunchTime/GetAllBuildings`)}getPeriodMixingByBuildingID(e){return this.http.get(`${this.baseUrl}BuildingLunchTime/getPeriodMixingByBuildingID/${e}`)}addOrUpdateLunchTime(e){return this.http.post(`${this.baseUrl}BuildingLunchTime/AddOrUpdateLunchTime`,e)}updatePeriodMixing(e){return this.http.put(`${this.baseUrl}BuildingLunchTime/updatePeriodMixing`,e)}addPeriodMixing(e){return this.http.post(`${this.baseUrl}BuildingLunchTime/addPeriodMixing`,e)}deletePeriodMixing(e){return this.http.delete(`${this.baseUrl}BuildingLunchTime/deletePeriodMixing/${e}`)}addLunchTimeBuilding(e){return this.http.put(`${this.baseUrl}BuildingLunchTime/AddLunchTimeBuilding`,e)}updatePeriodDispatch(e){return this.http.put(`${this.baseUrl}BuildingLunchTime/updatePeriodDispatch`,e)}addPeriodDispatch(e){return this.http.post(`${this.baseUrl}BuildingLunchTime/addPeriodDispatch`,e)}deletePeriodDispatch(e){return this.http.delete(`${this.baseUrl}BuildingLunchTime/deletePeriodDispatch/${e}`)}getPeriodDispatchByPeriodMixingID(e){return this.http.get(`${this.baseUrl}BuildingLunchTime/GetPeriodDispatchByPeriodMixingID/${e}`)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})(),Se=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.ModalNameSource=new o.a(0),this.currentModalName=this.ModalNameSource.asObservable()}getAllLunchTime(){return this.http.get(this.baseUrl+"LunchTime/GetAll",{})}create(e){return this.http.post(this.baseUrl+"LunchTime/Create",e)}update(e){return this.http.put(this.baseUrl+"LunchTime/Update",e)}delete(e){return this.http.delete(this.baseUrl+"LunchTime/Delete/"+e)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var ve=i("OoJn");const xe=["grid"];function we(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",16,17),p.fc("ngModelChange",function(e){return t.$implicit.lunchTime=e})("select",function(i){p.Ec(e);const n=t.$implicit;return p.jc().onSelectLunchTime(i,n)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.lunchTimeData)("ngModel",e.lunchTime)("allowFiltering",!0)("fields",i.fields)}}function Ce(e,t){1&e&&p.Lc(0),2&e&&p.Nc(" ",t.$implicit.lunchTime," ")}function Te(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",19),p.Vb(1,"button",20),p.fc("click",function(){p.Ec(e);const t=p.jc().$implicit,i=p.jc(),n=p.Bc(26);return i.showModal(n,t)}),p.Qb(2,"i",21),p.Lc(3),p.kc(4,"translate"),p.Ub(),p.Ub()}2&e&&(p.Cb(3),p.Nc(" ",p.lc(4,1,"Time Period Mixing")," "))}function De(e,t){1&e&&p.Jc(0,Te,5,3,"div",18),2&e&&p.pc("ngIf",t.$implicit.lunchTimeID>0)}function Ue(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc(2);p.Nc(" ",i.NO(e.index)," ")}}function ke(e,t){}function Ie(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.startTime,"HH:mm")," ")}function Pe(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",39),p.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(t){return p.Ec(e),p.jc(2).onChangeStartTime(t)}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function Me(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.endTime,"HH:mm")," ")}function Ve(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",40),p.fc("valueChange",function(t){return p.Ec(e),p.jc(2).onChangeEndTime(t)})("ngModelChange",function(e){return t.$implicit.endTime=e}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}function Ae(e,t){1&e&&(p.Lc(0),p.kc(1,"translate")),2&e&&p.Nc(" ",p.lc(1,1,"Overtime/No Overtime")," ")}function Be(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-switch",41,42),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc(2).changeOvertime(i,n)}),p.kc(2,"translate"),p.kc(3,"translate"),p.Ub()}if(2&e){const e=t.$implicit;p.qc("onLabel",p.lc(2,3,"Overtime")),p.qc("offLabel",p.lc(3,5,"")),p.pc("checked",e.isOvertime)}}function Ee(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-switch",41,42),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc(2).changeOvertime(i,n)}),p.kc(2,"translate"),p.kc(3,"translate"),p.Ub()}if(2&e){const e=t.$implicit;p.qc("onLabel",p.lc(2,3,"Overtime")),p.qc("offLabel",p.lc(3,5,"")),p.pc("checked",e.isOvertime)}}function Le(e,t){1&e&&(p.Lc(0),p.kc(1,"translate")),2&e&&p.Nc(" ",p.lc(1,1,"Option")," ")}function je(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",19),p.Vb(1,"button",20),p.fc("click",function(){p.Ec(e);const i=t.$implicit,n=p.jc(2),a=p.Bc(28);return n.showPeriodDispatchModal(a,i)}),p.Qb(2,"i",21),p.Lc(3),p.kc(4,"translate"),p.Ub(),p.Ub()}2&e&&(p.Cb(3),p.Nc(" ",p.lc(4,1,"Time Period Dispatch")," "))}function Oe(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",22),p.Vb(1,"h4",23),p.Qb(2,"i",24),p.Lc(3," Time Period Mixing List "),p.Vb(4,"span",25),p.Lc(5),p.Ub(),p.Ub(),p.Vb(6,"button",26),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(7,"span",27),p.Lc(8,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(9,"div",28),p.Vb(10,"div",0),p.Vb(11,"div",1),p.Vb(12,"ejs-grid",29,30),p.fc("actionBegin",function(t){return p.Ec(e),p.jc().actionBeginPeriodsGrid(t)}),p.Vb(14,"e-columns"),p.Vb(15,"e-column",31),p.Jc(16,Ue,1,1,"ng-template",null,12,p.Kc),p.Jc(18,ke,0,0,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(20,"e-column",32),p.Jc(21,Ie,2,4,"ng-template",null,12,p.Kc),p.Jc(23,Pe,1,2,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(25,"e-column",33),p.Jc(26,Me,2,4,"ng-template",null,12,p.Kc),p.Jc(28,Ve,1,2,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(30,"e-column",34),p.kc(31,"translate"),p.Jc(32,Ae,2,3,"ng-template",null,35,p.Kc),p.Jc(34,Be,4,7,"ng-template",null,12,p.Kc),p.Jc(36,Ee,4,7,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(38,"e-column",36),p.kc(39,"translate"),p.Jc(40,Le,2,3,"ng-template",null,35,p.Kc),p.Jc(42,je,5,3,"ng-template",null,12,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(44,"div",37),p.Vb(45,"button",38),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(46,"Close"),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(5),p.Oc(" ( *The lunch time of ",e.building.name," building: ",e.building.lunchTime,")"),p.Cb(7),p.pc("dataSource",e.periods)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",e.filterSettings)("editSettings",e.editSettings)("toolbar",e.toolbarOptions),p.Cb(18),p.qc("headerText",p.lc(31,10,"Overtime/No Overtime")),p.Cb(8),p.qc("headerText",p.lc(39,12,"Option"))}}function Ne(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc(2);p.Nc(" ",i.NO(e.index)," ")}}function $e(e,t){}function Re(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.startTime,"HH:mm")," ")}function qe(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",39),p.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(t){return p.Ec(e),p.jc(2).onChangeStartTimePeriodDispatch(t)}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function Ke(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.endTime,"HH:mm")," ")}function Je(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",40),p.fc("valueChange",function(t){return p.Ec(e),p.jc(2).onChangeEndTimePeriodDispatch(t)})("ngModelChange",function(e){return t.$implicit.endTime=e}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}function Fe(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",22),p.Vb(1,"h4",23),p.Qb(2,"i",24),p.Lc(3," Time Period Dispatch List "),p.Vb(4,"span",25),p.Lc(5),p.kc(6,"date"),p.kc(7,"date"),p.Ub(),p.Ub(),p.Vb(8,"button",26),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(9,"span",27),p.Lc(10,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(11,"div",28),p.Vb(12,"div",0),p.Vb(13,"div",1),p.Vb(14,"ejs-grid",29,30),p.fc("actionBegin",function(t){return p.Ec(e),p.jc().actionBeginPeriodsDispatchGrid(t)}),p.Vb(16,"e-columns"),p.Vb(17,"e-column",31),p.Jc(18,Ne,1,1,"ng-template",null,12,p.Kc),p.Jc(20,$e,0,0,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(22,"e-column",32),p.Jc(23,Re,2,4,"ng-template",null,12,p.Kc),p.Jc(25,qe,1,2,"ng-template",null,11,p.Kc),p.Ub(),p.Vb(27,"e-column",33),p.Jc(28,Ke,2,4,"ng-template",null,12,p.Kc),p.Jc(30,Je,1,2,"ng-template",null,11,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(32,"div",37),p.Vb(33,"button",38),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(34,"Close"),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(5),p.Oc(" ( *The time period mixing: ",p.mc(6,8,e.periodMixing.startTime,"HH:mm")," - ",p.mc(7,11,e.periodMixing.endTime,"HH:mm")," )"),p.Cb(9),p.pc("dataSource",e.periodsDispatch)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",e.filterSettings)("editSettings",e.editSettings)("toolbar",e.toolbarOptions)}}let Ge=(()=>{class e extends s.a{constructor(e,t,i,n,a,l){super(),this.buildingLunchTimeService=e,this.lunchTimeService=t,this.alertify=i,this.datePipe=n,this.modalService=a,this.route=l,this.data=[],this.periods=[],this.periodsDispatch=[],this.buildings=[],this.steps={hour:1,minute:30},this.fields={text:"content",value:"content"},this.lunchTimeData=[],this.filterSettings={type:"Excel"},this.periodMixing={},this.periodDispatch={}}ngOnInit(){this.Permission(this.route),this.toolbar=["Search"],this.getAllLunchTime()}created(){this.getBuildings()}rowSelected(e){this.buildingID=Number((e.data.entity||e.data).id)}onChangeStartTime(e){this.startTime=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}onChangeEndTime(e){this.endTime=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}onSelectLunchTime(e,t){this.building={},this.building.id=t.id,this.building.lunchTimeID=e.itemData.id,this.buildingLunchTimeService.addLunchTimeBuilding(this.building).subscribe(()=>{this.alertify.success("success!"),this.getBuildings()},e=>{this.alertify.error(e)})}updatePeriod(e){this.buildingLunchTimeService.updatePeriodMixing(e).subscribe(e=>{this.getPeriodMixingByBuildingID(),this.alertify.success("success!")},e=>{this.alertify.error(e)})}getBuildings(){this.buildingLunchTimeService.getBuildings().subscribe(e=>{this.buildings=e||[];const t=this.buildings.filter(e=>2===e.level);this.buildings=t},e=>{this.alertify.error(e)})}getAllLunchTime(){this.lunchTimeService.getAllLunchTime().subscribe(e=>{this.lunchTimeData=e||[]},e=>{this.alertify.error(e)})}getPeriodMixingByBuildingID(){this.buildingLunchTimeService.getPeriodMixingByBuildingID(this.buildingID).subscribe(e=>{this.periods=e.map(e=>({isOvertime:e.isOvertime,startTime:new Date(e.startTime),endTime:new Date(e.endTime),id:e.id}))})}showModal(e,t){this.buildingID=+t.id,this.building=t,this.getPeriodMixingByBuildingID(),this.modalReference=this.modalService.open(e,{size:"xl"})}getPeriodDispatchByPeriodMixingID(){this.buildingLunchTimeService.getPeriodDispatchByPeriodMixingID(this.periodMixingID).subscribe(e=>{this.periodsDispatch=e.map(e=>({isOvertime:e.isOvertime,startTime:new Date(e.startTime),endTime:new Date(e.endTime),id:e.id}))})}showPeriodDispatchModal(e,t){this.periodMixing=t,this.periodMixingID=+t.id,this.getPeriodDispatchByPeriodMixingID(),this.modalReference=this.modalService.open(e,{size:"xl"})}actionBeginPeriodsGrid(e){if("beginEdit"===e.requestType){const t=e.rowData;this.startTime=this.datePipe.transform(null==t?void 0:t.startTime,"YYYY-MM-dd HH:mm"),this.endTime=this.datePipe.transform(null==t?void 0:t.endTime,"YYYY-MM-dd HH:mm")}"save"===e.requestType&&("add"===e.action&&(this.periodMixing.startTime=this.datePipe.transform(this.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(this.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.create()),"edit"===e.action&&(this.periodMixing=e.data,this.periodMixing.startTime=this.datePipe.transform(this.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(this.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}create(){this.buildingLunchTimeService.addPeriodMixing(this.periodMixing).subscribe(()=>{this.alertify.success("Successfully"),this.getPeriodMixingByBuildingID(),this.periodMixing={}},e=>{this.alertify.error(e),this.getPeriodMixingByBuildingID()})}update(){this.buildingLunchTimeService.updatePeriodMixing(this.periodMixing).subscribe(()=>{this.alertify.success("Successfully"),this.getPeriodMixingByBuildingID(),this.periodMixing={}},e=>{this.getPeriodMixingByBuildingID(),this.alertify.error(e)})}delete(e){this.alertify.confirm("Delete",'Are you sure you want to delete this "'+e+'" ?',()=>{this.buildingLunchTimeService.deletePeriodMixing(e).subscribe(()=>{this.getPeriodMixingByBuildingID(),this.alertify.success("Successfully")},e=>{this.alertify.error(e),this.getPeriodMixingByBuildingID()})})}changeOvertime(e,t){this.periodMixing=t,this.periodMixing.startTime=this.datePipe.transform(t.startTime,"YYYY-MM-dd HH:mm"),this.periodMixing.endTime=this.datePipe.transform(t.endTime,"YYYY-MM-dd HH:mm"),this.periodMixing.buildingID=this.buildingID,this.periodMixing.isOvertime=e.checked,this.update()}changeOvertimePeriodDispatch(e,t){this.periodDispatch=t,this.periodDispatch.periodMixingID=this.periodMixingID,this.updatePeriodDispatch()}NO(e){return Number(e)+1}onChangeStartTimePeriodDispatch(e){this.startTimePeriodDispatch=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}onChangeEndTimePeriodDispatch(e){this.endTimePeriodDispatch=this.datePipe.transform(e,"YYYY-MM-dd HH:mm")}rowSelectedPeriodDispatch(e){this.periodMixingID=Number((e.data.entity||e.data).id)}actionBeginPeriodsDispatchGrid(e){if("beginEdit"===e.requestType){const t=e.rowData;this.startTimePeriodDispatch=this.datePipe.transform(null==t?void 0:t.startTime,"YYYY-MM-dd HH:mm"),this.endTimePeriodDispatch=this.datePipe.transform(null==t?void 0:t.endTime,"YYYY-MM-dd HH:mm")}"save"===e.requestType&&("add"===e.action&&(this.periodDispatch.startTime=this.datePipe.transform(this.startTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.endTime=this.datePipe.transform(this.endTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.periodMixingID=this.periodMixingID,this.createPeriodDispatch()),"edit"===e.action&&(this.periodDispatch=e.data,this.periodDispatch.startTime=this.datePipe.transform(this.startTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.endTime=this.datePipe.transform(this.endTimePeriodDispatch,"YYYY-MM-dd HH:mm"),this.periodDispatch.periodMixingID=this.periodMixingID,this.updatePeriodDispatch())),"delete"===e.requestType&&this.deletePeriodDispatch(e.data[0].id)}createPeriodDispatch(){this.buildingLunchTimeService.addPeriodDispatch(this.periodDispatch).subscribe(()=>{this.alertify.success("Successfully"),this.getPeriodDispatchByPeriodMixingID(),this.periodDispatch={}},e=>{this.alertify.error(e),this.getPeriodDispatchByPeriodMixingID()})}updatePeriodDispatch(){this.buildingLunchTimeService.updatePeriodDispatch(this.periodDispatch).subscribe(()=>{this.alertify.success("Successfully"),this.getPeriodDispatchByPeriodMixingID(),this.periodDispatch={}},e=>{this.getPeriodDispatchByPeriodMixingID(),this.alertify.error(e)})}deletePeriodDispatch(e){this.alertify.confirm("Delete",'Are you sure you want to delete this "'+e+'" ?',()=>{this.buildingLunchTimeService.deletePeriodDispatch(e).subscribe(()=>{this.getPeriodDispatchByPeriodMixingID(),this.alertify.success("Successfully")},e=>{this.alertify.error(e),this.getPeriodDispatchByPeriodMixingID()})})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(ye),p.Pb(Se),p.Pb(m.a),p.Pb(n.e),p.Pb(x.b),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-building-lunch-time"]],viewQuery:function(e,t){if(1&e&&p.Rc(xe,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:29,vars:18,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-building"],[1,"card-body","table-responsive","p-0"],["allowSorting","true","gridLines","Both",3,"dataSource","editSettings","toolbar","rowSelected","created"],["field","level","width","80","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","name","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","lunchTime","textAlign","Center",3,"headerText"],["editTemplate",""],["template",""],["field","Option","isPrimaryKey","true","textAlign","Center",3,"headerText"],["periodModal",""],["periodDispatchModal",""],["popupHeight","200px","popupWidth","250px",3,"dataSource","ngModel","allowFiltering","fields","ngModelChange","select"],["lineDropdownlist",""],["class","btn-group",4,"ngIf"],[1,"btn-group"],["type","button",1,"btn","btn-xs","btn-info",3,"click"],[1,"fa","fa-plus"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],[1,"font-weight-bold","text-danger"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true","gridLines","Both","rowHeight","38",3,"dataSource","allowSorting","allowExcelExport","filterSettings","editSettings","toolbar","actionBegin"],["grid",""],["field","period","headerText","Period","isPrimaryKey","true","width","60"],["field","startTime","textAlign","Center","headerText","Start Time","width","120"],["field","endTime","textAlign","Center","headerText","End Time","width","120"],["field","isOvertime","width","138","textAlign","Center",3,"headerText"],["headerTemplate",""],["field","option","width","138","textAlign","Center",3,"headerText"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],[2,"width","100%",3,"ngModel","format","ngModelChange","valueChange"],[2,"width","100%",3,"ngModel","format","valueChange","ngModelChange"],["cssClass","custom-overtime",2,"width","80px",3,"onLabel","offLabel","checked","change"],["switch",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"h3",4),p.Qb(5,"i",5),p.Lc(6),p.kc(7,"translate"),p.Ub(),p.Ub(),p.Vb(8,"div",6),p.Vb(9,"ejs-grid",7),p.fc("rowSelected",function(e){return t.rowSelected(e)})("created",function(){return t.created()}),p.Vb(10,"e-columns"),p.Qb(11,"e-column",8),p.kc(12,"translate"),p.Qb(13,"e-column",9),p.kc(14,"translate"),p.Vb(15,"e-column",10),p.kc(16,"translate"),p.Jc(17,we,2,4,"ng-template",null,11,p.Kc),p.Jc(19,Ce,1,1,"ng-template",null,12,p.Kc),p.Ub(),p.Vb(21,"e-column",13),p.kc(22,"translate"),p.Jc(23,De,1,1,"ng-template",null,12,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Jc(25,Oe,47,14,"ng-template",null,14,p.Kc),p.Jc(27,Fe,35,14,"ng-template",null,15,p.Kc)),2&e&&(p.Cb(6),p.Nc(" ",p.lc(7,8,"Building List")," "),p.Cb(3),p.pc("dataSource",t.buildings)("editSettings",t.editSettings)("toolbar",t.toolbar),p.Cb(2),p.qc("headerText",p.lc(12,10,"Level")),p.Cb(2),p.qc("headerText",p.lc(14,12,"Building Name")),p.Cb(2),p.qc("headerText",p.lc(16,14,"Lunch Time")),p.Cb(6),p.qc("headerText",p.lc(22,16,"Option")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c,a.f,a.i,n.n,ve.a,U.k],pipes:[k.c,n.e],styles:[".e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%], .e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]:hover   .e-switch-inner.e-switch-active[_ngcontent-%COMP%]   .e-switch-on[_ngcontent-%COMP%]{background-color:#ffc107!important;border-color:#ffc107!important;color:#000;font-weight:500;font-size:10px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]{width:42px;height:24px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle[_ngcontent-%COMP%]{width:20px;height:20px}.e-switch-wrapper.custom-overtime[_ngcontent-%COMP%]   .e-switch-handle.e-switch-active[_ngcontent-%COMP%]{margin-left:-22px}"]}),e})();i("KnEv");const ze=["grid"],Qe=["multiSelectBuildings"],He=["multiSelectLines"];function Ye(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function We(e,t){1&e&&p.Lc(0," # ")}function _e(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-multiselect",14,15),p.fc("close",function(){p.Ec(e);const i=t.$implicit;return p.jc().closeBuilding(i.index)})("removing",function(i){p.Ec(e);const n=t.$implicit;return p.jc().removingBuilding(i,n)})("select",function(i){p.Ec(e);const n=t.$implicit;return p.jc().onSelectBuilding(i,n)})("ngModelChange",function(e){return t.$implicit.buildings=e}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",e.buildingsData)("ngModel",e.buildings)("mode",i.mode)("fields",i.fieldsBuilding)("showDropDownIcon",!0)}}function Xe(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-multiselect",16,17),p.fc("close",function(){p.Ec(e);const i=t.$implicit;return p.jc().closeLine(i.index)})("removing",function(i){p.Ec(e);const n=t.$implicit;return p.jc().removing(i,n)})("select",function(i){p.Ec(e);const n=t.$implicit;return p.jc().onSelect(i,n)})("ngModelChange",function(e){return t.$implicit.lines=e}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",e.linesData)("ngModel",e.lines)("selectAllText",i.selectAllText)("mode",i.mode)("fields",i.fieldsLine)("showDropDownIcon",!0)}}let Ze=(()=>{class e{constructor(e,t,i,n){this.accountService=e,this.modalService=t,this.userService=i,this.alertify=n,this.userData=[],this.fieldsBuilding={text:"name",value:"id"},this.fieldsLine={text:"name",value:"id"},this.fieldsRole={text:"name",value:"name"},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.password="",this.toolbarOptions=["Search"],this.toolbar=["Add","Edit","Delete","Update","Cancel","ExcelExport","Search"],this.passwordFake="aRlG8BBHDYjrood3UqjzRl3FubHFI99nEPCahGtZl9jvkexwlJ",this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.locale=localStorage.getItem("lang"),this.fields={text:"name",value:"id"},this.lineList=[],this.lineRemovingList=[],this.buildingList=[],this.buildingRemovingList=[],this.checkAll=[],this.selectAllText=""}ngOnInit(){this.selectAllText="Select All",this.mode="CheckBox",this.roleID=0,this.buildingID=0,this.getBuildings(),this.getAllUserInfo()}rowSelected(e){}onChangeBuilding(e,t){this.userID=t.id,this.buildingID=e.itemData.id}onChangeRole(e,t){this.userID=t.id,this.roleID=e.itemData.id}getBuildings(){this.accountService.getBuildings().subscribe(e=>{this.buildingDatas=e||[];const t=this.buildingDatas.filter(e=>2===e.level);this.buildingDatas=t},e=>{this.alertify.error(e)})}getLineByUserID(){this.accountService.getLineByUserID(this.userID,this.buildingID).subscribe(e=>{this.lines=e.data},e=>{this.alertify.error(e)})}getBuildingByUserID(){this.accountService.getBuildingByUserID(this.userID).subscribe(e=>{this.buildings=e.data},e=>{this.alertify.error(e)})}mapBuildingUser(e,t){void 0!==e&&void 0!==t&&this.accountService.mapBuildingUser(e,t).subscribe(e=>{e.status?(this.alertify.success(e.message),this.getAllUserInfo(),this.buildingID=0):this.alertify.success(e.message)})}getAllUserInfo(){this.userService.getAllUserInfoRoles().subscribe(e=>{this.userData=e})}removing(e,t){this.lineList=this.lineList.filter(t=>t!==e.itemData.id),this.lineRemovingList.push(e.itemData.id),this.userID=t.id,this.accountService.removeLineUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(e=>{this.alertify.success("Successfully! Th\xe0nh c\xf4ng!")},e=>this.alertify.error(e))}onSelect(e,t){this.lineList.push(e.itemData.id),this.userID=t.id,this.accountService.mapLineUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(e=>{this.alertify.success(e.message)})}removingBuilding(e,t){this.buildingList=this.buildingList.filter(t=>t!==e.itemData.id),this.userID=t.id,this.buildingRemovingList.push(e.itemData.id),this.accountService.removeMultipleBuildingUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(e=>{this.alertify.success("Successfully! Th\xe0nh c\xf4ng!")},e=>this.alertify.error(e))}onSelectBuilding(e,t){this.buildingList.push(e.itemData.id),this.userID=t.id,this.accountService.mapMultipleBuildingUser({userID:this.userID,buildings:[e.itemData.id]}).subscribe(e=>{this.alertify.success(e.message)})}closeLine(e){this.getAllUserInfo()}closeBuilding(e){this.getAllUserInfo()}NO(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}selectedAll(e){console.log(e)}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(b),p.Pb(x.b),p.Pb(S.a),p.Pb(m.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-decentralization"]],viewQuery:function(e,t){if(1&e&&(p.Rc(ze,1),p.Rc(Qe,1),p.Rc(He,1)),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first),p.Ac(e=p.gc())&&(t.multiSelectBuildings=e),p.Ac(e=p.gc())&&(t.multiSelectLines=e)}},features:[p.Bb([f.n,f.f,f.k,T.a])],decls:26,vars:22,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["gridLines","Both",3,"dataSource","allowPaging","allowResizing","showColumnMenu","locale","pageSettings","allowExcelExport","rowSelected"],["grid",""],["field","ID","textAlign","Center","width","80","isPrimaryKey","true","headerText","ID"],["template",""],["editTemplate",""],["field","username","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","employeeID","isPrimaryKey","true","textAlign","Center",3,"headerText"],["field","role","textAlign","Center","isPrimaryKey","true",3,"headerText"],["field","building","textAlign","Center",3,"headerText"],["field","line","textAlign","Center",3,"headerText"],["placeholder","Select building",3,"dataSource","ngModel","mode","fields","showDropDownIcon","close","removing","select","ngModelChange"],["multiSelectBuildings",""],["selectedAll","selectedAll($event)","placeholder","Select line",3,"dataSource","ngModel","selectAllText","mode","fields","showDropDownIcon","close","removing","select","ngModelChange"],["multiSelectLines",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"ejs-grid",4,5),p.fc("rowSelected",function(e){return t.rowSelected(e)}),p.Vb(6,"e-columns"),p.Vb(7,"e-column",6),p.Jc(8,Ye,1,1,"ng-template",null,7,p.Kc),p.Jc(10,We,1,0,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(12,"e-column",9),p.kc(13,"translate"),p.Qb(14,"e-column",10),p.kc(15,"translate"),p.Qb(16,"e-column",11),p.kc(17,"translate"),p.Vb(18,"e-column",12),p.kc(19,"translate"),p.Jc(20,_e,2,5,"ng-template",null,7,p.Kc),p.Ub(),p.Vb(22,"e-column",13),p.kc(23,"translate"),p.Jc(24,Xe,2,6,"ng-template",null,7,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(4),p.pc("dataSource",t.userData)("allowPaging",!0)("allowResizing",!0)("showColumnMenu",!0)("locale",t.locale)("pageSettings",t.pageSettings)("allowExcelExport",!0),p.Cb(8),p.qc("headerText",p.lc(13,12,"Username")),p.Cb(2),p.qc("headerText",p.lc(15,14,"Account")),p.Cb(2),p.qc("headerText",p.lc(17,16,"Role")),p.Cb(2),p.qc("headerText",p.lc(19,18,"Building")),p.Cb(4),p.qc("headerText",p.lc(23,20,"Line")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.f,a.f,a.i],pipes:[k.c],styles:[""]}),e})();new u.e({"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("token")});let et=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.messageSource=new o.a(0),this.currentMessage=this.messageSource.asObservable()}changeMessage(e){this.messageSource.next(e)}delete(e){return this.http.delete(`${this.baseUrl}GlueType/Delete/${e}`)}update(e){return this.http.put(`${this.baseUrl}GlueType/Update`,e)}getGlueTypesAsTreeView(){return this.http.get(`${this.baseUrl}GlueType/GetAllAsTreeView`)}getAll(){return this.http.get(`${this.baseUrl}GlueType/GetAll`)}getAllByParentID(){return this.http.get(`${this.baseUrl}GlueType/GetAllByParentID`)}getAllByLevel(){return this.http.get(`${this.baseUrl}GlueType/GetAllByLevel`)}createParent(e){return this.http.post(`${this.baseUrl}GlueType/createParent`,e)}createChild(e){return this.http.post(`${this.baseUrl}GlueType/createChild`,e)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function tt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",7),p.Vb(1,"label"),p.Lc(2,"Method: "),p.Ub(),p.Vb(3,"div",8),p.Vb(4,"ejs-dropdownlist",16),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeMethod(t)}),p.Ub(),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(4),p.pc("dataSource",e.methods)("fields",e.fields)("value",e.glueType.method)("allowFiltering",!0)}}let it=(()=>{class e{constructor(e,t,i){this.activeModal=e,this.glueTypeService=t,this.alertify=i,this.fields={text:"text",value:"value"},this.methods=[{text:"Stir",value:"Stir"},{text:"Shaking",value:"Shaking"}]}ngOnInit(){}validation(){return""!==this.glueType.title||(this.alertify.warning("Please enter glue type name!",!0),!1)}onChangeMethod(e){this.method=e.itemData.value}createGlueType(){this.validation()&&(this.glueType.parentID>0?(this.glueType.method=this.method,this.glueTypeService.createChild(this.glueType).subscribe(e=>{this.alertify.success("The glue type has been created!!"),this.activeModal.dismiss(),this.glueTypeService.changeMessage(200)})):this.glueTypeService.createParent(this.glueType).subscribe(e=>{this.glueTypeService.changeMessage(200),this.alertify.success("The glue type has been created!!"),this.activeModal.dismiss()}))}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(x.a),p.Pb(et),p.Pb(m.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-glue-type-modal"]],inputs:{title:"title",glueType:"glueType"},decls:30,vars:5,consts:[[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"row"],[1,"col-md-12"],[1,"form-group"],["name","glueType","type","text","placeholder","Title",1,"form-control","Name",3,"ngModel","ngModelChange"],["name","glueType","type","text","placeholder","Minutes",1,"form-control","Name",3,"ngModel","ngModelChange"],["name","glueType","type","text","placeholder","RPM",1,"form-control","Name",3,"ngModel","ngModelChange"],["class","col-md-12",4,"ngIf"],[1,"modal-footer"],["type","button",1,"btn","btn-light",3,"click"],["type","submit",1,"btn","btn-primary",3,"click"],["placeholder","Select method",3,"dataSource","fields","value","allowFiltering","change"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"h4",1),p.Qb(2,"i",2),p.Lc(3),p.Ub(),p.Vb(4,"button",3),p.fc("click",function(){return t.activeModal.dismiss("Cross click")}),p.Vb(5,"span",4),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",5),p.Vb(8,"div",6),p.Vb(9,"div",7),p.Vb(10,"div",8),p.Vb(11,"label"),p.Lc(12,"Glue Type Name: "),p.Ub(),p.Vb(13,"input",9),p.fc("ngModelChange",function(e){return t.glueType.title=e}),p.Ub(),p.Ub(),p.Ub(),p.Vb(14,"div",7),p.Vb(15,"div",8),p.Vb(16,"label"),p.Lc(17,"Minutes: "),p.Ub(),p.Vb(18,"input",10),p.fc("ngModelChange",function(e){return t.glueType.minutes=e}),p.Ub(),p.Ub(),p.Ub(),p.Vb(19,"div",7),p.Vb(20,"div",8),p.Vb(21,"label"),p.Lc(22,"RPM/Cycle: "),p.Ub(),p.Vb(23,"input",11),p.fc("ngModelChange",function(e){return t.glueType.rpm=e}),p.Ub(),p.Ub(),p.Ub(),p.Jc(24,tt,5,4,"div",12),p.Ub(),p.Ub(),p.Vb(25,"div",13),p.Vb(26,"button",14),p.fc("click",function(){return t.activeModal.close("Close click")}),p.Lc(27,"Close"),p.Ub(),p.Vb(28,"button",15),p.fc("click",function(){return t.createGlueType()}),p.Lc(29,"Save"),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.Nc(" ",t.title," "),p.Cb(10),p.pc("ngModel",t.glueType.title),p.Cb(5),p.pc("ngModel",t.glueType.minutes),p.Cb(5),p.pc("ngModel",t.glueType.rpm),p.Cb(1),p.pc("ngIf",0!==t.glueType.parentID))},directives:[a.a,a.f,a.i,n.n,T.c],styles:[""]}),e})();const nt=["grid"];function at(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function lt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",10,11),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeKindType(t)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.kindTypeData)("value",null==e.kindType?null:e.kindType.name)("fields",i.fieldsKindType)("allowFiltering",!0)}}let rt=(()=>{class e extends s.a{constructor(e,t,i){super(),this.kindService=e,this.alertify=t,this.route=i,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.fieldsKindType={text:"name",value:"name"},this.filterSettings={type:"Excel"}}ngOnInit(){this.Permission(this.route),this.kind={id:0,name:"",kindTypeID:null},this.getAllKind(),this.getAllKindType()}getAllKind(){this.kindService.getAllKind().subscribe(e=>{this.data=e})}getAllKindType(){this.kindService.getAllKindType().subscribe(e=>{this.kindTypeData=e})}create(){this.kindService.create(this.kind).subscribe(()=>{this.alertify.success("Add Kind Successfully"),this.getAllKind(),this.kind={id:0,name:"",kindTypeID:null},this.kindTypeID=0})}update(){this.kindService.update(this.kind).subscribe(()=>{this.alertify.success("Add Kind Successfully"),this.getAllKind(),this.kind={id:0,name:"",kindTypeID:null},this.kindTypeID=0})}delete(e){this.alertify.confirm("Delete Kind",'Are you sure you want to delete this Kind "'+e+'" ?',()=>{this.kindService.delete(e).subscribe(()=>{this.getAllKind(),this.alertify.success("The kind has been deleted")},e=>{this.alertify.error("Failed to delete the kind")})})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}actionBegin(e){this.grid.toolbarModule.getToolbar(),"beginEdit"===e.requestType&&(this.kindTypeID=e.rowData.kindTypeID),"save"===e.requestType&&("add"===e.action&&(this.kind.id=0,this.kind.name=e.data.name,this.kind.kindTypeID=this.kindTypeID,this.create()),"edit"===e.action&&(this.kind.id=e.data.id,this.kind.name=e.data.name,this.kind.kindTypeID=this.kindTypeID,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}onChangeKindType(e){this.kindTypeID=e.itemData.id}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(z.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-kind"]],viewQuery:function(e,t){if(1&e&&p.Rc(nt,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:15,vars:13,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"],["field","kindType.name","width","200","textAlign","Center",3,"headerText"],["editTemplate",""],[3,"dataSource","value","fields","allowFiltering","change"],["kindTypeDropdownlist",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,at,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Qb(9,"e-column",7),p.kc(10,"translate"),p.Vb(11,"e-column",8),p.kc(12,"translate"),p.Jc(13,lt,2,4,"ng-template",null,9,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),p.Cb(6),p.qc("headerText",p.lc(10,9,"Name")),p.Cb(2),p.qc("headerText",p.lc(12,11,"Type")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c],pipes:[k.c],styles:[""]}),e})();const ct=["grid"];function st(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function ot(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",10),p.fc("ngModelChange",function(e){return t.$implicit.startTime=e})("valueChange",function(t){return p.Ec(e),p.jc().onChangeStartTime(t)}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.startTime)("format","HH:mm")}function dt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",10),p.fc("ngModelChange",function(e){return t.$implicit.endTime=e})("valueChange",function(t){return p.Ec(e),p.jc().onChangeEndTime(t)}),p.Ub()}2&e&&p.pc("ngModel",t.$implicit.endTime)("format","HH:mm")}let ut=(()=>{class e extends s.a{constructor(e,t,i){super(),this.lunchTimeService=e,this.alertify=t,this.route=i,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"}}ngOnInit(){this.Permission(this.route),this.lunchTime={},this.getAllLunchTime()}getAllLunchTime(){this.lunchTimeService.getAllLunchTime().subscribe(e=>{this.data=e})}create(){this.lunchTimeService.create(this.lunchTime).subscribe(()=>{this.alertify.success("Add LunchTime Successfully"),this.getAllLunchTime(),this.lunchTime={}})}update(){this.lunchTimeService.update(this.lunchTime).subscribe(()=>{this.alertify.success("Add LunchTime Successfully"),this.getAllLunchTime(),this.lunchTime={}})}delete(e){this.alertify.confirm("Delete LunchTime",'Are you sure you want to delete this LunchTime "'+e+'" ?',()=>{this.lunchTimeService.delete(e).subscribe(()=>{this.getAllLunchTime(),this.alertify.success("The lunchTime has been deleted")},e=>{this.alertify.error("Failed to delete the lunchTime")})})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}onChangeStartTime(e){this.startTime=e}onChangeEndTime(e){this.endTime=e}actionBegin(e){"save"===e.requestType&&("add"===e.action&&(this.lunchTime.startTime=this.startTime,this.lunchTime.endTime=this.endTime,this.create()),"edit"===e.action&&(this.lunchTime=e.data,this.lunchTime.startTime=this.startTime,this.lunchTime.endTime=this.endTime,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"edit"===e.requestType&&(e.form.elements.namedItem("startTime").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(Se),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-lunch-time"]],viewQuery:function(e,t){if(1&e&&p.Rc(ct,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:15,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","startTime","type","date","format","HH:mm","headerText","Start Time","width","200","textAlign","Center"],["editTemplate",""],["field","endTime","type","date","format","HH:mm","headerText","End Time","width","200","textAlign","Center"],[2,"width","100%",3,"ngModel","format","ngModelChange","valueChange"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,st,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Vb(9,"e-column",7),p.Jc(10,ot,1,2,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(12,"e-column",9),p.Jc(13,dt,1,2,"ng-template",null,8,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,ve.a,a.f,a.i],styles:[""]}),e})(),ht=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.mailingSource=new o.a(0),this.currentModalName=this.mailingSource.asObservable()}getAllMailing(){return this.http.get(this.baseUrl+"Mailing/GetAll",{})}create(e){return this.http.post(this.baseUrl+"Mailing/Create",e)}createRange(e){return this.http.post(this.baseUrl+"Mailing/createRange",e)}updateRange(e){return this.http.put(this.baseUrl+"Mailing/updateRange",e)}update(e){return this.http.put(this.baseUrl+"Mailing/Update",e)}delete(e){return this.http.delete(this.baseUrl+"Mailing/Delete/"+e)}deleteRange(e){return this.http.post(this.baseUrl+"Mailing/DeleteRange/",e)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var gt=i("10VE");const pt=["grid"];function bt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function mt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",12),p.fc("change",function(t){return p.Ec(e),p.jc().onReport(t)}),p.Ub()}if(2&e){const e=p.jc();p.pc("dataSource",e.reportOption)("value",e.reportItem)}}function ft(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",13),p.fc("change",function(t){return p.Ec(e),p.jc().onFrequency(t)}),p.Ub()}if(2&e){const e=p.jc();p.pc("dataSource",e.frequencyOption)("value",e.frequencyItem)}}function yt(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.timeSend,"HH:mm")," ")}function St(e,t){if(1&e){const e=p.Wb();p.Vb(0,"kendo-timepicker",16),p.fc("valueChange",function(t){return p.Ec(e),p.jc(2).onChangeTimeSend(t)}),p.Ub()}if(2&e){const e=p.jc().$implicit;p.pc("value",e.timeSend)("format","hh:mm a")}}function vt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-datetimepicker",17),p.fc("change",function(t){return p.Ec(e),p.jc(2).onChangeDatetimeSend(t)}),p.Ub()}if(2&e){const e=p.jc().$implicit;p.pc("value",e.timeSend)}}function xt(e,t){if(1&e&&(p.Jc(0,St,1,2,"kendo-timepicker",14),p.Jc(1,vt,1,1,"ejs-datetimepicker",15)),2&e){const e=p.jc();p.pc("ngIf","Daily"===e.frequencyItem),p.Cb(1),p.pc("ngIf","Daily"!==e.frequencyItem)}}function wt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit;p.Nc(" ",null==e||null==e.userNames?null:e.userNames.join(", ")," ")}}function Ct(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-multiselect",18),p.fc("removing",function(t){return p.Ec(e),p.jc().removing(t)})("select",function(t){return p.Ec(e),p.jc().onSelectUsername(t)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.userData)("mode",i.box)("value",e.userIDList)("fields",i.fields)}}let Tt=(()=>{class e{constructor(e,t,i,n){this.mailingService=e,this.alertify=t,this.datePipe=i,this.buildingUserService=n,this.data=[],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"},this.frequencyOption=["Daily","Weekly","Monthly"],this.frequencyItem="",this.reportOption=["Done List","Cost","Achievement Rate"],this.reportItem="",this.fields={text:"username",value:"id"},this.box="Box",this.timeSend=new Date,this.datetimeSend=new Date,this.userIDList=[],this.userList=[]}ngOnInit(){this.mailing={id:0,name:""},this.getAllMailing()}getAllUsers(){this.buildingUserService.getAllUsers(1,1e3).subscribe(e=>{const t=e.result.map(e=>({id:e.id,username:e.username,email:e.email}));this.userData=t})}getAllMailing(){this.mailingService.getAllMailing().subscribe(e=>{this.data=e.map(e=>({id:e.id,email:e.email,userID:e.userID,userName:e.userName,frequency:e.frequency,userNames:e.userNames,report:e.report,userIDList:e.userIDList,userList:e.userList,pathName:e.pathName,timeSend:new Date(e.timeSend)})),this.getAllUsers()})}create(){this.mailingService.create(this.mailing).subscribe(()=>{this.alertify.success("Add mailing Successfully"),this.getAllMailing(),this.mailing.name=""})}onReport(e){this.reportItem=e.value}onFrequency(e){this.frequencyItem=e.value}onChangeTimeSend(e){this.timeSend=e}onChangeDatetimeSend(e){this.datetimeSend=e.value}removing(e){const t=this.userIDList.filter(t=>t!==e.itemData.id);this.userIDList=t,this.userList=this.userList.filter(t=>t.id!==e.itemData.id)}onSelectUsername(e){const t=e.itemData;this.userIDList.push(t.id),this.userList.push({mailingID:0,id:t.id,email:t.email})}update(){this.mailingService.update(this.mailing).subscribe(()=>{this.alertify.success("Add mailing Successfully"),this.getAllMailing(),this.mailing.name=""})}delete(e){this.alertify.confirm("Delete mailing","Are you sure you want to delete this mailings ?",()=>{this.mailingService.deleteRange(e).subscribe(()=>{this.getAllMailing(),this.alertify.success("The mailing has been deleted")},e=>{this.alertify.error("Failed to delete the mailing")})})}createRange(e){this.mailingService.createRange(e).subscribe(()=>{this.alertify.success("Add mailing Successfully"),this.getAllMailing(),this.clearForm()},e=>{this.alertify.error(e),this.getAllMailing()})}clearForm(){this.reportItem="",this.frequencyItem="",this.timeSend=new Date,this.datetimeSend=new Date,this.mailing={}}updateRange(e){this.mailingService.updateRange(e).subscribe(()=>{this.alertify.success("Add mailing Successfully"),this.getAllMailing(),this.clearForm()},e=>{this.alertify.error(e),this.getAllMailing()})}toolbarClick(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}actionBegin(e){if("beginEdit"===e.requestType){const t=e.rowData;this.userIDList=t.userIDList,this.reportItem=t.report,this.frequencyItem=t.frequency,this.timeSend=t.timeSend,this.datetimeSend=t.timeSend,this.userIDList=t.userIDList,this.userList=t.userList||[],"Daily"===t.frequency?this.timeSend=t.timeSend:this.datetimeSend=t.timeSend}if("save"===e.requestType){if("add"===e.action){0===this.userList.length&&(this.alertify.warning("Please select recipients",!0),e.cancel=!0);const t=[];for(const e of this.userList){const i={report:this.reportItem,frequency:this.frequencyItem,timeSend:this.datePipe.transform("Daily"===this.frequencyItem||"Monthly"===this.frequencyItem?this.timeSend:this.datetimeSend,"MM-dd-yyyy HH:mm"),userID:e.id,id:e.mailingID,email:e.email};t.push(i)}this.createRange(t)}if("edit"===e.action){const t=e.data,i=[];for(const e of this.userList){const n={report:this.reportItem,frequency:this.frequencyItem,timeSend:this.datePipe.transform("Daily"===this.frequencyItem?this.timeSend:this.datetimeSend,"MM-dd-yyyy HH:mm"),userID:e.id,id:e.mailingID,email:e.email,pathName:t.pathName};i.push(n)}this.updateRange(i)}}if("delete"===e.requestType){const t=e.data[0],i=[];for(const e of t.userList)i.push({report:t.reportItem,frequency:t.frequencyItem,timeSend:t.timeSend,userID:e.id,id:e.mailingID,email:e.email,pathName:t.pathName});this.delete(i)}}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(ht),p.Pb(m.a),p.Pb(n.e),p.Pb(fe.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-mailing"]],viewQuery:function(e,t){if(1&e&&p.Rc(pt,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.Bb([n.e])],decls:25,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["id","grid","gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","50","textAlign","Center","isPrimaryKey","true"],["template",""],["field","report","headerText","Report","isPrimaryKey","true","width","100","textAlign","Center"],["editTemplate",""],["field","frequency","headerText","Frequency","isPrimaryKey","true","width","100","textAlign","Center"],["field","timeSend","headerText","Time Send","width","100","textAlign","Center"],["field","userNames","headerText","Recipient","textAlign","Left"],["id","reportOption",3,"dataSource","value","change"],["id","frequencyOption",3,"dataSource","value","change"],["style","width: 150px;",3,"value","format","valueChange",4,"ngIf"],["placeholder","Enter date time",3,"value","change",4,"ngIf"],[2,"width","150px",3,"value","format","valueChange"],["placeholder","Enter date time",3,"value","change"],["placeholder","Select Username",3,"dataSource","mode","value","fields","removing","select"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,bt,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Vb(9,"e-column",7),p.Jc(10,mt,1,2,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(12,"e-column",9),p.Jc(13,ft,1,2,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(15,"e-column",10),p.Jc(16,yt,2,4,"ng-template",null,6,p.Kc),p.Jc(18,xt,2,2,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(20,"e-column",11),p.Jc(21,wt,1,1,"ng-template",null,6,p.Kc),p.Jc(23,Ct,1,4,"ng-template",null,8,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c,n.n,ve.a,gt.c,T.f],pipes:[n.e],styles:[""]}),e})();var Dt=i("6U7I");const Ut=["grid"];function kt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}let It=(()=>{class e extends s.a{constructor(e,t,i){super(),this.materialService=e,this.alertify=t,this.route=i,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"}}ngOnInit(){this.Permission(this.route),this.material={id:0,name:""},this.getAllMaterial()}getAllMaterial(){this.materialService.getAllMaterial().subscribe(e=>{this.data=e})}create(){this.materialService.create(this.material).subscribe(()=>{this.alertify.success("Add Material Successfully"),this.getAllMaterial(),this.material.name=""})}update(){this.materialService.update(this.material).subscribe(()=>{this.alertify.success("Add Material Successfully"),this.getAllMaterial(),this.material.name=""})}delete(e){this.alertify.confirm("Delete Material",'Are you sure you want to delete this Material "'+e+'" ?',()=>{this.materialService.delete(e).subscribe(()=>{this.getAllMaterial(),this.alertify.success("The material has been deleted")},e=>{this.alertify.error("Failed to delete the material")})})}toolbarClick(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}actionBegin(e){"save"===e.requestType&&("add"===e.action&&(this.material.id=0,this.material.name=e.data.name,this.create()),"edit"===e.action&&(this.material.id=e.data.id,this.material.name=e.data.name,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(Dt.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-material"]],viewQuery:function(e,t){if(1&e&&p.Rc(Ut,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","id","grid","allowPaging","true","showColumnMenu","true","allowResizing","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,kt,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Qb(9,"e-column",7),p.kc(10,"translate"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),p.Cb(6),p.qc("headerText",p.lc(10,8,"Name")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a],pipes:[k.c],styles:[""]}),e})();var Pt=i("MBJp");const Mt=["grid"];function Vt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}let At=(()=>{class e extends s.a{constructor(e,t,i){super(),this.partService=e,this.alertify=t,this.route=i,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"}}ngOnInit(){this.Permission(this.route),this.part={id:0,name:""},this.getAllPart()}getAllPart(){this.partService.getAllPart().subscribe(e=>{this.data=e})}create(){this.partService.create(this.part).subscribe(()=>{this.alertify.success("Add Part Successfully"),this.getAllPart(),this.part.name=""})}update(){this.partService.update(this.part).subscribe(()=>{this.alertify.success("Add Part Successfully"),this.getAllPart(),this.part.name=""})}delete(e){this.alertify.confirm("Delete Part",'Are you sure you want to delete this Part "'+e+'" ?',()=>{this.partService.delete(e).subscribe(()=>{this.getAllPart(),this.alertify.success("The part has been deleted")},e=>{this.alertify.error("Failed to delete the part")})})}toolbarClick(e){switch(e.item.id){case"grid_excelexport":this.grid.excelExport()}}actionBegin(e){"save"===e.requestType&&("add"===e.action&&(this.part.id=0,this.part.name=e.data.name,this.create()),"edit"===e.action&&(this.part.id=e.data.id,this.part.name=e.data.name,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(Pt.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-part"]],viewQuery:function(e,t){if(1&e&&p.Rc(Mt,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","id","grid","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,Vt,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Qb(9,"e-column",7),p.kc(10,"translate"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),p.Cb(6),p.qc("headerText",p.lc(10,8,"Name")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a],pipes:[k.c],styles:[""]}),e})();const Bt=["gridBuilding"],Et=["gridSetting"];function Lt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function jt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function Ot(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",18),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc().onChangeMachine(i,n)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.machines)("value",e.machineType)("allowFiltering",!0)}}function Nt(e,t){1&e&&p.Lc(0),2&e&&p.Nc(" ",t.$implicit.machineType," ")}function $t(e,t){if(1&e&&p.Lc(0),2&e){const e=p.jc();p.Nc(" ",e.getUnitItem(e.unit)," ")}}function Rt(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.getUnitItem(e.unit)," ")}}let qt=(()=>{class e{constructor(e,t,i){this.buildingService=e,this.alertify=t,this.settingService=i,this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.fields={text:"text",value:"value"},this.WeighingScale30KG=0,this.WeighingScale3KG=1,this.machines=["Weighing Scale 30KG","Weighing Scale 3KG"]}ngOnInit(){this.units=[{value:"k",text:"Kilogram"},{value:"g",text:"Gram"}],this.filterSettings={type:"Excel"},this.toolbar=["Excel Export","Search"],this.loadData()}getBuildingForSetting(){return this.buildingService.getBuildingsForSetting().toPromise()}getSettingByBuilding(e){return this.settingService.getMachineByBuilding(e).toPromise()}onChange(e){}onChangeMachine(e,t){this.machineType=e.value,this.unit=this.machineType===this.machines[this.WeighingScale30KG]?"k":this.machineType===this.machines[this.WeighingScale3KG]?"g":""}editSetting(e){return this.settingService.updateMachine(e).toPromise()}createSetting(e){return this.settingService.addMachine(e).toPromise()}deleteSetting(e){return this.settingService.deleteMachine(e).toPromise()}loadData(){return Object(ae.a)(this,void 0,void 0,function*(){try{this.buildings=yield this.getBuildingForSetting()}catch(e){this.alertify.error(e+"")}})}edit(e){return Object(ae.a)(this,void 0,void 0,function*(){const t={id:e.id,machineType:this.machineType,unit:this.unit,buildingID:this.buildingID,machineID:"k"===this.unit?2:1};try{yield this.editSetting(t),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID),this.unit="",this.machineType=""}catch(i){this.alertify.error(i+"")}})}add(e){return Object(ae.a)(this,void 0,void 0,function*(){const e={id:0,unit:this.unit,machineType:this.machineType,buildingID:this.buildingID,machineID:"k"===this.unit?2:1};try{yield this.createSetting(e),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID),this.unit="",this.machineType=""}catch(t){this.alertify.error(t+"")}})}delete(e){return Object(ae.a)(this,void 0,void 0,function*(){try{yield this.deleteSetting(e),this.alertify.success("Success"),this.settings=yield this.getSettingByBuilding(this.buildingID)}catch(t){this.alertify.error(t+"")}})}actionCompleteSetting(e){"add"===e.requestType&&(e.form.elements.namedItem("#").disabled=!0)}actionBeginSetting(e){return Object(ae.a)(this,void 0,void 0,function*(){"beginEdit"===e.requestType&&(this.machineType=e.rowData.machineType),"save"===e.requestType&&("add"===e.action&&(yield this.add(e.data)),"edit"===e.action&&(yield this.edit(e.data))),"delete"===e.requestType&&(yield this.delete(e.data[0].id))})}rowSelectedBuilding(e){return Object(ae.a)(this,void 0,void 0,function*(){e.isInteracted&&(this.toolbarOptions=["Add","Edit","Delete","Cancel","Excel Export","Search"],this.buildingID=e.data.id,this.settings=yield this.getSettingByBuilding(this.buildingID))})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.gridSetting.excelExport()}}toolbarClickBuilding(e){switch(e.item.text){case"Excel Export":this.gridBuilding.excelExport()}}NO(e){return+e+1}getUnitItem(e){var t;return(null===(t=this.units.filter(t=>t.value===e)[0])||void 0===t?void 0:t.text)||"N/A"}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(F.a),p.Pb(m.a),p.Pb(le.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-scaling-setting"]],viewQuery:function(e,t){if(1&e&&(p.Rc(Bt,1),p.Rc(Et,1)),2&e){let e;p.Ac(e=p.gc())&&(t.gridBuilding=e.first),p.Ac(e=p.gc())&&(t.gridSetting=e.first)}},decls:33,vars:15,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],[1,"row"],[1,"col-md-4"],["gridLines","Both","allowFiltering","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","toolbar","rowSelected","toolbarClick"],["gridBuilding",""],["field","#","textAlign","Center","headerText","#","width","40"],["template",""],["field","name","textAlign","Center","headerText","Building","width","100"],[1,"col-md-8"],["gridLines","Both","allowFiltering","true","allowPaging","true","allowResizing","true","showColumnMenu","true",3,"dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","toolbar","editSettings","actionBegin","actionComplete","toolbarClick"],["gridSetting",""],["field","#","isPrimaryKey","true","textAlign","Center","headerText","#","width","40"],["field","machineType","textAlign","Center","headerText","Machine Type","width","130"],["editTemplate",""],["field","unit","textAlign","Center","headerText","Unit","width","100"],[1,"card-footer"],[3,"dataSource","value","allowFiltering","change"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"h2"),p.Lc(3),p.kc(4,"translate"),p.Ub(),p.Ub(),p.Vb(5,"div",2),p.Vb(6,"div",3),p.Vb(7,"div",4),p.Vb(8,"ejs-grid",5,6),p.fc("rowSelected",function(e){return t.rowSelectedBuilding(e)})("toolbarClick",function(e){return t.toolbarClickBuilding(e)}),p.Vb(10,"e-columns"),p.Vb(11,"e-column",7),p.Jc(12,Lt,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(14,"e-column",9),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"div",10),p.Vb(16,"ejs-grid",11,12),p.fc("actionBegin",function(e){return t.actionBeginSetting(e)})("actionComplete",function(e){return t.actionCompleteSetting(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(18,"e-columns"),p.Vb(19,"e-column",13),p.Jc(20,jt,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(22,"e-column",14),p.Jc(23,Ot,1,3,"ng-template",null,15,p.Kc),p.Jc(25,Nt,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(27,"e-column",16),p.Jc(28,$t,1,1,"ng-template",null,15,p.Kc),p.Jc(30,Rt,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(32,"div",17),p.Ub()),2&e&&(p.Cb(3),p.Mc(p.lc(4,13,"Scaling")),p.Cb(5),p.pc("dataSource",t.buildings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbar),p.Cb(8),p.pc("dataSource",t.settings)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("toolbar",t.toolbarOptions)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c],pipes:[k.c],styles:[""]}),e})();i("YW37"),new u.e({"Content-Type":"application/json",Authorization:`Bearer ${localStorage.getItem("token")}`});let Kt=(()=>{class e{constructor(e){this.http=e,this.baseUrl=h.a.apiUrlEC,this.ModalNameSource=new o.a(0),this.currentModalName=this.ModalNameSource.asObservable()}getAllSubpackageCapacity(){return this.http.get(this.baseUrl+"SubpackageCapacity/GetAll",{})}create(e){return this.http.post(this.baseUrl+"SubpackageCapacity/Create",e)}update(e){return this.http.put(this.baseUrl+"SubpackageCapacity/Update",e)}delete(e){return this.http.delete(this.baseUrl+"SubpackageCapacity/Delete/"+e)}}return e.\u0275fac=function(t){return new(t||e)(p.cc(u.b))},e.\u0275prov=p.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const Jt=["grid"];function Ft(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}let Gt=(()=>{class e{constructor(e,t){this.subpackageCapacityService=e,this.alertify=t,this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!1,allowDeleting:!1,mode:"Normal"},this.toolbarOptions=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.filterSettings={type:"Excel"}}ngOnInit(){this.subpackageCapacity={id:0,capacity:""},this.getAllSubpackageCapacity()}getAllSubpackageCapacity(){this.subpackageCapacityService.getAllSubpackageCapacity().subscribe(e=>{this.data=e})}create(){this.subpackageCapacityService.create(this.subpackageCapacity).subscribe(()=>{this.alertify.success("Add SubpackageCapacity Successfully"),this.getAllSubpackageCapacity(),this.subpackageCapacity.name=""})}update(){this.subpackageCapacityService.update(this.subpackageCapacity).subscribe(()=>{this.alertify.success("Add SubpackageCapacity Successfully"),this.getAllSubpackageCapacity(),this.subpackageCapacity.name=""})}delete(e){this.alertify.confirm("Delete SubpackageCapacity",'Are you sure you want to delete this SubpackageCapacity "'+e+'" ?',()=>{this.subpackageCapacityService.delete(e).subscribe(()=>{this.getAllSubpackageCapacity(),this.alertify.success("The subpackageCapacity has been deleted")},e=>{this.alertify.error("Failed to delete the subpackageCapacity")})})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}actionBegin(e){"save"===e.requestType&&("add"===e.action&&(this.subpackageCapacity.id=0,this.subpackageCapacity.capacity=e.data.capacity,this.create()),"edit"===e.action&&(this.subpackageCapacity.id=e.data.id,this.subpackageCapacity.capacity=e.data.capacity,this.update())),"delete"===e.requestType&&this.delete(e.data[0].id)}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("capacity").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(Kt),p.Pb(m.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-subpackage-capacity"]],viewQuery:function(e,t){if(1&e&&p.Rc(Jt,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},decls:10,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","capacity","headerText","Capacity","width","200","textAlign","Center"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,Ft,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Qb(9,"e-column",7),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a],styles:[""]}),e})();var zt=i("vrRs");const Qt=["grid"];function Ht(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}let Yt=(()=>{class e extends s.a{constructor(e,t,i,n){super(),this.alertify=e,this.modalService=t,this.ingredientService=i,this.route=n,this.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:10},this.toolbarOptions=["ExcelExport","Add","Edit","Delete","Cancel","Search"],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"},this.filterSettings={type:"Excel"},this.modalSup={id:0,name:""},this.textGlueLineName="Select ",this.supplier=[]}ngOnInit(){this.Permission(this.route),this.getAllSupplier()}getAllSupplier(){this.ingredientService.getAllSupplier().subscribe(e=>{this.supplier=e})}actionBegin(e){"save"===e.requestType&&("edit"===e.action&&(this.modalSup.id=e.data.id||0,this.modalSup.name=e.data.name,this.update(this.modalSup)),"add"===e.action&&(e.data.name?(this.modalSup.id=0,this.modalSup.name=e.data.name,this.add(this.modalSup)):e.cancel=!0)),"delete"===e.requestType&&this.delete(e.data[0].id)}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}onDoubleClick(e){this.setFocus=e.column}delete(e){this.alertify.confirm("Delete Supplier",'Are you sure you want to delete this Supplier "'+e+'" ?',()=>{this.ingredientService.deleteSub(e).subscribe(()=>{this.getAllSupplier(),this.alertify.success("Supplier has been deleted")},e=>{this.alertify.error("Failed to delete the supplier")})})}update(e){this.ingredientService.updateSub(e).subscribe(e=>{this.alertify.success("Updated successfully!"),this.getAllSupplier()})}add(e){this.ingredientService.createSub(e).subscribe(()=>{this.alertify.success("Add supplier successfully"),this.getAllSupplier(),this.modalSup.name=""})}save(){this.ingredientService.createSub(this.modalSup).subscribe(()=>{this.alertify.success("Add supplier successfully"),this.getAllSupplier(),this.modalSup.name=""})}NO(e){return(this.grid.pageSettings.currentPage-1)*this.grid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(m.a),p.Pb(x.b),p.Pb(zt.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-suppiler"]],viewQuery:function(e,t){if(1&e&&p.Rc(Qt,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:11,vars:10,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","onDoubleClick","actionComplete","toolbarClick"],["grid",""],["field","id","isPrimaryKey","true","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","name","width","200","textAlign","Center",3,"headerText"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-grid",3,4),p.fc("actionBegin",function(e){return t.actionBegin(e)})("onDoubleClick",function(e){return t.onDoubleClick(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(5,"e-columns"),p.Vb(6,"e-column",5),p.Jc(7,Ht,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Qb(9,"e-column",7),p.kc(10,"translate"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("toolbar",t.toolbarOptions)("dataSource",t.supplier)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings),p.Cb(6),p.qc("headerText",p.lc(10,8,"Supplier Name")))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a],pipes:[k.c],styles:[""]}),e})();const Wt=["treegrid"],_t=["buildingModal"];function Xt(e,t){if(1&e){const e=p.Wb();p.Vb(0,"ejs-dropdownlist",12),p.fc("change",function(t){return p.Ec(e),p.jc().onChangeMethod(t)}),p.Ub()}if(2&e){const e=t.$implicit,i=p.jc();p.pc("dataSource",i.methods)("fields",i.fields)("value",e.method)("allowFiltering",!0)}}function Zt(e,t){1&e&&p.Lc(0),2&e&&p.Nc(" ",t.$implicit.entity.minutes," minutes ")}let ei=(()=>{class e extends s.a{constructor(e,t,i,n){super(),this.buildingService=e,this.modalService=t,this.alertify=i,this.route=n,this.methods=[{text:"Stir",value:"Stir"},{text:"Shaking",value:"Shaking"}],this.fields={text:"text",value:"value"}}ngOnInit(){this.PermissionForTreeGrid(this.route),this.editing={allowDeleting:!0,allowEditing:!0,mode:"Row"},this.optionTreeGrid(),this.onService(),this.getGlueTypesAsTreeView()}onChangeMethod(e){this.method=e.itemData.value}optionTreeGrid(){this.pageSettings={pageSize:20},this.editparams={params:{format:"n"}}}created(){this.getGlueTypesAsTreeView()}onService(){this.buildingService.currentMessage.subscribe(e=>{200===e&&this.getGlueTypesAsTreeView()})}toolbarClick(e){switch(e.item.text){case"Add":e.cancel=!0,this.openMainModal();break;case"PDF Export":this.treeGridObj.pdfExport({hierarchyExportMode:"All"});break;case"Excel Export":this.treeGridObj.excelExport({hierarchyExportMode:"All"})}}contextMenuOpen(e){2===e.rowInfo.rowData.entity.level&&(e.cancel=!0)}contextMenuClick(e){const t=e.rowInfo.rowData.entity;switch(e.item.id){case"DeleteOC":this.delete(t.id);break;case"Add-Sub-Item":this.openSubModal()}}delete(e){this.alertify.confirm("Delete Glue Type",'Are you sure you want to delete this GlueTypeID "'+e+'" ?',()=>{this.buildingService.delete(e).subscribe(e=>{this.getGlueTypesAsTreeView(),this.alertify.success("The glue-type has been deleted!!!")},e=>{this.alertify.error("Failed to delete the glue-type!!!")})})}actionBegin(e){if("save"===e.requestType&&"edit"===e.action){const t=e.data.entity;this.edit.title=t.title,this.edit.minutes=t.minutes,this.edit.rpm=t.rpm,this.edit.level=t.level,this.edit.id=t.id,this.edit.parentID=t.parentID,this.edit.method=this.method,this.rename()}"delete"===e.requestType&&this.delete(e.data[0].entity.id)}rowSelected(e){const t=e.data.entity;this.edit={id:t.id,title:t.title,level:t.level,parentID:t.parentID,rpm:t.rpm,minutes:t.minutes,method:this.method},this.glueType={id:0,title:"",parentID:t.id,level:null===t.parentID?t.level+1:1,rpm:t.rpm,minutes:t.minutes,method:this.method}}getGlueTypesAsTreeView(){this.buildingService.getGlueTypesAsTreeView().subscribe(e=>{this.data=e})}rowDB(e){}clearFrom(){this.method="",this.glueType={id:0,title:"",parentID:0,level:0,rpm:0,minutes:0,method:this.method}}queryCellInfo(e){"entity.title"===e.column.field&&1===e.data.entity.level&&(e.colSpan=4)}rename(){this.buildingService.update(this.edit).subscribe(e=>{this.getGlueTypesAsTreeView(),this.clearFrom(),this.alertify.success("The glue-type has been changed!!!")})}openMainModal(){this.clearFrom();const e=this.modalService.open(it,{size:"lg"});e.componentInstance.title="Add Glue Type Parent",e.componentInstance.glueType=this.glueType,e.result.then(e=>{},e=>{})}openSubModal(){const e=this.modalService.open(it,{size:"lg"});e.componentInstance.title="Add Glue Type Child",e.componentInstance.glueType=this.glueType,e.result.then(e=>{},e=>{})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(et),p.Pb(x.b),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-glue-type"]],viewQuery:function(e,t){if(1&e&&(p.Rc(Wt,1),p.Rc(_t,1)),2&e){let e;p.Ac(e=p.gc())&&(t.treeGridObj=e.first),p.Ac(e=p.gc())&&(t.buildingModal=e.first)}},features:[p.Bb([C.e,C.g,C.f]),p.zb],decls:15,vars:6,consts:[[1,"col-md-12"],[1,"card"],[1,"card-body","table-responsive","p-0"],["allowSorting","true","gridLines","Both","childMapping","childNodes","allowExcelExport","true","allowPdfExport","true",3,"dataSource","treeColumnIndex","editSettings","contextMenuItems","toolbar","contextMenuClick","contextMenuOpen","toolbarClick","created","actionBegin","queryCellInfo","rowDataBound","rowSelected"],["treegrid",""],["field","entity.level","textAlign","Center","width","80","isPrimaryKey","true","headerText","Level",3,"allowEditing"],["field","entity.title","textAlign","Left","headerText","Glue Type"],["field","entity.method","textAlign","Center","headerText","Method"],["editTemplate",""],["field","entity.minutes","textAlign","Center","headerText","Minutes"],["template",""],["field","entity.rpm","textAlign","Center","headerText","RPM/Cycle"],[3,"dataSource","fields","value","allowFiltering","change"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"ejs-treegrid",3,4),p.fc("contextMenuClick",function(e){return t.contextMenuClick(e)})("contextMenuOpen",function(e){return t.contextMenuOpen(e)})("toolbarClick",function(e){return t.toolbarClick(e)})("created",function(){return t.created()})("actionBegin",function(e){return t.actionBegin(e)})("queryCellInfo",function(e){return t.queryCellInfo(e)})("rowDataBound",function(e){return t.rowDB(e)})("rowSelected",function(e){return t.rowSelected(e)}),p.Vb(5,"e-columns"),p.Qb(6,"e-column",5),p.Qb(7,"e-column",6),p.Vb(8,"e-column",7),p.Jc(9,Xt,1,4,"ng-template",null,8,p.Kc),p.Ub(),p.Vb(11,"e-column",9),p.Jc(12,Zt,1,1,"ng-template",null,10,p.Kc),p.Ub(),p.Qb(14,"e-column",11),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(3),p.pc("dataSource",t.data)("treeColumnIndex",1)("editSettings",t.editSettingsTree)("contextMenuItems",t.contextMenuItems)("toolbar",t.toolbarOptionsTree),p.Cb(3),p.pc("allowEditing",!1))},directives:[C.i,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,T.c],styles:[".bgcolor td{background-color:#d1d1d1}.e-grid .e-altrow{background-color:#d6d8db}"],encapsulation:2}),e})();var ti=i("WAEy"),ii=i("qLS9"),ni=i("H552");const ai=["importModal"],li=["barcode"],ri=["printGrid"],ci=["ingredientGrid"];function si(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",7),p.Vb(1,"button",8),p.fc("click",function(){return p.Ec(e),p.jc().backList()}),p.Lc(2,"Back List"),p.Ub(),p.Ub()}}function oi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",7),p.Vb(1,"button",8),p.fc("click",function(){return p.Ec(e),p.jc().printData()}),p.Qb(2,"i",9),p.Lc(3," Print"),p.Ub(),p.Ub()}}function di(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Mc(p.mc(1,1,t.$implicit.productionDate,"yyyyMMdd"))}function ui(e,t){if(1&e&&(p.Vb(0,"tr"),p.Vb(1,"td",25),p.Qb(2,"ejs-qrcodegenerator",26),p.kc(3,"date"),p.Ub(),p.Vb(4,"td",27),p.Vb(5,"div"),p.Vb(6,"label"),p.Lc(7,"Name:"),p.Ub(),p.Lc(8),p.Ub(),p.Vb(9,"div"),p.Vb(10,"label"),p.Lc(11,"QR Code: "),p.Ub(),p.Lc(12),p.kc(13,"date"),p.Ub(),p.Vb(14,"div"),p.Vb(15,"label"),p.Lc(16,"MFG:"),p.Ub(),p.Lc(17),p.kc(18,"date"),p.Ub(),p.Vb(19,"div"),p.Vb(20,"label"),p.Lc(21,"EXP:"),p.Ub(),p.Lc(22),p.Ub(),p.Ub(),p.Ub()),2&e){const e=p.jc().$implicit,t=p.jc(2);p.Cb(2),p.tc("value","",p.mc(3,11,e.productionDate,"yyyyMMdd"),"-",e.batch,"-",e.code,""),p.pc("id",e.code)("displayText",t.displayTextMethod),p.Cb(6),p.Nc(" ",e.name,""),p.Cb(4),p.Pc(" ",p.mc(13,14,e.productionDate,"yyyyMMdd"),"-",e.batch,"-",e.code,""),p.Cb(5),p.Nc(" ",p.mc(18,17,e.productionDate,"yyyyMMdd"),""),p.Cb(5),p.Nc(" ",e.exp,"")}}function hi(e,t){if(1&e&&(p.Tb(0),p.Jc(1,ui,23,20,"tr",4),p.Sb()),2&e){const e=p.jc(2);p.Cb(1),p.pc("ngIf",e.dataPicked.length>0)}}const gi=function(){return{checkboxMode:"ResetOnRowClick"}};function pi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",10),p.Vb(1,"div",11),p.Vb(2,"ejs-grid",12,13),p.fc("rowDeselected",function(t){return p.Ec(e),p.jc().rowDeselected(t)})("actionBegin",function(t){return p.Ec(e),p.jc().actionBegin(t)})("rowDeselected",function(t){return p.Ec(e),p.jc().rowDeselected(t)})("rowSelected",function(t){return p.Ec(e),p.jc().rowSelected(t)})("toolbarClick",function(t){return p.Ec(e),p.jc().toolbarClickPrint(t)}),p.Vb(4,"e-columns"),p.Qb(5,"e-column",14),p.Qb(6,"e-column",15),p.Qb(7,"e-column",16),p.Qb(8,"e-column",17),p.Vb(9,"e-column",18),p.Jc(10,di,2,4,"ng-template",null,19,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(12,"div",20),p.Vb(13,"table",21),p.Vb(14,"thead",22),p.Vb(15,"tr"),p.Vb(16,"th",23),p.Lc(17,"QR Code"),p.Ub(),p.Ub(),p.Ub(),p.Vb(18,"tbody"),p.Jc(19,hi,2,1,"ng-container",24),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(2),p.pc("dataSource",e.dataPrint)("allowSelection",!0)("selectionSettings",p.uc(11,gi))("allowExcelExport",!0)("editSettings",e.editSettings)("enableHover",!1)("allowRowDragAndDrop",!0)("toolbar",e.toolbar)("rowDropSettings",e.srcDropOptions)("allowSorting",!0),p.Cb(17),p.pc("ngForOf",e.dataPicked)}}function bi(e,t){1&e&&p.Lc(0),2&e&&p.Nc("",t.$implicit.voc," %")}function mi(e,t){1&e&&p.Lc(0),2&e&&p.Nc("",t.$implicit.daysToExpiration," days")}function fi(e,t){1&e&&p.Lc(0),2&e&&p.Nc("",t.$implicit.expiredTime," hours")}function yi(e,t){1&e&&p.Lc(0),2&e&&p.Nc("",t.$implicit.unit," kg")}function Si(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit;p.Mc(""===e.glueType?"N/A":e.glueType)}}function vi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",46),p.Vb(1,"a",47),p.Qb(2,"i",48),p.Ub(),p.Ub(),p.Vb(3,"div",49),p.Vb(4,"button",50),p.fc("click",function(){p.Ec(e);const i=t.$implicit;return p.jc(2).openIngredientEditModalComponent(i)}),p.Qb(5,"i",51),p.Ub(),p.Ub(),p.Vb(6,"div",52),p.Vb(7,"button",53),p.fc("click",function(){p.Ec(e);const i=t.$implicit;return p.jc(2).delete(i)}),p.Qb(8,"i",54),p.Ub(),p.Ub()}if(2&e){const e=t.$implicit;p.Cb(1),p.tc("routerLink","/ec/setting/chemical/print-qrcode/",e.id,"/",e.code,"/",e.name,"")}}function xi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div"),p.Vb(1,"div",10),p.Vb(2,"div",28),p.Vb(3,"div",29),p.Vb(4,"ul",30),p.Vb(5,"li",31),p.Lc(6),p.Ub(),p.Vb(7,"li",31),p.Lc(8),p.Ub(),p.Vb(9,"li",31),p.Lc(10),p.Ub(),p.Ub(),p.Ub(),p.Vb(11,"span",32),p.Lc(12),p.Ub(),p.Ub(),p.Ub(),p.Vb(13,"ejs-grid",33,34),p.fc("dataBound",function(){return p.Ec(e),p.jc().dataBound()})("rowDataBound",function(t){return p.Ec(e),p.jc().rowDB(t)})("headerCellInfo",function(t){return p.Ec(e),p.jc().headerCellInfo(t)})("toolbarClick",function(t){return p.Ec(e),p.jc().toolbarClick(t)}),p.Vb(15,"e-columns"),p.Qb(16,"e-column",35),p.Qb(17,"e-column",36),p.Qb(18,"e-column",37),p.Qb(19,"e-column",38),p.Vb(20,"e-column",39),p.Jc(21,bi,1,1,"ng-template",null,19,p.Kc),p.Ub(),p.Vb(23,"e-column",40),p.Jc(24,mi,1,1,"ng-template",null,19,p.Kc),p.Ub(),p.Vb(26,"e-column",41),p.Jc(27,fi,1,1,"ng-template",null,19,p.Kc),p.Ub(),p.Vb(29,"e-column",42),p.Jc(30,yi,1,1,"ng-template",null,19,p.Kc),p.Ub(),p.Vb(32,"e-column",43),p.Jc(33,Si,1,1,"ng-template",null,19,p.Kc),p.Ub(),p.Qb(35,"e-column",44),p.Vb(36,"e-column",45),p.Jc(37,vi,9,3,"ng-template",null,19,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(6),p.Nc("Complete: ",e.info.complete,""),p.Cb(2),p.Nc("Total: ",e.info.total,""),p.Cb(2),p.Nc("Complete Rate: ",e.info.completeRate,"%"),p.Cb(2),p.Mc(e.dataIsDone),p.Cb(1),p.pc("dataSource",e.data)("allowSelection",!0)("allowSorting",!0)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",e.filterSettings)("toolbar",e.toolbarOptions)("pageSettings",e.pageSettings)("editSettings",e.editSettings)}}function wi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",55),p.Vb(1,"ngb-pagination",56),p.fc("pageChange",function(t){return p.Ec(e),p.jc().onPageChange(t)})("pageChange",function(t){return p.Ec(e),p.jc().currentPage=t}),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(1),p.pc("collectionSize",e.totalItems)("directionLinks",!0)("page",e.currentPage)("pageSize",e.itemsPerPage)("maxSize",20)("rotate",!0)("boundaryLinks",!0)}}function Ci(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",57),p.Vb(1,"h4",58),p.Qb(2,"i",59),p.Lc(3," Import Excel "),p.Ub(),p.Vb(4,"button",60),p.fc("click",function(){return t.$implicit.dismiss("Cross click")}),p.Vb(5,"span",61),p.Lc(6,"\xd7"),p.Ub(),p.Ub(),p.Ub(),p.Vb(7,"div",62),p.Vb(8,"div",10),p.Vb(9,"div",63),p.Vb(10,"div",64),p.Vb(11,"label",65),p.Lc(12,"Select File (*Notice: Excel file must be followed a system template. If you do not have a template, please "),p.Vb(13,"a",66),p.Lc(14,"click here"),p.Ub(),p.Lc(15," to download. Thank you!)"),p.Ub(),p.Vb(16,"input",67),p.fc("change",function(t){return p.Ec(e),p.jc().fileProgress(t)}),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Vb(17,"div",68),p.Vb(18,"button",69),p.fc("click",function(){return p.Ec(e),p.jc().uploadFile()}),p.Lc(19,"Upload File"),p.Ub(),p.Vb(20,"button",70),p.fc("click",function(){return t.$implicit.close("Close click")}),p.Lc(21,"Close"),p.Ub(),p.Ub()}if(2&e){const e=p.jc();p.Cb(13),p.pc("href",e.excelDownloadUrl,p.Gc)}}new Date;let Ti=(()=>{class e extends s.a{constructor(e,t,i,n,a,l){super(),this.modalNameService=e,this.modalService=t,this.ingredientService=i,this.alertify=n,this.datePipe=a,this.route=l,this.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:20},this.data=[],this.destData=[],this.defaultDate=new Date(null),this.currentDate=new Date,this.srcDropOptions={targetID:"DestGrid"},this.glueTypeData=[],this.displayTextMethod={visibility:!1},this.destDropOptions={targetID:"Grid"},this.mfg=this.datePipe.transform(new Date,"yyyyMMdd"),this.exp=this.datePipe.transform(new Date((new Date).setMonth((new Date).getMonth()+4)),"yyyyMMdd"),this.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,expiredTime:0,daysToExpiration:0,voc:0,materialNO:"",partNO:"",unit:0,real:0,cbd:0,glueTypeID:0,replacementFrequency:0,prepareTime:0,standardCycle:0},this.page=1,this.currentPage=1,this.itemsPerPage=15,this.toolbar=["Search","Excel Export"],this.dataPrint=[],this.dataPicked=[],this.SUPERVISOR=2,this.ADMIN=1,this.info={total:0,completeRate:0,complete:0}}ngOnInit(){this.Permission(this.route);const e=JSON.parse(localStorage.getItem("building")),t=JSON.parse(localStorage.getItem("level"));this.role=t,this.building=e,this.filterSettings={type:"Excel"},this.excelDownloadUrl=`${h.a.apiUrlEC}Ingredient/ExcelExport`,this.ingredientService.currentIngredient.subscribe(e=>{300===e&&(this.getIngredients(),this.ingredient={id:0,name:"",code:"",percentage:0,createdDate:new Date,supplierID:0,position:0,allow:0,voc:0,expiredTime:0,daysToExpiration:0,materialNO:"",partNO:"",unit:0,real:0,cbd:0,glueTypeID:0,replacementFrequency:0,prepareTime:0,standardCycle:0})}),this.getIngredients(),this.getAllIngredients(),this.rate()}Permission(e){this.functions=JSON.parse(localStorage.getItem("functions"));for(const t of this.functions)if(e.snapshot.data.functionCode.includes(t.functionCode)){const e=[];for(const n of t.childrens){const t=this.makeAction(n.code);e.push(...t.filter(Boolean))}e.push("Search");const i=e.filter((e,t,i)=>t===i.indexOf(e));this.toolbarOptions=i;break}}makeAction(e){switch(e){case G.a.CREATE:return this.editSettings.allowAdding=!0,["Add"];case G.a.EXCEL_EXPORT:return["Excel Export"];case G.a.PRINT:return["Print QR Code"];default:return[void 0]}}rate(){this.ingredientService.rate().subscribe(e=>{this.info=e.data})}rowDB(e){const t=e.data;0!==t.expiredTime&&0!==t.unit&&0!==t.voc&&0!==t.daysToExpiration&&""!==t.materialNO||e.row.classList.add("bgcolor")}toolbarClickPrint(e){switch(e.item.text){case"Excel Export":const e={field:"name",headerText:"Ingredient",textAlign:"Center",autoFit:!0,width:120},t={field:"unit",headerText:"Amount",textAlign:"Center",autoFit:!0,width:80},i={field:"qrCode",headerText:"QR Code",textAlign:"Center",autoFit:!0,width:200},n={dataSource:this.dataPrint.map(e=>({supplier:e.supplier,name:e.name,unit:e.unit,qrCode:e.qrCode})),columns:[new f.c({field:"supplier",headerText:"Supplier",textAlign:"Center",autoFit:!0,width:120}),new f.c(e),new f.c(t),new f.c(i)],fileName:`${(new Date).getFullYear()}${(new Date).getMonth()}${(new Date).getDay()}_Print_Chemical.xlsx`};this.printGrid.excelExport(n)}}toolbarClick(e){switch(e.item.id){case"grid_Excel Export":let e;const t=this.ingredientGrid.renderModule.data.generateQuery();for(let i=0;i<t.queries.length;i++)if("onPage"===t.queries[i].fn){t.queries.splice(i,1);break}new ni.b({json:this.data}).executeQuery(t).then(t=>{e=t.result;const i={dataSource:e.map(e=>({supplier:e.supplier,name:e.name,unit:e.unit,code:e.materialNO,daysToExpiration:e.daysToExpiration})),columns:[new f.c({field:"supplier",headerText:"Supplier",textAlign:"Center",autoFit:!0,width:120}),new f.c({field:"name",headerText:"Ingredient",textAlign:"Center",autoFit:!0,width:120}),new f.c({field:"unit",headerText:"Amount",textAlign:"Center",autoFit:!0,width:80}),new f.c({field:"code",headerText:"Code",textAlign:"Center",autoFit:!0,width:200}),new f.c({field:"daysToExpiration",headerText:"Days to Expiry",textAlign:"Center",autoFit:!0,width:200})],fileName:`${(new Date).getFullYear()}${(new Date).getMonth()}${(new Date).getDay()}_Chemical.xlsx`};this.ingredientGrid.excelExport(i)}).catch(e=>!0);break;case"grid_add":this.openIngredientModalComponent(),this.ingredientGrid.refresh();break;case"grid_Import Excel":this.showModal();break;case"grid_Print QR Code":this.printBarcode()}}actionBegin(e){if("save"===e.requestType&&"edit"===e.action)for(const t in this.dataPrint)if(this.dataPrint[t].id===e.data.id){this.dataPrint[t].batch=e.data.batch,this.dataPrint[t].productionDate=e.data.productionDate,this.dataPrint[t].qrCode=`${this.datePipe.transform(e.data.productionDate,"yyyyMMdd")}-${e.data.batch}-${e.data.code}`;break}}configurePrint(e){const t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n        ${e}\n      </body>\n    </html>\n    `),t.document.close()}printData(){let e="";for(const t of this.dataPicked)e+=`\n       <div class='content'>\n        <div class='qrcode'>\n         ${document.getElementById(t.code).innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n          <li class='subInfo'>Name: ${t.name}</li>\n          <li class='subInfo'>QR Code: ${this.datePipe.transform(t.productionDate,"yyyyMMdd")}-${t.batch}-${t.code}</li>\n          <li class='subInfo'>MFG: ${this.datePipe.transform(t.productionDate,"yyyyMMdd")}</li>\n          <li class='subInfo'>EXP: ${t.exp}</li>\n          </ul>\n         </div>\n      </div>\n      `;this.configurePrint(e)}printBarcode(){this.show=!0,this.getAllIngredients()}rowSelected(e){setTimeout(()=>{this.dataPicked=this.printGrid.getSelectedRecords()},300)}rowDeselected(e){setTimeout(()=>{this.dataPicked=this.printGrid.getSelectedRecords()},300)}updateBatch(e,t){for(const i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].batch=t;break}for(const i in this.dataPicked)if(this.dataPicked[i].id===e){this.dataPicked[i].batch=t;break}}headerCellInfo(e){}updateProductionDate(e,t){for(const i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].productionDate=t;break}for(const i in this.dataPicked)if(this.dataPicked[i].id===e){this.dataPicked[i].productionDate=t;break}}updateExp(e,t){for(const i in this.dataPrint)if(this.dataPrint[i].id===e){this.dataPrint[i].exp=t;break}for(const i in this.dataPicked)if(this.dataPicked[i].id===e){this.dataPicked[i].exp=t;break}}pad(e){return e<10?"0"+e.toString():e.toString()}onChangeDate(e,t){}backList(){this.show=!1,this.dataPicked=[]}getIngredients(){this.ingredientService.getAllIngredient().subscribe(e=>{this.data=e.map(e=>{var t,i,n;return{id:e.id,supplier:e.supplier,supplierID:e.supplierID,name:e.name,code:e.code,voc:e.voc,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,materialNO:e.materialNO,partNO:null===(t=e.partNO)||void 0===t?void 0:t.split(":")[0],unit:e.unit,real:e.real,cbd:e.cbd,glueTypeID:null===e.glueType?0:null===(i=e.glueType)||void 0===i?void 0:i.id,glueType:null===e.glueType?"":null===(n=e.glueType)||void 0===n?void 0:n.title,replacementFrequency:e.replacementFrequency,prepareTime:e.prepareTime,createdDate:new Date(e.createdDate),standardCycle:e.standardCycle}})||[];const t=this.data.length,i=this.data.filter(e=>0===e.expiredTime||0===e.unit||0===e.daysToExpiration||""===e.materialNO).length;this.dataIsDone=`${i}/${t}`},e=>{this.alertify.error(e)})}getAllIngredients(){this.ingredientService.getAllIngredient().subscribe(e=>{this.dataPrint=e.map(e=>({id:e.id,code:e.materialNO,name:e.name,supplier:e.supplier,supplierID:e.supplierID,batch:"DEFAULT",unit:e.unit,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,replacementFrequency:e.replacementFrequency,prepareTime:e.prepareTime,productionDate:new Date,qrCode:`${this.datePipe.transform(new Date,"yyyyMMdd")}-DEFAULT-${e.materialNO}`,exp:this.datePipe.transform(new Date((new Date).setDate((new Date).getDate()+e.daysToExpiration)),"yyyyMMdd")}))},e=>{this.alertify.error(e)})}search(){this.text?this.ingredientService.search(this.currentPage,this.itemsPerPage,this.text).subscribe(e=>{this.data=e.result,this.pagination=e.pagination,this.totalItems=e.pagination.totalItems,this.currentPage=e.pagination.currentPage,this.itemsPerPage=e.pagination.itemsPerPage},e=>{this.alertify.error(e)}):this.getIngredients()}getAll(){this.ingredientService.getAllIngredient().subscribe(e=>{this.data=e,console.log(e)})}delete(e){this.alertify.confirm("Delete Ingredient",'Are you sure you want to delete this IngredientID "'+e.id+'" ?',()=>{this.ingredientService.delete(e.id).subscribe(()=>{this.getIngredients(),this.alertify.success("Ingredient has been deleted")},e=>{this.alertify.error("Failed to delete the Ingredient")})})}onPageChange(e){this.currentPage=e,this.text?this.ingredientService.search(this.currentPage,this.itemsPerPage,this.text).subscribe(e=>{this.data=e.result,this.pagination=e.pagination,this.totalItems=e.pagination.totalItems,this.currentPage=e.pagination.currentPage,this.itemsPerPage=e.pagination.itemsPerPage},e=>{this.alertify.error(e)}):this.getIngredients()}openIngredientModalComponent(){const e=this.modalService.open(ti.a,{size:"xl"});e.componentInstance.ingredient=this.ingredient,e.componentInstance.title="Add Chemical",e.result.then(e=>{},e=>{})}openIngredientEditModalComponent(e){const t=this.modalService.open(ti.a,{size:"xl"});t.componentInstance.ingredient=e,t.componentInstance.title="Edit Chemical",t.result.then(e=>{},e=>{})}fileProgress(e){this.file=e.target.files[0]}uploadFile(){const e=JSON.parse(localStorage.getItem("user")).user.id;this.ingredientService.import(this.file,e).subscribe(e=>{this.getAll(),this.alertify.success("The excel has been imported into system!"),this.modalService.dismissAll()},e=>{this.alertify.error(e,!0)})}showModal(){this.modalReference=this.modalService.open(this.importModal,{size:"xl"})}NO(e){return(this.ingredientGrid.pageSettings.currentPage-1)*this.ingredientGrid.pageSettings.pageSize+Number(e)+1}dataBound(){this.ingredientGrid.autoFitColumns()}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(ii.a),p.Pb(x.b),p.Pb(zt.a),p.Pb(m.a),p.Pb(n.e),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-ingredient"]],viewQuery:function(e,t){if(1&e&&(p.Rc(ai,1),p.Rc(li,1),p.Rc(ri,1),p.Rc(ci,1)),2&e){let e;p.Ac(e=p.gc())&&(t.importModal=e.first),p.Ac(e=p.gc())&&(t.barcode=e.first),p.Ac(e=p.gc())&&(t.printGrid=e.first),p.Ac(e=p.gc())&&(t.ingredientGrid=e.first)}},features:[p.Bb([n.e,f.l]),p.zb],decls:9,vars:5,consts:[[1,"card"],[1,"card-body"],["class","btn-group pb-3",4,"ngIf"],["class","row",4,"ngIf"],[4,"ngIf"],["class","card-footer",4,"ngIf"],["importModal",""],[1,"btn-group","pb-3"],["type","button",1,"btn","btn-success","ml-2",3,"click"],[1,"fa","fa-print"],[1,"row"],[1,"col-xl-8"],["id","Grid","rowHeight","38","height","450",3,"dataSource","allowSelection","selectionSettings","allowExcelExport","editSettings","enableHover","allowRowDragAndDrop","toolbar","rowDropSettings","allowSorting","rowDeselected","actionBegin","rowSelected","toolbarClick"],["printGrid",""],["type","checkbox","isPrimaryKey","true","width","60"],["field","supplier","isPrimaryKey","true","headerText","Supplier","width","100"],["field","name","isPrimaryKey","true","headerText","Chemical","width","100"],["field","batch","headerText","Batch","width","100"],["field","productionDate","type","date","format","yyyyMMdd","editType","datepickeredit","headerText","Production date","width","100"],["template",""],[1,"col-xl-4"],["id","qrcode","height","450",1,"table","table-hover"],[1,"thead-dark"],["colspan","2"],[4,"ngFor","ngForOf"],[1,"text-center"],["width","100px","height","130px","mode","SVG",2,"display","block",3,"id","displayText","value"],[1,"text-algin-left"],[1,"col-md-12","d-flex","justify-content-end","align-items-center"],[1,"mr-2"],[1,"list-unstyled"],[1,"text-danger"],[1,"float-right","text-green","font-weight-bold","mb-2"],["id","grid","rowHeight","38","allowFiltering","true","showColumnMenu","true","allowPaging","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","allowExcelExport","filterSettings","toolbar","pageSettings","editSettings","dataBound","rowDataBound","headerCellInfo","toolbarClick"],["ingredientGrid",""],["field","supplier","headerText","Supplier","textAlign","Center","width","100"],["field","materialNO","headerText","Material #","textAlign","Center","width","100"],["field","partNO","headerText","Part #","textAlign","Center","width","100"],["field","name","headerText","Chemical","textAlign","Left","width","120"],["field","voc","headerText","VOC","textAlign","Center","width","80"],["field","daysToExpiration","headerText","Days to Expiry","textAlign","Center","width","130"],["field","expiredTime","headerText","Expiry Period","textAlign","Center","width","130"],["field","unit","headerText","Amount","textAlign","Center","width","100"],["field","glueType","headerText","Glue Type","textAlign","Center","width","130"],["field","createdDate","type","date","format","MM-dd-yyyy","headerText","Created Date","width","160","textAlign","Center"],["field","Option","headerText","Option","textAlign","Center","width","150"],["data-toggle","tooltip","data-placement","top","title","Print QRCode",1,"btn-group"],[1,"btn","btn-xs","btn-success","mr-2",3,"routerLink"],["aria-hidden","true",1,"fa","fa-qrcode"],["appPermission","","appFunction","Chemical","appAction","EDIT",1,"btn-group","mr-2"],["type","button",1,"btn","btn-xs","btn-primary",3,"click"],[1,"fa","fa-edit"],["appPermission","","appFunction","Chemical","appAction","DELETE",1,"btn-group"],["type","button",1,"btn","btn-xs","btn-danger",3,"click"],[1,"fa","fa-trash"],[1,"card-footer"],[3,"collectionSize","directionLinks","page","pageSize","maxSize","rotate","boundaryLinks","pageChange"],[1,"modal-header"],[1,"modal-title"],[1,"fas","fa-plus"],["type","button","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"col-md-6"],[1,"form-group"],["for","Name"],[3,"href"],["name","file","type","file",1,"form-control",3,"change"],[1,"modal-footer"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Jc(2,si,3,0,"div",2),p.Jc(3,oi,4,0,"div",2),p.Jc(4,pi,20,12,"div",3),p.Jc(5,xi,39,13,"div",4),p.Ub(),p.Jc(6,wi,2,7,"div",5),p.Ub(),p.Jc(7,Ci,22,1,"ng-template",null,6,p.Kc)),2&e&&(p.Cb(2),p.pc("ngIf",t.show),p.Cb(1),p.pc("ngIf",t.show),p.Cb(1),p.pc("ngIf",t.show),p.Cb(1),p.pc("ngIf",!t.show),p.Cb(1),p.pc("ngIf",!1))},directives:[n.n,f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,n.m,re.d,r.f,D.a,x.d],pipes:[n.e],styles:[".bgcolor[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{background-color:#ff6}.e-grid[_ngcontent-%COMP%]   .e-altrow[_ngcontent-%COMP%]{background-color:#d6d8db}"]}),e})();var Di=i("Uc7L");const Ui=["barcode"],ki=["displayText"];let Ii=(()=>{class e{constructor(e,t,i){this.route=e,this.datePipe=t,this.ingredientService=i,this.qrcode="",this.batch="DEFAULT",this.mfgTemp=new Date,this.mfg=this.datePipe.transform(this.mfgTemp,"yyyyMMdd"),this.exp=this.datePipe.transform(new Date((new Date).setMonth((new Date).getMonth()+4)),"yyyyMMdd"),this.displayTextMethod={visibility:!1}}ngOnInit(){this.onRouteChange()}getByID(e){this.ingredientService.getByID(e).subscribe(e=>{this.ingredient=e,this.mfg=this.datePipe.transform(this.mfgTemp,"yyyyMMdd"),this.exp=this.datePipe.transform(this.mfgTemp.setDate(this.mfgTemp.getDate()+this.ingredient.daysToExpiration),"yyyyMMdd"),this.qrcode=`${this.mfg}-${this.batch}-${this.ingredient.materialNO}`},e=>{})}onChangeProductionDate(e){if(e.isInteracted){const t=e.value;this.mfg=this.datePipe.transform(t,"yyyyMMdd"),this.exp=this.datePipe.transform(t.setDate(t.getDate()+this.ingredient.daysToExpiration),"yyyyMMdd"),this.qrcode=`${this.mfg}-${this.batch}-${this.ingredient.materialNO}`}}printData(){const e=document.getElementById("qrcode"),t=window.open("","_blank","left=0,top=0,width=1000,height=900,toolbar=0,scrollbars=0,status=0");t.document.write(`\n    <html>\n      <head>\n      </head>\n      <style>\n        * {\n          box-sizing: border-box;\n          -moz-box-sizing: border-box;\n        }\n\n        .content {\n          page-break-after: always;\n          clear: both;\n        }\n\n        .content .qrcode {\n          float:left;\n          width: 100px;\n          margin-top: 10px;\n          padding: 0;\n          margin-left: 0px;\n        }\n\n        .content .info {\n          float:left;\n          list-style: none;\n          width: 200px;\n        }\n        .content .info ul {\n          float:left;\n          list-style: none;\n          padding: 0px;\n          margin: 0px;\n          margin-top: 20px;\n          font-weight: bold;\n          word-wrap: break-word;\n        }\n\n        @page {\n          size: 2.65 1.20 in;\n          page-break-after: always;\n          margin: 0;\n        }\n        @media print {\n          html, body {\n            width: 90mm; // Chi co nhan millimeter\n          }\n        }\n      </style>\n      <body onload="window.print(); window.close()">\n      <div class='content'>\n        <div class='qrcode'>\n         ${e.innerHTML}\n         </div>\n          <div class='info'>\n          <ul>\n            <li class='subInfo'>Name: ${this.ingredient.name}</li>\n            <li class='subInfo'>QR Code: ${this.qrcode}</li>\n            <li class='subInfo'>MFG: ${this.mfg}</li>\n            <li class='subInfo'>EXP: ${this.exp}</li>\n          </ul>\n         </div>\n      </div>\n      </body>\n    </html>\n    `),t.document.close()}onRouteChange(){this.route.data.subscribe(e=>{this.getByID(this.route.snapshot.params.id),this.name=this.route.snapshot.params.name})}onChangeBatch(e){this.qrcode=`${this.mfg}-${e}-${this.route.snapshot.paramMap.get("code")}`}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(r.a),p.Pb(n.e),p.Pb(zt.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-print-qrcode"]],viewQuery:function(e,t){if(1&e&&(p.Rc(Ui,1),p.Rc(ki,1)),2&e){let e;p.Ac(e=p.gc())&&(t.barcode=e.first),p.Ac(e=p.gc())&&(t.displayText=e.first)}},features:[p.Bb([n.e])],decls:45,vars:10,consts:[[1,"row"],[1,"col-md-2"],[1,"col-md-8"],[1,"e-input-group"],["readonly","","type","text","placeholder","",1,"e-input",3,"value"],["type","text","placeholder","Enter batch...",1,"e-input",3,"ngModel","ngModelChange"],[1,"col-md-3"],["format","yyyyMMdd","placeholder","Production Date","floatLabelType","Never",3,"ngModel","change","ngModelChange"],["readonly","","type","text","placeholder","",1,"e-input",3,"ngModel","ngModelChange"],[1,"text-center"],[1,"btn","btn-sm","btn-success",3,"click"],[1,"fa","fa-print"],[1,"col-md-4"],[1,"col-md-4","text-left"],[1,"center"],["id","qrcode","width","100px","height","130px","mode","SVG",2,"display","block",3,"displayText","value"],["barcode",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Qb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",0),p.Vb(4,"div",1),p.Vb(5,"div",3),p.Qb(6,"input",4),p.Ub(),p.Ub(),p.Vb(7,"div",1),p.Vb(8,"div",3),p.Vb(9,"input",5),p.fc("ngModelChange",function(e){return t.onChangeBatch(e)})("ngModelChange",function(e){return t.batch=e}),p.Ub(),p.Ub(),p.Ub(),p.Vb(10,"div",6),p.Vb(11,"ejs-datepicker",7),p.fc("change",function(e){return t.onChangeProductionDate(e)})("ngModelChange",function(e){return t.mfgTemp=e}),p.Ub(),p.Ub(),p.Vb(12,"div",6),p.Vb(13,"div",3),p.Vb(14,"input",8),p.fc("ngModelChange",function(e){return t.exp=e}),p.Ub(),p.Ub(),p.Ub(),p.Vb(15,"div",1),p.Vb(16,"div",9),p.Vb(17,"button",10),p.fc("click",function(){return t.printData()}),p.Qb(18,"i",11),p.Lc(19," Print"),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Qb(20,"div",1),p.Ub(),p.Qb(21,"hr"),p.Vb(22,"div",0),p.Qb(23,"div",12),p.Vb(24,"div",13),p.Vb(25,"div",14),p.Qb(26,"ejs-qrcodegenerator",15,16),p.Ub(),p.Vb(28,"div"),p.Vb(29,"label"),p.Lc(30,"Name:"),p.Ub(),p.Lc(31),p.Ub(),p.Vb(32,"div"),p.Vb(33,"label"),p.Lc(34,"QrCode:"),p.Ub(),p.Lc(35),p.Ub(),p.Vb(36,"div"),p.Vb(37,"label"),p.Lc(38,"MFG:"),p.Ub(),p.Lc(39),p.Ub(),p.Vb(40,"div"),p.Vb(41,"label"),p.Lc(42,"EXP:"),p.Ub(),p.Lc(43),p.Ub(),p.Ub(),p.Qb(44,"div",12),p.Ub()),2&e&&(p.Cb(6),p.pc("value",t.name),p.Cb(3),p.pc("ngModel",t.batch),p.Cb(2),p.pc("ngModel",t.mfgTemp),p.Cb(3),p.pc("ngModel",t.exp),p.Cb(12),p.pc("displayText",t.displayTextMethod)("value",t.qrcode),p.Cb(5),p.Nc(" ",t.name,""),p.Cb(4),p.Nc(" ",t.qrcode,""),p.Cb(4),p.Nc(" ",t.mfg,""),p.Cb(4),p.Nc(" ",t.exp,""))},directives:[a.a,a.f,a.i,gt.a,re.d],styles:[""]}),e})();const Pi=["ingredientGrid"];function Mi(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}function Vi(e,t){1&e&&p.Lc(0," # ")}function Ai(e,t){1&e&&p.Lc(0),2&e&&p.Nc("$",t.$implicit.real,"")}function Bi(e,t){1&e&&p.Lc(0),2&e&&p.Nc("$",t.$implicit.cbd,"")}function Ei(e,t){1&e&&(p.Lc(0),p.kc(1,"date")),2&e&&p.Nc(" ",p.mc(1,1,t.$implicit.createdDate,"dd MMM, yyyy HH:mm")," ")}let Li=(()=>{class e{constructor(e,t){this.ingredientService=e,this.alertify=t,this.pageSettings={pageCount:20,pageSizes:!0,currentPage:1,pageSize:20},this.data=[],this.editSettings={showDeleteConfirmDialog:!1,allowEditing:!0,allowAdding:!0,allowDeleting:!0,mode:"Normal"}}ngOnInit(){this.toolbarOptions=["Search","Edit","Cancel","ExcelExport"],this.filterSettings={type:"Excel"},this.getIngredients()}toolbarClick(e){switch(e.item.id){case"grid_excelexport":this.ingredientGrid.excelExport()}}actionBegin(e){if("save"===e.requestType&&"edit"===e.action){const t=e.data;this.update({id:t.id,name:t.name,percentage:0,code:t.code,createdDate:t.createdDate,supplierID:t.supplierID,position:0,allow:0,voc:t.voc,expiredTime:t.expiredTime,daysToExpiration:t.daysToExpiration,materialNO:t.materialNO,unit:t.unit,real:t.real,cbd:t.cbd,glueTypeID:t.glueTypeID,replacementFrequency:t.replacementFrequency,prepareTime:t.prepareTime,standardCycle:t.standardCycle,partNO:t.partNO})}}onDoubleClick(e){this.setFocus=e.column}actionComplete(e){"beginEdit"===e.requestType&&e.form.elements.namedItem(this.setFocus.field).focus()}getIngredients(){this.ingredientService.getAllIngredient().subscribe(e=>{this.data=e.map(e=>({id:e.id,supplier:e.supplier,supplierID:e.supplierID,name:e.name,code:e.code,voc:e.voc,expiredTime:e.expiredTime,daysToExpiration:e.daysToExpiration,materialNO:e.materialNO,unit:e.unit,real:e.real,cbd:e.cbd,createdDate:new Date(e.createdDate)}))},e=>{this.alertify.error(e)})}update(e){this.ingredientService.update(e).subscribe(e=>{this.alertify.success("Updated successed!"),this.getIngredients()})}NO(e){return(this.ingredientGrid.pageSettings.currentPage-1)*this.ingredientGrid.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(zt.a),p.Pb(m.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-costing"]],viewQuery:function(e,t){if(1&e&&p.Rc(Pi,1),2&e){let e;p.Ac(e=p.gc())&&(t.ingredientGrid=e.first)}},decls:24,vars:9,consts:[[1,"card"],[1,"card-header"],[1,"card-body"],["id","grid","rowHeight","38","allowFiltering","true","showColumnMenu","true","allowPaging","true","allowResizing","true","gridLines","Both",3,"dataSource","allowSelection","allowSorting","allowExcelExport","filterSettings","toolbar","pageSettings","editSettings","recordDoubleClick","actionBegin","actionComplete","toolbarClick"],["ingredientGrid",""],["field","#","headerText","#","width","40"],["template",""],["editTemplate",""],["field","supplier","headerText","Supplier","textAlign","Center","width","100"],["field","name","headerText","Chemical","textAlign","Center","width","120"],["field","real","headerText","Real","textAlign","Center","width","100"],["field","cbd","headerText","CBD","textAlign","Center","width","100"],["field","createdDate","headerText","Created Date","textAlign","Center","type","dateTime","format","dd MMM, yyyy HH:mm","width","180"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"h3"),p.Lc(3,"Chemical List"),p.Ub(),p.Ub(),p.Vb(4,"div",2),p.Vb(5,"ejs-grid",3,4),p.fc("recordDoubleClick",function(e){return t.onDoubleClick(e)})("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(7,"e-columns"),p.Vb(8,"e-column",5),p.Jc(9,Mi,1,1,"ng-template",null,6,p.Kc),p.Jc(11,Vi,1,0,"ng-template",null,7,p.Kc),p.Ub(),p.Qb(13,"e-column",8),p.Qb(14,"e-column",9),p.Vb(15,"e-column",10),p.Jc(16,Ai,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Vb(18,"e-column",11),p.Jc(19,Bi,1,1,"ng-template",null,6,p.Kc),p.Ub(),p.Vb(21,"e-column",12),p.Jc(22,Ei,2,4,"ng-template",null,7,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(5),p.pc("dataSource",t.data)("allowSelection",!0)("allowSorting",!0)("allowExcelExport",!0)("allowSorting",!0)("filterSettings",t.filterSettings)("toolbar",t.toolbarOptions)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a],pipes:[n.e],styles:[""]}),e})();const ji=["grid"];function Oi(e,t){if(1&e&&p.Lc(0),2&e){const e=t.$implicit,i=p.jc();p.Nc(" ",i.NO(e.index)," ")}}const Ni=function(e){return[e]};function $i(e,t){1&e&&(p.Vb(0,"button",12),p.Lc(1,"Privilege"),p.Ub()),2&e&&p.pc("routerLink",p.vc(1,Ni,"/ec/setting/role/privilege/"+t.$implicit.id))}let Ri=(()=>{class e extends s.a{constructor(e,t,i){super(),this.roleService=e,this.alertify=t,this.route=i,this.data=[],this.pageSettings={pageCount:20,pageSizes:!0,pageSize:10},this.fieldsRoleType={text:"name",value:"name"},this.filterSettings={type:"Excel"}}ngOnInit(){this.Permission(this.route),this.role={},this.getAllRole()}getAllRole(){this.roleService.getAll().subscribe(e=>{this.data=e})}create(){this.roleService.create(this.role).subscribe(()=>{this.alertify.success("Add Role Successfully"),this.getAllRole(),this.role={}})}update(){this.roleService.update(this.role).subscribe(()=>{this.alertify.success("Add Role Successfully"),this.getAllRole(),this.role={}})}delete(e){this.alertify.confirm("Delete role",'Are you sure you want to delete this role "'+e+'" ?',()=>{this.roleService.delete(e).subscribe(()=>{this.getAllRole(),this.alertify.success("The role has been deleted")},e=>{this.alertify.error("Failed to delete the role")})})}toolbarClick(e){switch(e.item.text){case"Excel Export":this.grid.excelExport()}}actionBegin(e){"save"===e.requestType&&("add"===e.action&&(this.role.id=0,this.role.name=e.data.name,this.role.code=e.data.code,this.create()),"edit"===e.action&&(this.role.id=e.data.id,this.role.name=e.data.name,this.role.code=e.data.code,this.update())),"delete"===e.requestType&&(this.alertify.error("Can not delete this role",!0),this.delete(e.data[0].id))}actionComplete(e){"add"===e.requestType&&(e.form.elements.namedItem("name").focus(),e.form.elements.namedItem("id").disabled=!0)}NO(e){return(this.grid.pageSettings.currentPage-1)*this.pageSettings.pageSize+Number(e)+1}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(y.a),p.Pb(m.a),p.Pb(r.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-role"]],viewQuery:function(e,t){if(1&e&&p.Rc(ji,1),2&e){let e;p.Ac(e=p.gc())&&(t.grid=e.first)}},features:[p.zb],decls:17,vars:7,consts:[[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header"],[1,"card-title"],["gridLines","Both","allowPaging","true","allowResizing","true","showColumnMenu","true","allowFiltering","true",3,"toolbar","dataSource","allowSorting","allowExcelExport","filterSettings","pageSettings","editSettings","actionBegin","actionComplete","toolbarClick"],["grid",""],["field","id","headerText","#","width","70","textAlign","Center","isPrimaryKey","true"],["template",""],["field","code","headerText","Code","width","200","textAlign","Center"],["field","name","headerText","Role Group","width","200","textAlign","Center"],["field","option","headerText","Option","width","200","textAlign","Center"],["appPermission","","appFunction","Role","appAction","PRIVILEGE","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"h5",4),p.Lc(5,"Role group list"),p.Ub(),p.Ub(),p.Vb(6,"ejs-grid",5,6),p.fc("actionBegin",function(e){return t.actionBegin(e)})("actionComplete",function(e){return t.actionComplete(e)})("toolbarClick",function(e){return t.toolbarClick(e)}),p.Vb(8,"e-columns"),p.Vb(9,"e-column",7),p.Jc(10,Oi,1,1,"ng-template",null,8,p.Kc),p.Ub(),p.Qb(12,"e-column",9),p.Qb(13,"e-column",10),p.Vb(14,"e-column",11),p.Jc(15,$i,2,3,"ng-template",null,8,p.Kc),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(6),p.pc("toolbar",t.toolbarOptions)("dataSource",t.data)("allowSorting",!0)("allowExcelExport",!0)("filterSettings",t.filterSettings)("pageSettings",t.pageSettings)("editSettings",t.editSettings))},directives:[f.j,w.d,C.d,C.b,f.e,f.b,w.c,C.c,C.a,f.d,f.a,D.a,r.e,r.d],styles:[""]}),e})();var qi=i("icBO"),Ki=i("BrIm");const Ji=["treeview"];function Fi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",23),p.Vb(1,"ejs-checkbox",24),p.fc("change",function(i){p.Ec(e);const n=t.$implicit;return p.jc().changeRole(i,n)}),p.Ub(),p.Ub()}if(2&e){const e=t.$implicit;p.Cb(1),p.pc("label",e.name)}}function Gi(e,t){if(1&e){const e=p.Wb();p.Vb(0,"div",25),p.Vb(1,"h3",26),p.Lc(2),p.Ub(),p.Qb(3,"hr"),p.Vb(4,"ejs-treeview",27,28),p.fc("created",function(t){return p.Ec(e),p.jc().created(t)})("nodeChecked",function(t){return p.Ec(e),p.jc().nodeChecked(t)})("nodeClicked",function(t){return p.Ec(e),p.jc().nodeCheck(t)})("keyPress",function(t){return p.Ec(e),p.jc().nodeCheck(t)}),p.Ub(),p.Ub()}if(2&e){const e=t.$implicit;p.Cb(2),p.Mc(e.moduleName),p.Cb(2),p.pc("checkedNodes",e.checkedNodes)("fields",e.fields)}}const zi=[{path:"",children:[{path:"account",component:J,data:{title:"Account",breadcrumb:"Account",functionCode:"Account"},canActivate:[c.a]},{path:"building",component:ne,data:{title:"Building",breadcrumb:"Building",functionCode:"Building"},canActivate:[c.a]},{path:"supplier",component:Yt,data:{title:"Supplier",breadcrumb:"Supplier",functionCode:"Supplier Menu"},canActivate:[c.a]},{path:"chemical",data:{title:"Chemical",breadcrumb:"Chemical",functionCode:"Chemical"},canActivate:[c.a],children:[{path:"",component:Ti},{path:"print-qrcode/:id/:code/:name",component:Ii,data:{title:"Print QRCode",breadcrumb:"Print QRCode"}}]},{path:"kind",component:rt,data:{title:"Kind",breadcrumb:"Kind",functionCode:"Kind"},canActivate:[c.a]},{path:"part",component:At,data:{title:"Part",breadcrumb:"Part",functionCode:"Part"},canActivate:[c.a]},{path:"material",component:It,data:{title:"Material",breadcrumb:"Material",functionCode:"Material"},canActivate:[c.a]},{path:"glue-type",component:ei,data:{title:"Glue Type",breadcrumb:"Glue Type",functionCode:"Glue Type"},canActivate:[c.a]},{path:"building-setting",component:me,data:{title:"RPM IoT",breadcrumb:"RPM IoT",functionCode:"RPM IoT"},canActivate:[c.a]},{path:"building-lunch-time",component:Ge,data:{title:"Period",breadcrumb:"Period",functionCode:"Period"},canActivate:[c.a]},{path:"decentralization",component:Ze,data:{title:"Decentralization",breadcrumb:"Decentralization"},canActivate:[c.a]},{path:"scaling-setting",component:qt,data:{title:"Scaling Setting",breadcrumb:"Scaling Setting"},canActivate:[c.a]},{path:"mailing",component:Tt,data:{title:"Mailing",breadcrumb:"Mailing"},canActivate:[c.a]},{path:"lunch-time",component:ut,data:{title:"Lunch Time",breadcrumb:"Lunch Time"},canActivate:[c.a]},{path:"subpackage-capacity",component:Gt,data:{title:"Subpackage Capacity",breadcrumb:"Subpackage Capacity"},canActivate:[c.a]},{path:"costing",component:Li,data:{title:"costing",breadcrumb:"Costing"},canActivate:[c.a]},{path:"role",data:{title:"Role",functionCode:"Role"},canActivate:[c.a],children:[{path:"",component:Ri},{path:"privilege/:id",component:(()=>{class e{constructor(e,t,i,n,a){this.router=e,this.route=t,this.roleService=i,this.alertify=n,this.permissionService=a,this.checkedData=[]}ngOnInit(){this.id=+this.route.snapshot.params.id||0,this.roleIDs=[this.id],this.getAllRole(),this.getScreenFunctionAndAction()}getAllRole(){this.roleService.getAll().subscribe(e=>{this.data=e})}changeRole(e,t){if(!0===e.checked)this.roleIDs.push(t.id);else{const e=this.roleIDs.filter(e=>e!==t.id);this.roleIDs=e,0===this.roleIDs.length&&this.roleIDs.push(this.id)}this.getScreenFunctionAndAction()}nodeCheck(e){const t=[e.node];for(const i of this.tree)(e.event.target.classList.contains("e-fullrow")||"Enter"===e.event.key)&&("true"===i.getNode(e.node).isChecked?i.uncheckAll(t):i.checkAll(t))}nodeChecked(e){console.log(e)}back(){this.router.navigate(["/ec/setting/role"])}created(e){}getAllChecked(){const e=[],t=[],i=[];for(const r of this.tree){const t=[...r.getAllCheckedNodes()];e.push(...t);const n=[...r.getTreeData()];i.push(...n)}const n=i.map(e=>e.childrens),a=[].concat.apply([],n),l=e.filter((e,t,i)=>i.indexOf(e)===t);for(const r of l){const e=a.filter(e=>e.id===r),n=i.filter(e=>e.id===r);t.push(...e),t.push(...n)}this.checkedList=t}getScreenFunctionAndAction(){this.roleService.getScreenFunctionAndAction(this.roleIDs===[]?[0]:this.roleIDs).subscribe(e=>{this.modules=e})}checkedAll(){for(const e of this.tree)e.checkAll()}uncheckedAll(){for(const e of this.tree)e.uncheckAll()}collapseAll(){for(const e of this.tree)e.collapseAll()}expandAll(){for(const e of this.tree)e.expandAll()}save(){this.getAllChecked(),this.putPermissionByRoleId()}putPermissionByRoleId(){this.permissionService.putPermissionByRoleId(this.id,{permissions:this.checkedList}).subscribe(()=>{this.alertify.success("Successfully"),this.roleIDs=[this.id],this.getScreenFunctionAndAction()})}}return e.\u0275fac=function(t){return new(t||e)(p.Pb(r.c),p.Pb(r.a),p.Pb(y.a),p.Pb(m.a),p.Pb(qi.a))},e.\u0275cmp=p.Jb({type:e,selectors:[["app-privilege"]],viewQuery:function(e,t){if(1&e&&p.Rc(Ji,1),2&e){let e;p.Ac(e=p.gc())&&(t.tree=e)}},decls:37,vars:2,consts:[[1,"row"],[1,"col-md-12"],[1,"card","card-info","card-outline"],[1,"card-header"],[1,"card-title"],[1,"fas","fa-edit"],[1,"card-body"],[1,"d-flex","justify-content-center","align-items-center"],["class","mr-5 my-2",4,"ngFor","ngForOf"],[1,"fa","fa-user-circle"],[1,"my-3","d-flex","justify-content-center","align-items-center"],[1,"btn","btn-primary","mr-2",3,"click"],[1,"fa","fa-check-square"],[1,"btn","btn-primary",3,"click"],[1,"fa","fa-window-close"],[1,"btn","btn-primary","mx-2",3,"click"],[1,"fa","fa-arrows-alt"],[1,"fa","fa-expand"],["class","col-3",4,"ngFor","ngForOf"],[1,"card-footer","d-flex","justify-content-center"],[1,"btn","btn-info","mr-2",3,"click"],[1,"fa","fa-backspace"],[1,"fa","fa-save"],[1,"mr-5","my-2"],["cssClass","e-primary",3,"label","change"],[1,"col-3"],[1,"d-flex","justify-content-center"],["showCheckBox","true",3,"checkedNodes","fields","created","nodeChecked","nodeClicked","keyPress"],["treeview",""]],template:function(e,t){1&e&&(p.Vb(0,"div",0),p.Vb(1,"div",1),p.Vb(2,"div",2),p.Vb(3,"div",3),p.Vb(4,"h3",4),p.Qb(5,"i",5),p.Lc(6," Sample privilege groups "),p.Ub(),p.Ub(),p.Vb(7,"div",6),p.Vb(8,"div",7),p.Jc(9,Fi,2,1,"div",8),p.Ub(),p.Ub(),p.Ub(),p.Vb(10,"div",2),p.Vb(11,"div",3),p.Vb(12,"h3",4),p.Qb(13,"i",9),p.Lc(14," The privilege "),p.Ub(),p.Ub(),p.Vb(15,"div",10),p.Vb(16,"button",11),p.fc("click",function(){return t.checkedAll()}),p.Qb(17,"i",12),p.Lc(18," Checked All "),p.Ub(),p.Vb(19,"button",13),p.fc("click",function(){return t.uncheckedAll()}),p.Qb(20,"i",14),p.Lc(21," Unchecked All "),p.Ub(),p.Vb(22,"button",15),p.fc("click",function(){return t.collapseAll()}),p.Qb(23,"i",16),p.Lc(24," Collapse All "),p.Ub(),p.Vb(25,"button",13),p.fc("click",function(){return t.expandAll()}),p.Qb(26,"i",17),p.Lc(27," Expand All "),p.Ub(),p.Ub(),p.Vb(28,"div",0),p.Jc(29,Gi,6,3,"div",18),p.Ub(),p.Ub(),p.Vb(30,"div",19),p.Vb(31,"button",20),p.fc("click",function(){return t.back()}),p.Qb(32,"i",21),p.Lc(33," Back "),p.Ub(),p.Vb(34,"button",13),p.fc("click",function(){return t.save()}),p.Qb(35,"i",22),p.Lc(36," Save "),p.Ub(),p.Ub(),p.Ub(),p.Ub()),2&e&&(p.Cb(9),p.pc("ngForOf",t.data),p.Cb(20),p.pc("ngForOf",t.modules))},directives:[n.m,U.e,Ki.g],styles:[".e-frame.e-icons[_ngcontent-%COMP%], .e-frame.e-icons.e-check[_ngcontent-%COMP%], .e-frame.e-icons.e-stop[_ngcontent-%COMP%]{border:1px solid!important;border-radius:4px!important;box-sizing:border-box!important;cursor:pointer!important;display:inline-block!important;font-family:e-icons!important;height:20px!important;line-height:20px!important;padding:0!important;text-align:center!important;vertical-align:middle!important;width:20px!important;font-size:12px!important}"]}),e})(),data:{title:"Privilege"}}]}]}];let Qi=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Nb({type:e}),e.\u0275inj=p.Mb({imports:[[r.g.forChild(zi)],r.g]}),e})();var Hi=i("wTG2"),Yi=i("k5Gf"),Wi=i("KeVr"),_i=i("4SUy"),Xi=i("pQl/"),Zi=i("bwdU"),en=i("xxV/");function tn(e){return new Yi.a(e,"./assets/i18n/",".json")}let nn;const an=localStorage.getItem("lang");Object(_i.bb)(i("2PVe"),i("GFvd"),i("GFWS"),i("0zpJ"),i("LRxf")),Object(_i.bb)(i("2PVe"),i("oP7I"),i("Joj5"),i("3JeS"),i("LRxf")),nn="vi"===an?an:"en";let ln=(()=>{class e{constructor(){"vi"===an?(nn="vi",setTimeout(()=>{_i.p.load(i("+7Wi")),Object(_i.nb)("vi")})):(nn="en",setTimeout(()=>{_i.p.load(i("7j5C")),Object(_i.nb)("en")}))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=p.Nb({type:e}),e.\u0275inj=p.Mb({providers:[n.e],imports:[[a.b,n.c,Zi.b,U.c,a.l,l.b,Qi,Hi.a,T.d,x.c,w.b,w.a,w.e,re.a,re.c,re.b,U.l,Di.a,gt.b,C.h,f.i,U.i,v.d,ve.b,Wi.a,gt.d,Xi.a,Ki.e,U.f,T.g,en.a,Ki.f,U.d,k.b.forChild({loader:{provide:k.a,useFactory:tn,deps:[u.b]},defaultLanguage:nn})]]}),e})()}}]);